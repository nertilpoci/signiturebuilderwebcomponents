{"version":3,"names":["isNodeJS","process","versions","nw","electron","type","FONT_IDENTITY_MATRIX","LINE_FACTOR","RenderingIntentFlag","ANY","DISPLAY","PRINT","ANNOTATIONS_FORMS","ANNOTATIONS_STORAGE","ANNOTATIONS_DISABLE","IS_EDITING","OPLIST","AnnotationMode","DISABLE","ENABLE","ENABLE_FORMS","ENABLE_STORAGE","AnnotationEditorPrefix","AnnotationEditorType","NONE","FREETEXT","HIGHLIGHT","STAMP","INK","SIGNATURE","AnnotationEditorParamsType","RESIZE","CREATE","FREETEXT_SIZE","FREETEXT_COLOR","FREETEXT_OPACITY","INK_COLOR","INK_THICKNESS","INK_OPACITY","HIGHLIGHT_COLOR","HIGHLIGHT_DEFAULT_COLOR","HIGHLIGHT_THICKNESS","HIGHLIGHT_FREE","HIGHLIGHT_SHOW_ALL","DRAW_STEP","PermissionFlag","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","TextRenderingMode","FILL","STROKE","FILL_STROKE","INVISIBLE","FILL_STROKE_MASK","ADD_TO_PATH_FLAG","util_ImageKind","GRAYSCALE_1BPP","RGB_24BPP","RGBA_32BPP","AnnotationType","TEXT","LINK","LINE","SQUARE","CIRCLE","POLYGON","POLYLINE","UNDERLINE","SQUIGGLY","STRIKEOUT","CARET","POPUP","FILEATTACHMENT","SOUND","MOVIE","WIDGET","SCREEN","PRINTERMARK","TRAPNET","WATERMARK","THREED","REDACT","AnnotationBorderStyleType","SOLID","DASHED","BEVELED","INSET","VerbosityLevel","ERRORS","WARNINGS","INFOS","OPS","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","save","restore","transform","moveTo","lineTo","curveTo","curveTo2","curveTo3","closePath","rectangle","stroke","closeStroke","fill","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotation","endAnnotation","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","setStrokeTransparent","setFillTransparent","rawFillPath","DrawOPS","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","verbosity","setVerbosityLevel","level","Number","isInteger","getVerbosityLevel","info","msg","console","log","warn","unreachable","Error","assert","cond","_isValidProtocol","url","protocol","createValidAbsoluteUrl","baseUrl","options","addDefaultProtocol","startsWith","dots","match","length","tryConvertEncoding","stringToUTF8String","absoluteUrl","URL","parse","updateUrlHash","hash","allowRel","res","href","split","shadow","obj","prop","value","nonSerializable","Object","defineProperty","enumerable","configurable","writable","BaseException","BaseExceptionClosure","message","name","this","prototype","constructor","PasswordException","code","super","UnknownErrorException","details","InvalidPDFException","ResponseException","status","missing","FormatError","AbortException","bytesToString","bytes","undefined","MAX_ARGUMENT_COUNT","String","fromCharCode","apply","strBuf","i","chunkEnd","Math","min","chunk","subarray","push","join","stringToBytes","str","Uint8Array","charCodeAt","string32","isLittleEndian","buffer8","view32","Uint32Array","buffer","isEvalSupported","Function","util_FeatureTest","isOffscreenCanvasSupported","OffscreenCanvas","isImageDecoderSupported","ImageDecoder","platform","navigator","userAgent","isAndroid","includes","isLinux","isMac","isWindows","isFirefox","isCSSRoundSupported","globalThis","CSS","supports","hexNumbers","Array","from","keys","n","toString","padStart","Util","makeHexColor","r","g","b","scaleMinMax","minMax","temp","m1","m2","applyTransform","p","m","pos","p0","p1","applyTransformToBezier","m0","m3","m4","m5","pI","pI1","applyInverseTransform","d","axialAlignedBoundingBox","rect","output","r0","r1","r2","r3","a0","a2","a1","a3","b0","b2","b1","b3","m1r0","m1r2","m2r1","m2r3","max","inverseTransform","singularValueDecompose2dScale","matrix","a","c","first","second","sqrt","normalizeRect","slice","intersect","rect1","rect2","xLow","xHigh","yLow","yHigh","pointBoundingBox","x","y","rectBoundingBox","x0","y0","x1","y1","getExtremumOnCurve","x2","x3","y2","y3","t","mt","tt","ttt","getExtremum","abs","delta","sqrtDelta","bezierBoundingBox","decodeURIComponent","escape","NormalizeRegex","NormalizationMap","normalizeUnicode","Map","replaceAll","_","p2","normalize","get","getUuid","crypto","randomUUID","buf","getRandomValues","AnnotationPrefix","_isValidExplicitDest","validRef","validName","dest","isArray","page","zoom","args","argsLen","allowNull","arg","MathClamp","v","toBase64Util","arr","toBase64","btoa","fromBase64Util","fromBase64","atob","Promise","try","fn","resolve","sumPrecise","numbers","reduce","SVG_NS","PixelsPerInch","static","PDF","async","fetchData","isValidFetchUrl","document","baseURI","response","fetch","ok","statusText","arrayBuffer","blob","json","text","reject","request","XMLHttpRequest","open","responseType","onreadystatechange","readyState","DONE","responseText","send","PageViewport","viewBox","userUnit","scale","rotation","offsetX","offsetY","dontFlip","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","width","height","rawDims","dims","pageWidth","pageHeight","pageX","pageY","clone","convertToViewportPoint","convertToViewportRectangle","topLeft","bottomRight","convertToPdfPoint","RenderingCancelledException","extraDelay","isDataScheme","ii","trim","substring","toLowerCase","isPdfFile","filename","test","getFilenameFromUrl","lastIndexOf","getPdfFilenameFromUrl","defaultFilename","reURI","reFilename","splitURI","exec","suggestedFilename","StatTimer","started","create","times","time","Date","now","timeEnd","start","end","outBuf","longest","padEnd","noContextMenu","e","preventDefault","stopEvent","stopPropagation","PDFDateString","toDateObject","input","regex","RegExp","matches","year","parseInt","month","day","hour","minute","universalTimeRelation","offsetHour","offsetMinute","UTC","getXfaPageViewport","xfaPage","attributes","style","getRGB","color","colorRGB","map","getColorValues","colors","span","createElement","visibility","colorScheme","body","append","computedColor","window","getComputedStyle","set","remove","getCurrentTransform","ctx","f","getTransform","getCurrentTransformInverse","invertSelf","setLayerDimensions","div","viewport","mustFlip","mustRotate","useRound","w","h","widthStr","heightStr","setAttribute","OutputScale","pixelRatio","sx","sy","scaled","symmetric","limitCanvas","maxPixels","maxDim","maxAreaScale","Infinity","maxWidthScale","maxHeightScale","maxScale","devicePixelRatio","SupportedImageMimeTypes","EditorToolbar","toolbar","colorPicker","editor","buttons","altText","signatureDescriptionButton","l10nRemove","freeze","freetext","highlight","ink","stamp","signature","render","editToolbar","classList","add","signal","_uiManager","_signal","addEventListener","pointerDown","className","position","toolbarPosition","direction","insetInlineEnd","top","addDeleteButton","focusIn","_focusEventsAllowed","focusOut","addListenersToElement","element","bind","capture","hide","hideDropdown","show","shown","editorType","button","tabIndex","delete","divider","addAltText","prepend","addColorPicker","renderButton","addEditSignatureButton","signatureManager","renderEditButton","updateEditSignatureButton","description","title","destroy","HighlightToolbar","uiManager","addHighlightButton","getLastPoint","boxes","isLTR","lastY","lastX","box","parent","highlightSelection","bindEvents","names","IdManager","id","ImageManager","baseId","cache","_isSVGFittingCanvas","svg","canvas","getContext","willReadFrequently","image","Image","src","promise","decode","then","drawImage","getImageData","data","key","rawData","bitmap","refCounter","isSvg","File","file","Blob","mustRemoveAspectRatioPromise","fileReader","FileReader","imageElement","imagePromise","onload","svgUrl","result","onerror","readAsDataURL","createImageBitmap","getFromFile","lastModified","size","getFromUrl","getFromBlob","blobPromise","getFromId","getFromCanvas","offscreen","transferToImageBitmap","getSvgUrl","deleteId","transferFromImageBitmap","convertToBlob","close","isValidId","CommandManager","commands","locked","maxSize","cmd","undo","post","mustExec","NaN","overwriteIfSameType","keepUndo","next","splice","redo","hasSomethingToUndo","hasSomethingToRedo","cleanType","KeyboardManager","callbacks","allKeys","Set","callback","isMacKey","at","serialize","event","altKey","ctrlKey","metaKey","shiftKey","self","has","bubbles","checker","ColorManager","_colors","convert","rgb","matchMedia","RGB","every","_colorsMapping","getHexCode","AnnotationEditorUIManager","abortController","AbortController","activeEditor","allEditors","allLayers","altTextManager","annotationStorage","changedExistingAnnotations","commandManager","copyPasteAC","currentDrawingSession","currentPageIndex","deletedAnnotationsElementIds","draggingEditors","editorTypes","editorsToRescale","_editorUndoBar","enableHighlightFloatingButton","enableUpdatedAddImage","enableNewAltTextWhenAddingImage","filterFactory","focusMainContainerTimeoutId","focusManagerAC","highlightColors","highlightWhenShiftUp","highlightToolbar","idManager","isEnabled","isWaiting","keyboardManagerAC","lastActiveElement","mainHighlightColorPicker","missingCanvases","mlManager","mode","selectedEditors","selectedTextNode","pageColors","showAllStates","previousStates","isEditing","isEmpty","hasSelectedEditor","hasSelectedText","translation","translationTimeoutId","container","viewer","updateModeCapability","_keyboardManager","proto","arrowChecker","contains","activeElement","tagName","hasSomethingToControl","textInputChecker","_self","target","el","HTMLInputElement","small","TRANSLATE_SMALL","big","TRANSLATE_BIG","selectAll","addNewEditorFromKeyboard","HTMLButtonElement","isEnterHandled","unselectAll","translateSelectedEditors","eventBus","pdfDocument","editorUndoBar","supportsPinchToZoom","_eventBus","_on","onEditingAction","onPageChanging","onScaleChanging","onRotationChanging","onSetPreference","evt","updateParams","addSelectionListener","addDragAndDropListeners","addKeyboardManager","viewParameters","realScale","PDF_TO_CSS_UNITS","isShiftKeyDown","_supportsPinchToZoom","abort","layer","values","clear","clearTimeout","combinedSignal","ac","AbortSignal","any","useNewAltTextFlow","useNewAltTextWhenAddingImage","hcmFilter","addHCMFilter","foreground","background","pair","highlightColorNames","reverse","setCurrentDrawingSession","disableUserSelect","setMainHighlightColorPicker","editAltText","firstTime","getSignature","switchToMode","on","once","dispatch","source","setPreference","pageNumber","focusMainContainer","focus","findParent","layerX","layerY","getBoundingClientRect","toggle","addShouldRescale","removeShouldRescale","commitOrRemove","pagesRotation","getAnchorElementForSelection","anchorNode","nodeType","Node","TEXT_NODE","parentElement","getLayerForTextLayer","textLayer","currentLayer","hasTextLayer","methodOfCreation","selection","getSelection","isCollapsed","anchorOffset","focusNode","focusOffset","anchorElement","closest","getSelectionBoxes","empty","isNoneMode","createAndAddNewEditor","showAllEditors","displayHighlightToolbar","addToAnnotationStorage","setValue","selectionChange","dispatchUpdateStates","activeLayer","toggleDrawing","pointerup","onSelectEnd","addFocusManager","blur","removeFocusManager","hasSelection","lastEditor","keydown","keyup","removeKeyboardManager","addCopyPasteListeners","copy","cut","paste","removeCopyPasteListeners","dragOver","drop","addEditListeners","removeEditListeners","dataTransfer","items","isHandlingMimeForPasting","dropEffect","item","editors","serialized","clipboardData","setData","JSON","stringify","getData","ex","newEditors","deserializedEditor","deserialize","addEditorToLayer","selectEditors","addCommands","isEditorHandlingKeyboard","hasChanged","entries","some","assign","dispatchUpdateUI","setEditingState","registerEditorTypes","types","defaultPropertiesToUpdate","getId","getLayer","pageIndex","addLayer","enable","disable","removeLayer","updateMode","editId","isFromKeyboard","withResolvers","disableAll","loadSignatures","enableAll","annotationElementId","setSelected","enterInEditMode","unselect","canCreateNewEmptyEditor","addNewEditor","updateToolbar","updateColor","action","updateDefaultParams","visible","updateButton","state","enableWaiting","mustWait","disableClick","enableClick","promises","all","getEditors","getEditor","addEditor","removeEditor","setTimeout","addDeletedAnnotationElement","addChangedExistingAnnotation","deleted","isDeletedAnnotationElement","removeDeletedAnnotationElement","removeChangedExistingAnnotation","addOrRebuild","setActiveEditor","propertiesToUpdate","lastSelectedEditor","ed","updateUI","updateUIForDefaultProperties","toggleSelected","select","isSelected","firstSelectedEditor","params","cleanUndoStack","drawingEditor","endDrawingSession","commit","noCommit","totalX","totalY","TIME_TO_WAIT","translateInPage","translationDone","setUpDragSession","savedX","savedY","savedPageIndex","newX","newY","newPageIndex","endDragSession","mustBeAddedInUndoStack","move","_setParentAndPosition","dragSelectedEditors","tx","ty","drag","rebuild","changeParent","getActive","shouldGetKeyboardEvents","isActive","getMode","imageManager","rangeCount","getRangeAt","commonAncestorContainer","parentWidth","parentHeight","rotator","getAttribute","range","collapsed","getClientRects","renderAnnotationElement","annotation","editorId","getRawValue","hasBeenModified","setMissingCanvas","annotationId","setCanvas","addMissingCanvas","AltText","altTextDecorative","altTextButton","altTextButtonLabel","altTextTooltip","altTextTooltipTimeout","altTextWasFromKeyBoard","badge","guessedText","textWithDisclaimer","l10nNewButton","added","review","initialize","l10n","_l10n","label","onClick","_reportTelemetry","setState","finish","focusVisible","hasData","setGuessedText","generatedAltText","toggleAltTextBadge","isForCopying","decorative","cancel","enabled","disabled","tooltip","DELAY_TO_SHOW_TOOLTIP","removeAttribute","textContent","parentNode","getElementForAltText","TouchManager","isPinching","isPinchingStopped","isPinchingDisabled","onPinchStart","onPinching","onPinchEnd","pointerDownAC","touchInfo","touchManagerAC","touchMoveAC","onTouchStart","passive","MIN_TOUCH_DISTANCE_TO_PINCH","touches","opts","cancelPointerDown","pointerType","opt","onTouchMove","onTouchEnd","touch0","touch1","identifier","touch0X","screenX","touch0Y","screenY","touch1X","touch1Y","screen0X","screen0Y","screen1X","screen1Y","pTouch0X","pTouch0Y","pTouch1X","pTouch1Y","prevGapX","prevGapY","currGapX","currGapY","distance","hypot","pDistance","origin","AnnotationEditor","accessibilityData","allResizerDivs","dragPointerId","dragPointerType","keepAspectRatio","resizersDiv","lastPointerCoords","savedDimensions","focusAC","focusedResizerName","hasBeenClicked","initialRect","isInEditMode","isResizerEnabledForKeyboard","moveInDOMTimeout","prevDragX","prevDragY","telemetryTimeouts","touchManager","_isCopy","_editToolbar","_initialOptions","_initialData","_isVisible","isDraggable","zIndex","_zIndex","_resizerKeyboardManager","resize","_resizeWithKeyboard","_stopResizingWithKeyboard","parameters","_willKeepAspectRatio","isCentered","_structTreeParentId","pageRotation","pageDimensions","pageTranslation","parentDimensions","isAttachedToDOM","getPrototypeOf","_type","isDrawer","_defaultLineColor","_colorManager","deleteAnnotationElement","fakeEditor","FakeEditor","getNextId","_l10nResizer","topMiddle","topRight","middleRight","bottomMiddle","bottomLeft","middleLeft","_borderLineWidth","documentElement","parseFloat","getPropertyValue","_value","mime","_isDraggable","center","parentRotation","fixAndSetPosition","setInBackground","setInForeground","setParent","stopResizing","focusin","focusout","relatedTarget","isMultipleSelection","setAt","screenToPageTranslation","_moveAfterPaste","baseX","baseY","_onTranslated","translate","_onTranslating","scrollIntoView","block","findNewParent","floor","bx","by","getBaseTranslation","left","toFixed","_hasBeenMoved","_hasBeenResized","_mustFixPosition","moveInDOM","rotatePoint","angle","pageTranslationToScreen","getRotationMatrix","parentScale","setDims","fixDims","widthPercent","endsWith","heightPercent","getInitialTranslation","createResizers","classes","resizerPointerdown","savedDraggable","togglePointerEvents","resizerPointermove","savedWidth","savedHeight","savedParentCursor","cursor","savedCursor","pointerUpCallback","addResizeToUndoStack","_onResized","newWidth","newHeight","_round","round","minWidth","MIN_SIZE","minHeight","rotationMatrix","transf","invRotationMatrix","invTransf","getPoint","getOpposite","isDiagonal","isHorizontal","point","oppositePoint","transfOppositePoint","oppositeX","oppositeY","ratioX","ratioY","deltaX","deltaY","fromKeyboard","lastScreenX","lastScreenY","oldDiag","_onResizing","altTextFinish","addEditToolbar","removeEditToolbar","addContainer","editToolbarDiv","before","getClientDimensions","addAltTextButton","altTextData","guessedAltText","setGuessedAltText","serializeAltText","hasAltText","hasAltTextData","defaultL10nId","addFocusListeners","maxWidth","maxHeight","isResizable","touchPinchStartCallback","touchPinchCallback","touchPinchEndCallback","_origin","prevDistance","slowDownFactor","factor","transfCenterPoint","newTransfCenterPoint","pointerdown","selectOnPointerEvent","hasDraggingStarted","cancelDrag","_onStopDragging","clientX","clientY","pointerId","_onStartDragging","isPrimary","moveEditorInDOM","getRect","shiftX","shiftY","getRectInCurrentCoords","onceAdded","enableEditMode","disableEditMode","needsToBeRebuilt","isOnScreen","bottom","right","innerHeight","innerWidth","rotate","_angle","serializeDeleted","popupRef","context","isCopy","timeout","makeResizable","children","boundResizerKeydown","resizerKeydown","boundResizerBlur","resizerBlur","resizerFocus","firstPosition","nextFirstPosition","firstChild","lastChild","child","setResizerTabIndex","stopImmediatePropagation","preventScroll","disableEditing","enableEditing","contentDiv","setAspectRatio","aspectRatio","telemetryInitialData","telemetryFinalData","_telemetryTimeout","content","querySelector","nodeName","resetAnnotationElement","SEED","MASK_HIGH","MASK_LOW","MurmurHash3_64","seed","h1","h2","update","ArrayBuffer","isView","byteLength","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","hexdigest","SerializableEmpty","transfer","AnnotationStorage","modified","modifiedIds","storage","onSetModified","onResetModified","onAnnotationEditor","getValue","defaultValue","resetModified","entry","val","setModified","print","PrintAnnotationStorage","serializable","hasBitmap","editorStats","stats","typeToEditor","counters","count","computeTelemetryFinalData","resetModifiedIds","ids","Symbol","iterator","structuredClone","FontLoader","systemFonts","ownerDocument","styleElement","_document","nativeFontFaces","loadingRequests","loadTestFontId","addNativeFontFace","nativeFontFace","fonts","removeNativeFontFace","insertRule","rule","getElementsByTagName","styleSheet","sheet","cssRules","loadSystemFont","systemFontInfo","disableFontFace","_inspectFont","loadedName","isFontLoadingAPISupported","fontFace","FontFace","load","baseFontName","font","attached","missingFile","createNativeFontFace","loaded","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","hasFonts","completeRequest","done","otherRequest","shift","complete","_loadTestFont","testFont","int32","offset","spliceString","s","insert","chunk1","chunk2","called","isFontReady","fillText","imageData","COMMENT_OFFSET","CFF_CHECKSUM_OFFSET","XXXX_VALUE","checksum","fontFamily","FontFaceObject","translatedData","inspectFont","compiledGlyphs","cssFontInfo","css","weight","fontWeight","italicAngle","mimetype","getPathGenerator","objs","character","objId","cmds","path","Path2D","fontExtraProperties","CallbackKind","DATA","ERROR","StreamKind","CANCEL","CANCEL_COMPLETE","CLOSE","ENQUEUE","PULL","PULL_COMPLETE","START_COMPLETE","onFn","wrapReason","MessageHandler","messageAC","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","onMessage","stream","processStreamMessage","capability","reason","postMessage","createStreamSink","actionName","handler","ah","transfers","sendWithPromise","sendWithStream","queueingStrategy","ReadableStream","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","cancelCapability","streamSink","enqueue","isCancelled","lastDesiredSize","sinkCapability","ready","error","onPull","onCancel","success","streamController","deleteStreamController","dataReason","allSettled","BaseCanvasFactory","enableHWA","_createCanvas","reset","canvasAndContext","DOMCanvasFactory","BaseCMapReaderFactory","isCompressed","_fetch","cMapData","catch","DOMCMapReaderFactory","BaseFilterFactory","addFilter","maps","fgColor","bgColor","addAlphaFilter","addLuminosityFilter","addHighlightHCMFilter","filterName","newFgColor","newBgColor","keepHCM","DOMFilterFactory","_cache","_defs","docId","_hcmCache","hcmCache","defs","contain","createElementNS","createTables","mapR","table","mapG","mapB","bufferR","bufferG","bufferB","createUrl","tableR","tableG","tableB","filter","createFilter","addTransferMapConversion","fgRGB","bgRGB","addGrayConversion","getSteps","tableA","addTransferMapAlphaConversion","addLuminosityConversion","fgGray","bgGray","newFgRGB","newBgRGB","fg","bg","step","newStart","newStep","prev","k","j","feColorMatrix","appendFeFunc","feComponentTransfer","func","feFunc","rTable","gTable","bTable","aTable","BaseStandardFontDataFactory","DOMStandardFontDataFactory","BaseWasmFactory","DOMWasmFactory","node_utils_fetchData","fs","getBuiltinModule","readFile","NodeFilterFactory","NodeCanvasFactory","require","createRequire","createCanvas","NodeCMapReaderFactory","NodeStandardFontDataFactory","NodeWasmFactory","PathType","SHADING","applyBoundingBox","bbox","region","BaseShadingPattern","isModifyingCurrentTransform","getPattern","RadialAxialShadingPattern","IR","_bbox","_colorStops","_p0","_p1","_r0","_r1","_createGradient","grad","createLinearGradient","createRadialGradient","colorStop","addColorStop","owner","inverse","pathType","pattern","ownerBBox","current","getClippedPathBoundingBox","ceil","tmpCanvas","cachedCanvases","getCanvas","tmpCtx","clearRect","beginPath","baseTransform","fillStyle","createPattern","domMatrix","DOMMatrix","setTransform","drawTriangle","p3","c1","c2","c3","coords","rowSize","tmp","scaleX","scaleY","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","maxY","xa","car","cag","cab","xb","cbr","cbg","cbb","x1_","x2_","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","MeshShadingPattern","_coords","_figures","_bounds","_background","_createMeshCanvas","combinedScale","backgroundColor","EXPECTED_SCALE","MAX_PATTERN_SIZE","BORDER_SIZE","boundsWidth","boundsHeight","paddedWidth","paddedHeight","createImageData","putImageData","Float32Array","matrixScaleX","matrixScaleY","temporaryPatternCanvas","DummyShadingPattern","getShadingPattern","PaintType","COLORED","UNCOLORED","TilingPattern","canvasGraphicsFactory","operatorList","xstep","ystep","paintType","tilingType","createPatternCanvas","combinedScaleX","combinedScaleY","canvasWidth","canvasHeight","redrawHorizontally","redrawVertically","xScaledStep","yScaledStep","xScaledWidth","yScaledHeight","dimx","getSizeAndScale","dimy","graphics","createCanvasGraphics","groupLevel","setFillAndStrokeStyleToContext","clipBbox","executeOperatorList","endDrawing","dimx2","dimy2","xSize","ySize","tmpCanvas2","tmpCtx2","jj","realOutputSize","bboxWidth","bboxHeight","strokeStyle","fillColor","strokeColor","cssColor","convertBlackAndWhiteToRGBA","srcPos","nonBlackColor","inverseDecode","black","zeroMapping","oneMapping","widthInSource","widthRemainder","srcLength","destPos","elem","MIN_FONT_SIZE","MAX_FONT_SIZE","EXECUTION_TIME","EXECUTION_STEPS","FULL_CHUNK_HEIGHT","SCALE_MATRIX","XY","MIN_MAX_INIT","mirrorContextOperations","destCtx","_removeMirroring","__originalSave","__originalRestore","__originalRotate","__originalScale","__originalTranslate","__originalTransform","__originalSetTransform","__originalResetTransform","resetTransform","__originalClip","__originalMoveTo","__originalLineTo","__originalBezierCurveTo","bezierCurveTo","__originalRect","__originalClosePath","__originalBeginPath","cp1x","cp1y","cp2x","cp2y","CachedCanvases","canvasFactory","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tlX","rTlX","tlY","rTlY","brX","rWidth","brY","rHeight","sign","CanvasExtraState","alphaIsShape","fontSize","fontSizeScale","textMatrix","textMatrixScale","fontMatrix","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRenderingMode","textRise","patternFill","patternStroke","fillAlpha","strokeAlpha","lineWidth","activeSMask","transferMaps","clipBox","getPathBoundingBox","xStrokePad","yStrokePad","updateClipFromPath","startNewPathAndClipBox","isEmptyClip","putBinaryImageData","imgData","ImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","thisChunkHeight","elemsInThisChunk","kind","dest32","dest32DataLength","fullSrcDiff","white","srcDiff","kEnd","kEndUnrolled","mask","srcByte","putBinaryImageMask","copyCtxState","sourceCtx","properties","property","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","getImageSmoothingEnabled","interpolate","actualScale","fround","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","CanvasGraphics","canvasCtx","commonObjs","optionalContentConfig","markedContentStack","annotationCanvasMap","stateStack","pendingClip","pendingEOFill","xobjs","groupStack","baseTransformStack","smaskStack","smaskCounter","tempSMask","suspendedCtx","contentVisible","cachedPatterns","viewportScale","outputScaleX","outputScaleY","_cachedScaleForStroking","_cachedGetSinglePixelWidth","_cachedBitmapsMap","getObject","fallback","beginDrawing","transparency","savedFillStyle","fillRect","transparentCanvas","compositeCtx","executionStartIdx","continueCallback","stepper","argsArray","fnArray","argsArrayLen","chunkOperations","endTime","steps","fnId","nextBreakPoint","breakIt","depObjId","objsPool","restoreInitialState","inSMaskMode","HTMLCanvasElement","drawFilter","hcmFilterId","savedFilter","_scaleImage","img","displayWidth","displayHeight","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","_createMaskCanvas","isPatternFill","currentTransform","cacheKey","maskCanvas","mainKey","cachedImage","maskToCanvas","minX","maxX","drawnWidth","drawnHeight","fillCanvas","fillCtx","imageSmoothingEnabled","limit","dashArray","dashPhase","intent","flatness","states","checkSMaskState","beginSMaskMode","endSMaskMode","cacheId","scratchCanvas","compose","dirtyBox","smask","composeSMask","layerCtx","layerBox","layerOffsetX","layerOffsetY","layerWidth","layerHeight","genericComposeSMask","subtype","backdrop","transferMap","maskCtx","maskOffsetX","maskOffsetY","maskX","maskY","backdropRGB","old","pop","op","path2d","consumePath","newPath","addPath","multiplySelf","rescaleAndStroke","needRestore","paths","pendingTextPaths","preMultiplySelf","spacing","fontRefName","fontObj","fontDirection","isType3Font","typeface","fallbackName","bold","italic","browserFontSize","rise","getScaledPath","paintChar","patternFillTransform","patternStrokeTransform","fillStrokeMode","isAddToPathSet","invPatternTransform","strokeText","isFontSubpixelAAEnabled","glyphs","showType3Text","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","getSinglePixelWidth","isInvalidPDFjsFont","chars","glyph","unicode","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","vmetric","vx","vy","remeasure","measuredWidth","measureText","characterScaleX","isInFont","scaledAccentX","scaledAccentY","charWidth","isTextInvisible","spacingLength","charProcOperatorList","operatorListId","xWidth","yWidth","llx","lly","urx","ury","getColorN_Pattern","_getPattern","arguments","inv","group","currentCtx","isolated","knockout","bounds","canvasBounds","groupCtx","startTransformInverse","currentMtx","hasOwnCanvas","annotationCanvas","savedCtx","skewX","skewY","positions","trans","images","applyTransferMapsToCanvas","applyTransferMapsToBitmap","imgToPaint","HTMLElement","tag","isVisible","isContentVisible","absDet","normX","normY","getScaleForStroking","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","GlobalWorkerOptions","workerPort","port","Worker","workerSrc","Metadata","parsedData","getRaw","INTERNAL","OptionalContentGroup","isDisplay","isPrint","userSet","renderingIntent","usage","rbGroups","view","viewState","printState","_setVisible","internal","OptionalContentConfig","cachedGetHash","groups","initialHash","order","creator","baseState","off","getHash","evaluateVisibilityExpression","array","operator","expression","policy","setVisibility","preserveRB","rbGroup","otherId","setOCGState","hasInitialVisibility","getOrder","getGroup","PDFDataTransportStream","pdfDataRangeTransport","disableRange","disableStream","initialData","progressiveDone","contentDispositionFilename","_queuedChunks","_progressiveDone","_contentDispositionFilename","_pdfDataRangeTransport","_isStreamingSupported","_isRangeSupported","_contentLength","_fullRequestReader","_rangeReaders","addRangeListener","begin","_onReceiveData","addProgressListener","total","_onProgress","addProgressiveReadListener","addProgressiveDoneListener","_onProgressiveDone","transportReady","_enqueue","found","rangeReader","_begin","_progressiveDataLength","_loaded","onProgress","_removeRangeReader","reader","indexOf","getFullReader","queuedChunks","PDFDataTransportStreamReader","getRangeReader","PDFDataTransportStreamRangeReader","requestDataRange","cancelAllRequests","_stream","_done","_filename","_requests","_headersReady","requestCapability","headersReady","isRangeSupported","isStreamingSupported","contentLength","read","_end","_queuedChunk","requestsCapability","getFilenameFromContentDispositionHeader","contentDisposition","needsEncodingFixup","toParamRegExp","rfc2616unquote","unescape","rfc5987decode","rfc2047decode","fixupEncoding","rfc2231getparam","attributePattern","flags","textdecode","encoding","decoder","TextDecoder","fatal","contentDispositionStr","iter","quot","part","parts","quotindex","extvalue","encodingend","langvalue","replace","charset","hex","createHeaders","isHttp","httpHeaders","headers","Headers","getResponseOrigin","validateRangeRequestCapabilities","responseHeaders","rangeChunkSize","returnValues","allowRangeRequests","suggestedLength","contentEncoding","extractFilenameFromHeader","createResponseError","validateResponseStatus","createFetchOptions","withCredentials","method","credentials","redirect","getArrayBuffer","PDFFetchStream","_responseOrigin","_rangeRequestReaders","PDFFetchStreamReader","PDFFetchStreamRangeReader","_reader","_withCredentials","_headersCapability","_disableRange","_rangeChunkSize","_abortController","getReader","_readCapability","responseOrigin","OK_RESPONSE","PARTIAL_CONTENT_RESPONSE","network_getArrayBuffer","xhr","NetworkManager","currXhrId","pendingRequests","xhrId","pendingRequest","setRequestHeader","expectedStatus","onError","onStateChange","onprogress","onHeadersReceived","onDone","xhrStatus","ok_response_on_range_request","rangeHeader","getResponseHeader","getRequestXhr","isPendingRequest","abortRequest","PDFNetworkStream","_source","_manager","_onRangeRequestReaderClosed","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","manager","_url","_fullRequestId","_onHeadersReceived","_onDone","_onError","_cachedChunks","_storedError","fullRequestXhrId","fullRequestXhr","responseURL","rawResponseHeaders","getAllResponseHeaders","trimStart","lengthComputable","_requestId","_close","urlRegex","parseUrlOrPath","sourceUrl","pathToFileURL","PDFNodeStream","PDFNodeStreamFsFullReader","PDFNodeStreamFsRangeReader","_readableStream","lstat","stat","_setReadableStream","createReadStream","_error","readableStream","MAX_TEXT_DIVS_TO_RENDER","DEFAULT_FONT_SIZE","TextLayer","disableProcessItems","fontInspectorEnabled","FontInspector","lang","layoutTextParams","rootContainer","styleCache","textContentItemsStr","textContentSource","textDivs","textDivProperties","WeakMap","ensureMinFontSizeComputed","finally","pendingTextLayers","fontFamilyMap","pump","styles","processItems","onBefore","getCtx","layout","abortEx","appendText","geom","textDiv","hasText","hasEOL","atan2","fontName","PI","fontSubstitution","fontHeight","fontAscent","getAscent","sin","cos","scaleFactorStr","divStyle","minFontSize","dir","dataset","fontSubstitutionLoadedName","shouldScaleText","absScaleX","absScaleY","br","ensureCtxFont","cleanup","ascentCache","canvasContexts","alpha","canvasCtxFonts","cached","opacity","lineHeight","cachedAscent","metrics","ascent","fontBoundingBoxAscent","descent","fontBoundingBoxDescent","ratio","XfaText","xfa","walk","node","shouldBuildText","DEFAULT_RANGE_CHUNK_SIZE","RENDERING_CANCELLED_TIMEOUT","getDocument","task","PDFDocumentLoadingTask","getUrlProp","getDataProp","password","rangeTransport","PDFDataRangeTransport","worker","PDFWorker","docBaseUrl","cMapUrl","getFactoryUrlProp","cMapPacked","CMapReaderFactory","iccUrl","standardFontDataUrl","StandardFontDataFactory","wasmUrl","WasmFactory","ignoreErrors","stopAtErrors","maxImageSize","chrome","canvasMaxAreaInBytes","enableXfa","disableAutoFetch","pdfBug","CanvasFactory","FilterFactory","useWasm","useSystemFonts","useWorkerFetch","transportFactory","cMapReaderFactory","standardFontDataFactory","wasmFactory","workerParams","fromPort","_worker","docParams","apiVersion","evaluatorOptions","transportParams","loadingParams","destroyed","workerIdPromise","messageHandler","networkStream","NetworkStream","Response","workerId","transport","WorkerTransport","_transport","_capability","location","Buffer","isNaN","isRefProxy","num","gen","isNameProxy","isValidExplicitDest","onPassword","_pendingDestroy","_rangeListeners","_progressListeners","_progressiveReadListeners","_progressiveDoneListeners","_readyCapability","listener","onDataRange","onDataProgress","onDataProgressiveRead","onDataProgressiveDone","PDFDocumentProxy","pdfInfo","_pdfInfo","numPages","fingerprints","isPureXfa","_htmlForXfa","allXfaHtml","getPage","getPageIndex","ref","getDestinations","getDestination","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","getJSActions","getDocJSActions","getOutline","getOptionalContentConfig","getRenderingIntent","getPermissions","getMetadata","getMarkInfo","saveDocument","getDownloadInfo","downloadInfoCapability","keepLoadedFonts","startCleanup","loadingTask","cachedPageNumber","getFieldObjects","hasJSActions","getCalculationOrderIds","PDFPageProxy","pendingCleanup","pageInfo","_pageIndex","_pageInfo","_stats","_pdfBug","PDFObjects","_intentStates","getViewport","getAnnotations","getPageJSActions","getXfa","canvasContext","annotationMode","optionalContentConfigPromise","printAnnotationStorage","intentArgs","intentState","streamReaderCancelTimeout","intentPrint","displayReadyCapability","lastChunk","separateAnnots","_pumpOperatorList","renderTasks","internalRenderTask","tryCleanup","_abortOperatorList","Stats","InternalRenderTask","useRequestAnimationFrame","renderTask","initializeGraphics","operatorListChanged","getOperatorList","opListReadCapability","opListTask","streamTextContent","includeMarkedContent","disableNormalization","TEXT_CONTENT_CHUNK_SIZE","highWaterMark","getTextContent","getStructTree","_destroy","waitOn","force","completed","resetStats","_startRenderPage","_renderPageChunk","operatorListChunk","annotationStorageSerializable","streamReader","delay","curCacheKey","curIntentState","LoopbackPort","listeners","deferred","call","rmAbort","aborted","onAbort","removeEventListener","terminate","isWorkerDisabled","_isSameOrigin","otherUrl","base","other","_createCDNWrapper","wrapper","createObjectURL","_port","_webWorker","_messageHandler","workerPorts","_initializeFromPort","_initialize","mainThreadWorkerMessageHandler","_setupFakeWorker","terminateEarly","sendTest","testObj","_setupFakeWorkerGlobal","WorkerMessageHandler","fakeWorkerId","workerHandler","setup","cachedPort","pdfjsWorker","loader","import","methodPromises","pageCache","pagePromises","pageRefCache","passwordCapability","factory","fontLoader","_params","destroyCapability","_networkStream","_fullReader","_lastProgress","setupMessageHandler","cacheSimpleMethod","cachedPromise","isOpList","modifiedIdsHash","cacheKeyBuf","hasOwnProperty","terminated","sink","readyReason","_numPages","htmlForXfa","updatePassword","err","exportedData","exportedError","fontAdded","imageRef","pageProxy","dataLen","refStr","results","metadata","cleanupSuccessful","INITIAL_DATA","ensureObj","RenderTask","onContinue","form","rAF","WeakSet","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_cancelBound","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_next","_canvas","canvasInUse","StepperManager","init","getNextBreakPoint","gfx","cancelAnimationFrame","updateOperatorList","requestAnimationFrame","version","build","makeColorComp","scaleAndClamp","ColorConverters","CMYK_G","G_CMYK","G_RGB","G_rgb","G_HTML","G","RGB_G","RGB_rgb","RGB_HTML","T_HTML","T_rgb","CMYK_RGB","CMYK_rgb","CMYK_HTML","components","RGB_CMYK","BaseSVGFactory","skipDimensions","_createSVG","DOMSVGFactory","XfaLayer","setupStorage","html","storedData","xfaOn","xfaOff","checked","option","selected","selectedIndex","setAttributes","linkService","isHTMLAnchorElement","HTMLAnchorElement","addLinkAttributes","newWindow","dataId","root","xfaHtml","rootHtml","isNotForRichText","rootDiv","createTextNode","stack","childHtml","xmlns","querySelectorAll","hidden","DEFAULT_TAB_INDEX","annotation_layer_DEFAULT_FONT_SIZE","GetElementsByNameSet","AnnotationElementFactory","annotationType","LinkAnnotationElement","TextAnnotationElement","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","SignatureWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","FreeTextAnnotationElement","LineAnnotationElement","SquareAnnotationElement","CircleAnnotationElement","PolylineAnnotationElement","CaretAnnotationElement","InkAnnotationElement","PolygonAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","StampAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","updates","hasBorder","popupElement","isRenderable","ignoreBorder","createQuadrilaterals","downloadManager","imageResourcesPath","renderForms","svgFactory","enableScripting","_fieldObjects","fieldObjects","_createContainer","_createQuadrilaterals","_hasPopupData","titleObj","contentsObj","richText","_isEditable","isEditable","hasPopupData","updateEdited","setRectEdited","popup","resetEdited","currentRect","setRotation","alternativeText","noRotate","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","borderBottomStyle","borderColor","_commonActions","setColor","jsName","styleName","detail","colorType","colorArray","display","noView","noPrint","userName","readonly","required","_setRequired","textColor","_dispatchEventFromSandbox","actions","jsEvent","commonActions","_setDefaultPropertiesFromJS","eventProxy","quadPoints","rectBlX","rectBlY","rectTrX","rectTrY","trX","trY","blX","blY","svgBuffer","clipPath","rectWidth","rectHeight","backgroundImage","_createPopup","modificationDate","parentRect","elements","_getElementsByName","skipId","fields","fieldObj","exportValues","exportValue","domElement","getElementsByName","maybeShow","forceHide","getElementsToTriggerPopup","addHighlightArea","triggers","_editOnDoubleClick","annotationEditorType","isTooltipOnly","link","isBound","_bindNamedAction","attachment","bindAttachment","attachmentDest","bindSetOCGState","_bindLink","Action","_bindJSAction","resetForm","_bindResetFormAction","setInternalLink","destination","getDestinationHash","onclick","goToDestination","getAnchorUrl","executeNamedAction","openOrDownloadData","executeSetOCGState","otherClickAction","resetFormFields","refs","resetFormRefs","include","allFields","fieldIds","fieldName","field","allIds","dispatchEvent","Event","showElementAndHideCanvas","previousSibling","_getKeyModifier","_setEventListener","elementData","baseName","eventName","valueGetter","modifier","focused","_setEventListeners","getter","Blur","Focus","_setBackgroundColor","_setTextStyle","TEXT_ALIGNMENT","fontColor","defaultAppearanceData","computedFontSize","roundToOneDecimal","multiLine","numberOfLines","textAlignment","textAlign","isRequired","hasAppearance","fieldValue","setPropertyOnSiblings","keyInStorage","maxLen","charLimit","fieldFormattedValues","formattedValue","comb","userValue","lastCommittedValue","commitKey","doNotScroll","overflowY","overflowX","readOnly","maxLength","defaultFieldValue","blurListener","scrollLeft","selRange","setSelectionRange","willCommit","selStart","selectionStart","selEnd","selectionEnd","_blurListener","Keystroke","inputType","change","fieldWidth","combWidth","letterSpacing","verticalAlign","checkbox","curChecked","buttonValue","radio","pdfButtonValue","linkElement","selectElement","addAnEmptyEntry","combo","multiSelect","multiple","optionElement","displayValue","removeEmptyEntry","noneOptionElement","isExport","selectedValues","getItems","multipleSelection","index","findIndex","selectChild","indices","editable","changeEx","keyDown","PopupElement","elementIds","ariaHasPopup","boundKeyDown","boundHide","boundShow","boundToggle","dateObj","pinned","wasVisible","trigger","flatMap","baseColor","outlineColor","header","valueOf","contents","_formatContents","makePopupContent","popupLines","popupContent","lineAttributes","line","lines","setPosition","useParentRect","normalizedRect","HORIZONTAL_SPACE_AFTER_ANNOTATION","popupLeft","popupTop","textPosition","lineSpan","lineCoordinates","square","circle","polyline","containerClassName","svgElementName","vertices","points","polylinesGroupElement","polylines","it","inkLists","thickness","download","AnnotationLayer","accessibilityManager","editableAnnotations","structTreeLayer","annotationEditorUIManager","_annotationEditorUIManager","hasEditableAnnotations","appendElement","contentElement","ariaAttributes","getAriaAttributes","moveElementInDOM","annotations","popupToElements","elementParams","noHTML","isPopupAnnotation","rendered","setAnnotationCanvasMap","addLinkAnnotations","_defaultBorderStyle","replaceWith","after","editableAnnotation","_hasNoCanvas","getEditableAnnotations","getEditableAnnotation","rawWidth","EOL_PATTERN","FreeTextEditor","editorDivId","editModeAC","_translateEmpty","_defaultColor","_defaultFontSize","_internalPadding","updateFontSize","setFontsize","editorDiv","setEditorDimensions","savedFontsize","col","savedColor","overlayDiv","contentEditable","editorDivKeydown","editorDivFocus","editorDivBlur","editorDivInput","editorDivPaste","innerText","extractText","prevChild","childNodes","getNodeContent","savedDisplay","savedVisibility","savedText","newText","trimEnd","setText","setContent","dblclick","posX","posY","nodeValue","deserializeContent","deleteFromDocument","insertNode","collapseToStart","startContainer","startOffset","bufferBefore","bufferAfter","newRange","Range","beforeLength","setStart","setEnd","removeAllRanges","addRange","replaceChildren","serializeContent","padding","structTreeParentId","hasElementChanged","Outline","toSVGPath","_rotation","_rescale","_rescaleAndSwap","_translate","svgRound","_normalizePoint","_normalizePagePoint","createBezierPoints","FreeDrawOutliner","innerMargin","last","min_dist","scaleFactor","MIN_DIST","MIN_DIFF","MIN","getLastCoords","lastTop","lastBottom","diffX","diffY","diffD","K","nX","nY","thX","thY","toSVGPathTwoPoints","toSVGPathEnd","toSVGPathStart","lastTopX","lastTopY","lastBottomX","lastBottomY","newFreeDrawOutline","outline","FreeDrawOutline","getOutlines","getOutlineTwoPoints","N","getOutlineEnd","getOutlineStart","lastPoint","computeMinMax","lastPointX","lastPointY","ltrCallback","newOutliner","getNewOutline","outliner","HighlightOutliner","verticalEdges","intervals","EPSILON","shiftedMinX","shiftedMinY","lastEdge","edge","sort","outlineVerticalEdges","breakEdge","edges","allEdges","edge1","edge2","outlines","HighlightOutline","binarySearch","middle","y4","polygon","prevX","prevY","classNamesForOutlining","FreeHighlightOutliner","FreeHighlightOutline","ColorPicker","buttonSwatch","defaultColor","dropdown","dropdownWasFromKeyboard","isMainColorPicker","openDropdownAC","_hideDropdownFromKeyboard","_colorSelectFromKeyboard","_moveToNext","_moveToPrevious","_moveToBeginning","_moveToEnd","l10nColor","blue","green","pink","red","yellow","openDropdown","swatch","renderMainDropdown","getDropdownRoot","role","colorSelect","isDropdownVisible","nextSibling","HighlightEditor","clipPathId","focusOutlines","highlightDiv","highlightOutlines","isFreeHighlight","outlineId","_moveCaret","_defaultThickness","_defaultOpacity","highlightId","createFreeOutlines","addToDrawLayer","createOutlines","numberOfColors","outlinerForOutline","extraThickness","drawLayer","finalizeDraw","drawOutline","rootClass","highlightOutline","free","updateProperties","rotateBbox","updateThickness","setColorAndOpacity","opa","savedOpacity","savedThickness","setThickness","th","changeThickness","getRotation","addUndoableEditor","cleanDrawLayer","mustBeSelected","draw","pointerover","hovered","pointerleave","setCaret","serializeBoxes","serializeOutlines","startHighlighting","endHighlight","highlightMove","_freeHighlight","_freeHighlightId","_freeHighlightClipId","DrawingOptions","svgProperties","updateProperty","updateSVGProperty","toSVGProperties","updateAll","DrawingEditor","drawOutlines","mustBeCommitted","_drawId","_addOutlines","createDrawOutlines","drawId","drawingOptions","_drawingOptions","defaultProperties","createDrawing","updateBbox","_mergeSVGProperties","defaultSVGProperties","p1Keys","getDefaultDrawingOptions","_options","typesMap","supportMultipleDrawings","propertyName","_defaultDrawingOptions","_currentParent","currentDraw","_currentDrawId","_updateProperty","savedValue","setter","getPathResizingSVGProperties","convertToDrawSpace","rotateBox","getPathResizedSVGProperties","_x","_y","getPathTranslatedSVGProperties","moving","updateParent","convertToParentSpace","pW","pH","updateRotation","updateParentDimensions","onScaleChangingWhenDrawing","drawDiv","createDrawerInstance","_parentWidth","_parentHeight","startDrawing","_isLTR","currentPointerType","currentDrawingAC","currentPointerId","_endDraw","currentPointerIds","isCancellable","removeLastElement","_drawMove","timeStamp","currentMoveTimestamp","startNew","currentDrawingOptions","_cleanup","lastElement","getLastElement","setLastElement","isAborted","_INNER_MARGIN","createDrawingOptions","_data","deserializeDraw","_pageX","_pageY","_pageWidth","_pageHeight","_innerWidth","serializeDraw","InkDrawOutliner","Float64Array","lastSVGPath","lastIndex","InkDrawOutline","normalizePoint","firstX","firstY","secondX","secondY","c1x","c1y","c2x","c2y","currentRotation","computeBbox","serializedLines","serializedPoints","getBBoxWithNoMargin","rescaleFn","newLines","len","getMarginComponents","margin","marginX","marginY","oldMarginX","oldMarginY","newMarginX","newMarginY","diffMarginX","diffMarginY","rotationTransform","PRECISION","s1x","s1y","s2x","s2y","newParentWidth","newParentHeight","InkDrawingOptions","viewerParameters","_viewParameters","InkEditor","ContourDrawOutline","BASE_HEADER_LENGTH","POINTS_PROPERTIES_NUMBER","SignatureExtractor","sigmaSFactor","sigmaR","kernelSize","neighborIndexToId","i0","j0","Int32Array","clockwiseNonZero","kk","shiftI","neighborIdToIndex","shiftJ","counterClockwiseNonZero","findContours","threshold","nbd","lnbd","contours","ij","pix","i2","j2","isHole","contour","contour0","i1","j1","i3","j3","i4","j4","ij3","douglasPeuckerHelper","ax","ay","abx","aby","dist","nabx","naby","aa","invS","phi","atan","cosPhi","sinPhi","tmax","poly","partialPhi","dmax","douglasPeucker","bilateralFilter","sigmaS","kernel","sigmaS2","halfSize","exp","rangeValues","sigmaR2","out","histogram","sum","norm","l","neighbour","getHistogram","toUint8","Uint8ClampedArray","A","guessThreshold","M","L","spos","getGrayPixels","originalBitmap","PARAMETERS","prevWidth","prevHeight","log2","isteps","grayImage","uint8Buf","extractContoursFromText","fontStyle","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","SCALE","contourList","processDrawnLines","curves","mustSmooth","areContours","linesAndPoints","xScale","yScale","newCurves","reducedPoints","newPoints","compressSignature","minDiff","maxDiff","outlinesLength","dx","bufferType","Int8Array","Int16Array","headerLength","BYTES_PER_ELEMENT","CompressionStream","writer","getWriter","write","BufferCtor","diffs","readable","decompressSignature","signatureData","DecompressionStream","numberOfDrawings","diffsOffset","SignatureOptions","DrawnSignatureOptions","SignatureEditor","isExtracted","signatureUUID","_defaultDrawnSignatureOptions","hasDescription","hasDescriptionStats","hasNoAltText","uuid","heightInPage","addSignature","setUuid","getSignaturePreview","outlineData","hasBeenSaved","getFromImage","getFromText","fontInfo","getDrawnSignature","isSignature","alt","StampEditor","bitmapId","bitmapPromise","bitmapUrl","bitmapFile","bitmapFileName","missingCanvas","resizeTimeoutId","hasBeenAddedInUndoStack","pasteEditor","getAsFile","hasAltTextStats","getBitmapFetched","fromId","getBitmapDone","alt_text_modal","alt_text_type","mlGuessAltText","updateAltTextData","isEnabledFor","copyCanvas","guess","channels","getBitmap","accept","files","click","drawBitmap","MAX_RATIO","maxDataDimension","maxPreviewDimension","bitmapWidth","bitmapHeight","outputScale","scaledWidth","scaledHeight","scaleBitmap","boxDim","boxDimWidth","boxDimHeight","patternCtx","dataWidth","dataHeight","offscreenCtx","serializeBitmap","toUrl","toDataURL","structParent","_structTree","changes","isSame","isSameAltText","stamps","area","prevData","isSamePageIndex","AnnotationEditorLayer","allowClick","annotationLayer","clickAC","editorFocusTimeoutId","hadPointerDown","isDisabling","isEnabling","drawingAC","focusedElement","textSelectionAC","_editorType","_initialized","isInvisible","disableTextSelection","toggleAnnotationLayerPointerEvents","enableTextSelection","annotationElementIds","editables","changedAnnotations","resetAnnotations","currentActive","textLayerPointerDown","attach","detach","removePointerInTextLayer","currentEditorType","createNewEditor","getCenterPoint","currentMode","startDrawingSession","pause","oldRotation","DrawLayer","mapping","toUpdate","_svgFactory","setBox","createSVG","createClipPath","pathId","clipPathUse","isPathUpdatable","hasClip","use","mustRemoveSelfIntersections","maskId","use1","use2","cloneNode","elementOrId","pathElement","pdfjsTestingUtils","pdfjsLib","FeatureTest","ImageKind","signitureBuilderCss","SignitureBuilder","fileUrl","pdfDoc","totalPages","selectedFieldType","pageDims","fieldsChanged","draggingField","dragOffsetX","dragOffsetY","fieldTypes","componentWillLoad","pdfjsLib.GlobalWorkerOptions","loadPdf","fileUrlChanged","pdfjsLib.getDocument","renderPages","shadowRoot","handleAddField","pageNum","pageContainer","currentTarget","def","find","newField","emit","startDrag","handleDrag","stopDrag","deleteField","Host","class","ft","active","onMouseDown"],"sources":["node_modules/pdfjs-dist/build/pdf.mjs","src/components/signiture-builder/signiture-builder.css?tag=signiture-builder&encapsulation=shadow","src/components/signiture-builder/signiture-builder.tsx"],"sourcesContent":["/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n\n\n;// ./src/shared/util.js\nconst isNodeJS = typeof process === \"object\" && process + \"\" === \"[object process]\" && !process.versions.nw && !(process.versions.electron && process.type && process.type !== \"browser\");\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  IS_EDITING: 0x80,\n  OPLIST: 0x100\n};\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3\n};\nconst AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  HIGHLIGHT: 9,\n  STAMP: 13,\n  INK: 15,\n  SIGNATURE: 101\n};\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23,\n  HIGHLIGHT_COLOR: 31,\n  HIGHLIGHT_DEFAULT_COLOR: 32,\n  HIGHLIGHT_THICKNESS: 33,\n  HIGHLIGHT_FREE: 34,\n  HIGHLIGHT_SHOW_ALL: 35,\n  DRAW_STEP: 41\n};\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800\n};\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4\n};\nconst util_ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3\n};\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26\n};\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\"\n};\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200\n};\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000\n};\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5\n};\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\"\n};\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\"\n};\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\"\n};\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5\n};\nconst OPS = {\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n  setStrokeTransparent: 92,\n  setFillTransparent: 93,\n  rawFillPath: 94\n};\nconst DrawOPS = {\n  moveTo: 0,\n  lineTo: 1,\n  curveTo: 2,\n  closePath: 3\n};\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2\n};\nlet verbosity = VerbosityLevel.WARNINGS;\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\nfunction getVerbosityLevel() {\n  return verbosity;\n}\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  if (options && typeof url === \"string\") {\n    if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n      const dots = url.match(/\\./g);\n      if (dots?.length >= 2) {\n        url = `http://${url}`;\n      }\n    }\n    if (options.tryConvertEncoding) {\n      try {\n        url = stringToUTF8String(url);\n      } catch {}\n    }\n  }\n  const absoluteUrl = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return _isValidProtocol(absoluteUrl) ? absoluteUrl : null;\n}\nfunction updateUrlHash(url, hash, allowRel = false) {\n  const res = URL.parse(url);\n  if (res) {\n    res.hash = hash;\n    return res.href;\n  }\n  if (allowRel && createValidAbsoluteUrl(url, \"http://example.com\")) {\n    return url.split(\"#\", 1)[0] + `${hash ? `#${hash}` : \"\"}`;\n  }\n  return \"\";\n}\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false\n  });\n  return value;\n}\nconst BaseException = function BaseExceptionClosure() {\n  function BaseException(message, name) {\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n  return BaseException;\n}();\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\nclass ResponseException extends BaseException {\n  constructor(msg, status, missing) {\n    super(msg, \"ResponseException\");\n    this.status = status;\n    this.missing = missing;\n  }\n}\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\nfunction bytesToString(bytes) {\n  if (typeof bytes !== \"object\" || bytes?.length === undefined) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\nfunction string32(value) {\n  return String.fromCharCode(value >> 24 & 0xff, value >> 16 & 0xff, value >> 8 & 0xff, value & 0xff);\n}\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\nfunction isEvalSupported() {\n  try {\n    new Function(\"\");\n    return true;\n  } catch {\n    return false;\n  }\n}\nclass util_FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n  static get isOffscreenCanvasSupported() {\n    return shadow(this, \"isOffscreenCanvasSupported\", typeof OffscreenCanvas !== \"undefined\");\n  }\n  static get isImageDecoderSupported() {\n    return shadow(this, \"isImageDecoderSupported\", typeof ImageDecoder !== \"undefined\");\n  }\n  static get platform() {\n    if (typeof navigator !== \"undefined\" && typeof navigator?.platform === \"string\" && typeof navigator?.userAgent === \"string\") {\n      const {\n        platform,\n        userAgent\n      } = navigator;\n      return shadow(this, \"platform\", {\n        isAndroid: userAgent.includes(\"Android\"),\n        isLinux: platform.includes(\"Linux\"),\n        isMac: platform.includes(\"Mac\"),\n        isWindows: platform.includes(\"Win\"),\n        isFirefox: userAgent.includes(\"Firefox\")\n      });\n    }\n    return shadow(this, \"platform\", {\n      isAndroid: false,\n      isLinux: false,\n      isMac: false,\n      isWindows: false,\n      isFirefox: false\n    });\n  }\n  static get isCSSRoundSupported() {\n    return shadow(this, \"isCSSRoundSupported\", globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\"));\n  }\n}\nconst hexNumbers = Array.from(Array(256).keys(), n => n.toString(16).padStart(2, \"0\"));\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[2] *= transform[0];\n      if (transform[3] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[1];\n      minMax[1] = temp;\n      temp = minMax[2];\n      minMax[2] = minMax[3];\n      minMax[3] = temp;\n      if (transform[1] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[1];\n      minMax[3] *= transform[1];\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[2] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[5];\n    minMax[2] += transform[4];\n    minMax[3] += transform[5];\n  }\n  static transform(m1, m2) {\n    return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];\n  }\n  static applyTransform(p, m, pos = 0) {\n    const p0 = p[pos];\n    const p1 = p[pos + 1];\n    p[pos] = p0 * m[0] + p1 * m[2] + m[4];\n    p[pos + 1] = p0 * m[1] + p1 * m[3] + m[5];\n  }\n  static applyTransformToBezier(p, transform, pos = 0) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    for (let i = 0; i < 6; i += 2) {\n      const pI = p[pos + i];\n      const pI1 = p[pos + i + 1];\n      p[pos + i] = pI * m0 + pI1 * m2 + m4;\n      p[pos + i + 1] = pI * m1 + pI1 * m3 + m5;\n    }\n  }\n  static applyInverseTransform(p, m) {\n    const p0 = p[0];\n    const p1 = p[1];\n    const d = m[0] * m[3] - m[1] * m[2];\n    p[0] = (p0 * m[3] - p1 * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    p[1] = (-p0 * m[1] + p1 * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n  }\n  static axialAlignedBoundingBox(rect, transform, output) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    const r0 = rect[0];\n    const r1 = rect[1];\n    const r2 = rect[2];\n    const r3 = rect[3];\n    let a0 = m0 * r0 + m4;\n    let a2 = a0;\n    let a1 = m0 * r2 + m4;\n    let a3 = a1;\n    let b0 = m3 * r1 + m5;\n    let b2 = b0;\n    let b1 = m3 * r3 + m5;\n    let b3 = b1;\n    if (m1 !== 0 || m2 !== 0) {\n      const m1r0 = m1 * r0;\n      const m1r2 = m1 * r2;\n      const m2r1 = m2 * r1;\n      const m2r3 = m2 * r3;\n      a0 += m2r1;\n      a3 += m2r1;\n      a1 += m2r3;\n      a2 += m2r3;\n      b0 += m1r0;\n      b3 += m1r0;\n      b1 += m1r2;\n      b2 += m1r2;\n    }\n    output[0] = Math.min(output[0], a0, a1, a2, a3);\n    output[1] = Math.min(output[1], b0, b1, b2, b3);\n    output[2] = Math.max(output[2], a0, a1, a2, a3);\n    output[3] = Math.max(output[3], b0, b1, b2, b3);\n  }\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n  }\n  static singularValueDecompose2dScale(matrix, output) {\n    const m0 = matrix[0];\n    const m1 = matrix[1];\n    const m2 = matrix[2];\n    const m3 = matrix[3];\n    const a = m0 ** 2 + m1 ** 2;\n    const b = m0 * m2 + m1 * m3;\n    const c = m2 ** 2 + m3 ** 2;\n    const first = (a + c) / 2;\n    const second = Math.sqrt(first ** 2 - (a * c - b ** 2));\n    output[0] = Math.sqrt(first + second || 1);\n    output[1] = Math.sqrt(first - second || 1);\n  }\n  static normalizeRect(rect) {\n    const r = rect.slice(0);\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(Math.min(rect1[0], rect1[2]), Math.min(rect2[0], rect2[2]));\n    const xHigh = Math.min(Math.max(rect1[0], rect1[2]), Math.max(rect2[0], rect2[2]));\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(Math.min(rect1[1], rect1[3]), Math.min(rect2[1], rect2[3]));\n    const yHigh = Math.min(Math.max(rect1[1], rect1[3]), Math.max(rect2[1], rect2[3]));\n    if (yLow > yHigh) {\n      return null;\n    }\n    return [xLow, yLow, xHigh, yHigh];\n  }\n  static pointBoundingBox(x, y, minMax) {\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static rectBoundingBox(x0, y0, x1, y1, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x1);\n    minMax[1] = Math.min(minMax[1], y0, y1);\n    minMax[2] = Math.max(minMax[2], x0, x1);\n    minMax[3] = Math.max(minMax[3], y0, y1);\n  }\n  static #getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, t, minMax) {\n    if (t <= 0 || t >= 1) {\n      return;\n    }\n    const mt = 1 - t;\n    const tt = t * t;\n    const ttt = tt * t;\n    const x = mt * (mt * (mt * x0 + 3 * t * x1) + 3 * tt * x2) + ttt * x3;\n    const y = mt * (mt * (mt * y0 + 3 * t * y1) + 3 * tt * y2) + ttt * y3;\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static #getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, a, b, c, minMax) {\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) >= 1e-12) {\n        this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, -c / b, minMax);\n      }\n      return;\n    }\n    const delta = b ** 2 - 4 * c * a;\n    if (delta < 0) {\n      return;\n    }\n    const sqrtDelta = Math.sqrt(delta);\n    const a2 = 2 * a;\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b + sqrtDelta) / a2, minMax);\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b - sqrtDelta) / a2, minMax);\n  }\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x3);\n    minMax[1] = Math.min(minMax[1], y0, y3);\n    minMax[2] = Math.max(minMax[2], x0, x3);\n    minMax[3] = Math.max(minMax[3], y0, y3);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-x0 + 3 * (x1 - x2) + x3), 6 * (x0 - 2 * x1 + x2), 3 * (x1 - x0), minMax);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-y0 + 3 * (y1 - y2) + y3), 6 * (y0 - 2 * y1 + y2), 3 * (y1 - y0), minMax);\n  }\n}\nconst PDFStringTranslateTable = (/* unused pure expression or super */ null && ([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8, 0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192, 0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018, 0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d, 0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac]));\nfunction stringToPDFString(str) {\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(str);\n        const decoded = decoder.decode(buffer);\n        if (!decoded.includes(\"\\x1b\")) {\n          return decoded;\n        }\n        return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, \"\");\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const charCode = str.charCodeAt(i);\n    if (charCode === 0x1b) {\n      while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n      continue;\n    }\n    const code = PDFStringTranslateTable[charCode];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getModificationDate(date = new Date()) {\n  const buffer = [date.getUTCFullYear().toString(), (date.getUTCMonth() + 1).toString().padStart(2, \"0\"), date.getUTCDate().toString().padStart(2, \"0\"), date.getUTCHours().toString().padStart(2, \"0\"), date.getUTCMinutes().toString().padStart(2, \"0\"), date.getUTCSeconds().toString().padStart(2, \"0\")];\n  return buffer.join(\"\");\n}\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    NormalizeRegex = /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([[\"ﬅ\", \"ſt\"]]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) => p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2));\n}\nfunction getUuid() {\n  if (typeof crypto.randomUUID === \"function\") {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  crypto.getRandomValues(buf);\n  return bytesToString(buf);\n}\nconst AnnotationPrefix = \"pdfjs_internal_id_\";\nfunction _isValidExplicitDest(validRef, validName, dest) {\n  if (!Array.isArray(dest) || dest.length < 2) {\n    return false;\n  }\n  const [page, zoom, ...args] = dest;\n  if (!validRef(page) && !Number.isInteger(page)) {\n    return false;\n  }\n  if (!validName(zoom)) {\n    return false;\n  }\n  const argsLen = args.length;\n  let allowNull = true;\n  switch (zoom.name) {\n    case \"XYZ\":\n      if (argsLen < 2 || argsLen > 3) {\n        return false;\n      }\n      break;\n    case \"Fit\":\n    case \"FitB\":\n      return argsLen === 0;\n    case \"FitH\":\n    case \"FitBH\":\n    case \"FitV\":\n    case \"FitBV\":\n      if (argsLen > 1) {\n        return false;\n      }\n      break;\n    case \"FitR\":\n      if (argsLen !== 4) {\n        return false;\n      }\n      allowNull = false;\n      break;\n    default:\n      return false;\n  }\n  for (const arg of args) {\n    if (typeof arg === \"number\" || allowNull && arg === null) {\n      continue;\n    }\n    return false;\n  }\n  return true;\n}\nfunction MathClamp(v, min, max) {\n  return Math.min(Math.max(v, min), max);\n}\nfunction toHexUtil(arr) {\n  if (Uint8Array.prototype.toHex) {\n    return arr.toHex();\n  }\n  return Array.from(arr, num => hexNumbers[num]).join(\"\");\n}\nfunction toBase64Util(arr) {\n  if (Uint8Array.prototype.toBase64) {\n    return arr.toBase64();\n  }\n  return btoa(bytesToString(arr));\n}\nfunction fromBase64Util(str) {\n  if (Uint8Array.fromBase64) {\n    return Uint8Array.fromBase64(str);\n  }\n  return stringToBytes(atob(str));\n}\nif (typeof Promise.try !== \"function\") {\n  Promise.try = function (fn, ...args) {\n    return new Promise(resolve => {\n      resolve(fn(...args));\n    });\n  };\n}\nif (typeof Math.sumPrecise !== \"function\") {\n  Math.sumPrecise = function (numbers) {\n    return numbers.reduce((a, b) => a + b, 0);\n  };\n}\n\n;// ./src/display/display_utils.js\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\nclass PixelsPerInch {\n  static CSS = 96.0;\n  static PDF = 72.0;\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\nasync function fetchData(url, type = \"text\") {\n  if (isValidFetchUrl(url, document.baseURI)) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    switch (type) {\n      case \"arraybuffer\":\n        return response.arrayBuffer();\n      case \"blob\":\n        return response.blob();\n      case \"json\":\n        return response.json();\n    }\n    return response.text();\n  }\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, true);\n    request.responseType = type;\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        switch (type) {\n          case \"arraybuffer\":\n          case \"blob\":\n          case \"json\":\n            resolve(request.response);\n            return;\n        }\n        resolve(request.responseText);\n        return;\n      }\n      reject(new Error(request.statusText));\n    };\n    request.send(null);\n  });\n}\nclass PageViewport {\n  constructor({\n    viewBox,\n    userUnit,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  }) {\n    this.viewBox = viewBox;\n    this.userUnit = userUnit;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    scale *= userUnit;\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\");\n    }\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    this.transform = [rotateA * scale, rotateB * scale, rotateC * scale, rotateD * scale, offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY, offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY];\n    this.width = width;\n    this.height = height;\n  }\n  get rawDims() {\n    const dims = this.viewBox;\n    return shadow(this, \"rawDims\", {\n      pageWidth: dims[2] - dims[0],\n      pageHeight: dims[3] - dims[1],\n      pageX: dims[0],\n      pageY: dims[1]\n    });\n  }\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  convertToViewportPoint(x, y) {\n    const p = [x, y];\n    Util.applyTransform(p, this.transform);\n    return p;\n  }\n  convertToViewportRectangle(rect) {\n    const topLeft = [rect[0], rect[1]];\n    Util.applyTransform(topLeft, this.transform);\n    const bottomRight = [rect[2], rect[3]];\n    Util.applyTransform(bottomRight, this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n  convertToPdfPoint(x, y) {\n    const p = [x, y];\n    Util.applyInverseTransform(p, this.transform);\n    return p;\n  }\n}\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, \"RenderingCancelledException\");\n    this.extraDelay = extraDelay;\n  }\n}\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\nfunction getFilenameFromUrl(url) {\n  [url] = url.split(/[#?]/, 1);\n  return url.substring(url.lastIndexOf(\"/\") + 1);\n}\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.includes(\"%\")) {\n      try {\n        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n      } catch {}\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\nclass StatTimer {\n  started = Object.create(null);\n  times = [];\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now()\n    });\n    delete this.started[name];\n  }\n  toString() {\n    const outBuf = [];\n    let longest = 0;\n    for (const {\n      name\n    } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const {\n      name,\n      start,\n      end\n    } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\nfunction isValidFetchUrl(url, baseUrl) {\n  const res = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return res?.protocol === \"http:\" || res?.protocol === \"https:\";\n}\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\nfunction stopEvent(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\nclass PDFDateString {\n  static #regex;\n  static toDateObject(input) {\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n    this.#regex ||= new RegExp(\"^D:\" + \"(\\\\d{4})\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"([Z|+|-])?\" + \"(\\\\d{2})?\" + \"'?\" + \"(\\\\d{2})?\" + \"'?\");\n    const matches = this.#regex.exec(input);\n    if (!matches) {\n      return null;\n    }\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\nfunction getXfaPageViewport(xfaPage, {\n  scale = 1,\n  rotation = 0\n}) {\n  const {\n    width,\n    height\n  } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n  return new PageViewport({\n    viewBox,\n    userUnit: 1,\n    scale,\n    rotation\n  });\n}\nfunction getRGB(color) {\n  if (color.startsWith(\"#\")) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [(colorRGB & 0xff0000) >> 16, (colorRGB & 0x00ff00) >> 8, colorRGB & 0x0000ff];\n  }\n  if (color.startsWith(\"rgb(\")) {\n    return color.slice(4, -1).split(\",\").map(x => parseInt(x));\n  }\n  if (color.startsWith(\"rgba(\")) {\n    return color.slice(5, -1).split(\",\").map(x => parseInt(x)).slice(0, 3);\n  }\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\nfunction getColorValues(colors) {\n  const span = document.createElement(\"span\");\n  span.style.visibility = \"hidden\";\n  span.style.colorScheme = \"only light\";\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\nfunction getCurrentTransform(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\nfunction getCurrentTransformInverse(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\nfunction setLayerDimensions(div, viewport, mustFlip = false, mustRotate = true) {\n  if (viewport instanceof PageViewport) {\n    const {\n      pageWidth,\n      pageHeight\n    } = viewport.rawDims;\n    const {\n      style\n    } = div;\n    const useRound = util_FeatureTest.isCSSRoundSupported;\n    const w = `var(--total-scale-factor) * ${pageWidth}px`,\n      h = `var(--total-scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound ? `round(down, ${w}, var(--scale-round-x))` : `calc(${w})`,\n      heightStr = useRound ? `round(down, ${h}, var(--scale-round-y))` : `calc(${h})`;\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n  if (mustRotate) {\n    div.setAttribute(\"data-main-rotation\", viewport.rotation);\n  }\n}\nclass OutputScale {\n  constructor() {\n    const {\n      pixelRatio\n    } = OutputScale;\n    this.sx = pixelRatio;\n    this.sy = pixelRatio;\n  }\n  get scaled() {\n    return this.sx !== 1 || this.sy !== 1;\n  }\n  get symmetric() {\n    return this.sx === this.sy;\n  }\n  limitCanvas(width, height, maxPixels, maxDim) {\n    let maxAreaScale = Infinity,\n      maxWidthScale = Infinity,\n      maxHeightScale = Infinity;\n    if (maxPixels > 0) {\n      maxAreaScale = Math.sqrt(maxPixels / (width * height));\n    }\n    if (maxDim !== -1) {\n      maxWidthScale = maxDim / width;\n      maxHeightScale = maxDim / height;\n    }\n    const maxScale = Math.min(maxAreaScale, maxWidthScale, maxHeightScale);\n    if (this.sx > maxScale || this.sy > maxScale) {\n      this.sx = maxScale;\n      this.sy = maxScale;\n      return true;\n    }\n    return false;\n  }\n  static get pixelRatio() {\n    return globalThis.devicePixelRatio || 1;\n  }\n}\nconst SupportedImageMimeTypes = [\"image/apng\", \"image/avif\", \"image/bmp\", \"image/gif\", \"image/jpeg\", \"image/png\", \"image/svg+xml\", \"image/webp\", \"image/x-icon\"];\n\n;// ./src/display/editor/toolbar.js\n\nclass EditorToolbar {\n  #toolbar = null;\n  #colorPicker = null;\n  #editor;\n  #buttons = null;\n  #altText = null;\n  #signatureDescriptionButton = null;\n  static #l10nRemove = null;\n  constructor(editor) {\n    this.#editor = editor;\n    EditorToolbar.#l10nRemove ||= Object.freeze({\n      freetext: \"pdfjs-editor-remove-freetext-button\",\n      highlight: \"pdfjs-editor-remove-highlight-button\",\n      ink: \"pdfjs-editor-remove-ink-button\",\n      stamp: \"pdfjs-editor-remove-stamp-button\",\n      signature: \"pdfjs-editor-remove-signature-button\"\n    });\n  }\n  render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.classList.add(\"editToolbar\", \"hidden\");\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    const signal = this.#editor._uiManager._signal;\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    editToolbar.addEventListener(\"pointerdown\", EditorToolbar.#pointerDown, {\n      signal\n    });\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    const position = this.#editor.toolbarPosition;\n    if (position) {\n      const {\n        style\n      } = editToolbar;\n      const x = this.#editor._uiManager.direction === \"ltr\" ? 1 - position[0] : position[0];\n      style.insetInlineEnd = `${100 * x}%`;\n      style.top = `calc(${100 * position[1]}% + var(--editor-toolbar-vert-offset))`;\n    }\n    this.#addDeleteButton();\n    return editToolbar;\n  }\n  get div() {\n    return this.#toolbar;\n  }\n  static #pointerDown(e) {\n    e.stopPropagation();\n  }\n  #focusIn(e) {\n    this.#editor._focusEventsAllowed = false;\n    stopEvent(e);\n  }\n  #focusOut(e) {\n    this.#editor._focusEventsAllowed = true;\n    stopEvent(e);\n  }\n  #addListenersToElement(element) {\n    const signal = this.#editor._uiManager._signal;\n    element.addEventListener(\"focusin\", this.#focusIn.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"focusout\", this.#focusOut.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n  }\n  hide() {\n    this.#toolbar.classList.add(\"hidden\");\n    this.#colorPicker?.hideDropdown();\n  }\n  show() {\n    this.#toolbar.classList.remove(\"hidden\");\n    this.#altText?.shown();\n  }\n  #addDeleteButton() {\n    const {\n      editorType,\n      _uiManager\n    } = this.#editor;\n    const button = document.createElement(\"button\");\n    button.className = \"delete\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", EditorToolbar.#l10nRemove[editorType]);\n    this.#addListenersToElement(button);\n    button.addEventListener(\"click\", e => {\n      _uiManager.delete();\n    }, {\n      signal: _uiManager._signal\n    });\n    this.#buttons.append(button);\n  }\n  get #divider() {\n    const divider = document.createElement(\"div\");\n    divider.className = \"divider\";\n    return divider;\n  }\n  async addAltText(altText) {\n    const button = await altText.render();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n    this.#altText = altText;\n  }\n  addColorPicker(colorPicker) {\n    this.#colorPicker = colorPicker;\n    const button = colorPicker.renderButton();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  async addEditSignatureButton(signatureManager) {\n    const button = this.#signatureDescriptionButton = await signatureManager.renderEditButton(this.#editor);\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  updateEditSignatureButton(description) {\n    if (this.#signatureDescriptionButton) {\n      this.#signatureDescriptionButton.title = description;\n    }\n  }\n  remove() {\n    this.#toolbar.remove();\n    this.#colorPicker?.destroy();\n    this.#colorPicker = null;\n  }\n}\nclass HighlightToolbar {\n  #buttons = null;\n  #toolbar = null;\n  #uiManager;\n  constructor(uiManager) {\n    this.#uiManager = uiManager;\n  }\n  #render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n      signal: this.#uiManager._signal\n    });\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    this.#addHighlightButton();\n    return editToolbar;\n  }\n  #getLastPoint(boxes, isLTR) {\n    let lastY = 0;\n    let lastX = 0;\n    for (const box of boxes) {\n      const y = box.y + box.height;\n      if (y < lastY) {\n        continue;\n      }\n      const x = box.x + (isLTR ? box.width : 0);\n      if (y > lastY) {\n        lastX = x;\n        lastY = y;\n        continue;\n      }\n      if (isLTR) {\n        if (x > lastX) {\n          lastX = x;\n        }\n      } else if (x < lastX) {\n        lastX = x;\n      }\n    }\n    return [isLTR ? 1 - lastX : lastX, lastY];\n  }\n  show(parent, boxes, isLTR) {\n    const [x, y] = this.#getLastPoint(boxes, isLTR);\n    const {\n      style\n    } = this.#toolbar ||= this.#render();\n    parent.append(this.#toolbar);\n    style.insetInlineEnd = `${100 * x}%`;\n    style.top = `calc(${100 * y}% + var(--editor-toolbar-vert-offset))`;\n  }\n  hide() {\n    this.#toolbar.remove();\n  }\n  #addHighlightButton() {\n    const button = document.createElement(\"button\");\n    button.className = \"highlightButton\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", `pdfjs-highlight-floating-button1`);\n    const span = document.createElement(\"span\");\n    button.append(span);\n    span.className = \"visuallyHidden\";\n    span.setAttribute(\"data-l10n-id\", \"pdfjs-highlight-floating-button-label\");\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    button.addEventListener(\"click\", () => {\n      this.#uiManager.highlightSelection(\"floating_button\");\n    }, {\n      signal\n    });\n    this.#buttons.append(button);\n  }\n}\n\n;// ./src/display/editor/tools.js\n\n\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\nclass IdManager {\n  #id = 0;\n  get id() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\nclass ImageManager {\n  #baseId = getUuid();\n  #id = 0;\n  #cache = null;\n  static get _isSVGFittingCanvas() {\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n    return shadow(this, \"_isSVGFittingCanvas\", promise);\n  }\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false\n      };\n      let image;\n      if (typeof rawData === \"string\") {\n        data.url = rawData;\n        image = await fetchData(rawData, \"blob\");\n      } else if (rawData instanceof File) {\n        image = data.file = rawData;\n      } else if (rawData instanceof Blob) {\n        image = rawData;\n      }\n      if (image.type === \"image/svg+xml\") {\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = data.svgUrl = fileReader.result;\n            imageElement.src = (await mustRemoveAspectRatioPromise) ? `${url}#svgView(preserveAspectRatio(none))` : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      warn(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n  async getFromFile(file) {\n    const {\n      lastModified,\n      name,\n      size,\n      type\n    } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n  async getFromBlob(id, blobPromise) {\n    const blob = await blobPromise;\n    return this.#get(id, blob);\n  }\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    if (data.blobPromise) {\n      const {\n        blobPromise\n      } = data;\n      delete data.blobPromise;\n      return this.getFromBlob(data.id, blobPromise);\n    }\n    return this.getFromUrl(data.url);\n  }\n  getFromCanvas(id, canvas) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(id);\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    const offscreen = new OffscreenCanvas(canvas.width, canvas.height);\n    const ctx = offscreen.getContext(\"2d\");\n    ctx.drawImage(canvas, 0, 0);\n    data = {\n      bitmap: offscreen.transferToImageBitmap(),\n      id: `image_${this.#baseId}_${this.#id++}`,\n      refCounter: 1,\n      isSvg: false\n    };\n    this.#cache.set(id, data);\n    this.#cache.set(data.id, data);\n    return data;\n  }\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    const {\n      bitmap\n    } = data;\n    if (!data.url && !data.file) {\n      const canvas = new OffscreenCanvas(bitmap.width, bitmap.height);\n      const ctx = canvas.getContext(\"bitmaprenderer\");\n      ctx.transferFromImageBitmap(bitmap);\n      data.blobPromise = canvas.convertToBlob();\n    }\n    bitmap.close?.();\n    data.bitmap = null;\n  }\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\nclass CommandManager {\n  #commands = [];\n  #locked = false;\n  #maxSize;\n  #position = -1;\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n  add({\n    cmd,\n    undo,\n    post,\n    mustExec,\n    type = NaN,\n    overwriteIfSameType = false,\n    keepUndo = false\n  }) {\n    if (mustExec) {\n      cmd();\n    }\n    if (this.#locked) {\n      return;\n    }\n    const save = {\n      cmd,\n      undo,\n      post,\n      type\n    };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n    this.#commands.push(save);\n  }\n  undo() {\n    if (this.#position === -1) {\n      return;\n    }\n    this.#locked = true;\n    const {\n      undo,\n      post\n    } = this.#commands[this.#position];\n    undo();\n    post?.();\n    this.#locked = false;\n    this.#position -= 1;\n  }\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n      this.#locked = true;\n      const {\n        cmd,\n        post\n      } = this.#commands[this.#position];\n      cmd();\n      post?.();\n      this.#locked = false;\n    }\n  }\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n  cleanType(type) {\n    if (this.#position === -1) {\n      return;\n    }\n    for (let i = this.#position; i >= 0; i--) {\n      if (this.#commands[i].type !== type) {\n        this.#commands.splice(i + 1, this.#position - i);\n        this.#position = i;\n        return;\n      }\n    }\n    this.#commands.length = 0;\n    this.#position = -1;\n  }\n  destroy() {\n    this.#commands = null;\n  }\n}\nclass KeyboardManager {\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith(\"mac+\");\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        }\n      }\n    }\n  }\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push(\"alt\");\n    }\n    if (event.ctrlKey) {\n      this.buffer.push(\"ctrl\");\n    }\n    if (event.metaKey) {\n      this.buffer.push(\"meta\");\n    }\n    if (event.shiftKey) {\n      this.buffer.push(\"shift\");\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join(\"+\");\n    this.buffer.length = 0;\n    return str;\n  }\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: {\n        bubbles = false,\n        args = [],\n        checker = null\n      }\n    } = info;\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args, event)();\n    if (!bubbles) {\n      stopEvent(event);\n    }\n  }\n}\nclass ColorManager {\n  static _colorsMapping = new Map([[\"CanvasText\", [0, 0, 0]], [\"Canvas\", [255, 255, 255]]]);\n  get _colors() {\n    const colors = new Map([[\"CanvasText\", null], [\"Canvas\", null]]);\n    getColorValues(colors);\n    return shadow(this, \"_colors\", colors);\n  }\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n      return rgb;\n    }\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\nclass AnnotationEditorUIManager {\n  #abortController = new AbortController();\n  #activeEditor = null;\n  #allEditors = new Map();\n  #allLayers = new Map();\n  #altTextManager = null;\n  #annotationStorage = null;\n  #changedExistingAnnotations = null;\n  #commandManager = new CommandManager();\n  #copyPasteAC = null;\n  #currentDrawingSession = null;\n  #currentPageIndex = 0;\n  #deletedAnnotationsElementIds = new Set();\n  #draggingEditors = null;\n  #editorTypes = null;\n  #editorsToRescale = new Set();\n  _editorUndoBar = null;\n  #enableHighlightFloatingButton = false;\n  #enableUpdatedAddImage = false;\n  #enableNewAltTextWhenAddingImage = false;\n  #filterFactory = null;\n  #focusMainContainerTimeoutId = null;\n  #focusManagerAC = null;\n  #highlightColors = null;\n  #highlightWhenShiftUp = false;\n  #highlightToolbar = null;\n  #idManager = new IdManager();\n  #isEnabled = false;\n  #isWaiting = false;\n  #keyboardManagerAC = null;\n  #lastActiveElement = null;\n  #mainHighlightColorPicker = null;\n  #missingCanvases = null;\n  #mlManager = null;\n  #mode = AnnotationEditorType.NONE;\n  #selectedEditors = new Set();\n  #selectedTextNode = null;\n  #signatureManager = null;\n  #pageColors = null;\n  #showAllStates = null;\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n    hasSelectedText: false\n  };\n  #translation = [0, 0];\n  #translationTimeoutId = null;\n  #container = null;\n  #viewer = null;\n  #updateModeCapability = null;\n  static TRANSLATE_SMALL = 1;\n  static TRANSLATE_BIG = 10;\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n    const arrowChecker = self => self.#container.contains(document.activeElement) && document.activeElement.tagName !== \"BUTTON\" && self.hasSomethingToControl();\n    const textInputChecker = (_self, {\n      target: el\n    }) => {\n      if (el instanceof HTMLInputElement) {\n        const {\n          type\n        } = el;\n        return type !== \"text\" && type !== \"number\";\n      }\n      return true;\n    };\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+a\", \"mac+meta+a\"], proto.selectAll, {\n      checker: textInputChecker\n    }], [[\"ctrl+z\", \"mac+meta+z\"], proto.undo, {\n      checker: textInputChecker\n    }], [[\"ctrl+y\", \"ctrl+shift+z\", \"mac+meta+shift+z\", \"ctrl+shift+Z\", \"mac+meta+shift+Z\"], proto.redo, {\n      checker: textInputChecker\n    }], [[\"Backspace\", \"alt+Backspace\", \"ctrl+Backspace\", \"shift+Backspace\", \"mac+Backspace\", \"mac+alt+Backspace\", \"mac+ctrl+Backspace\", \"Delete\", \"ctrl+Delete\", \"shift+Delete\", \"mac+Delete\"], proto.delete, {\n      checker: textInputChecker\n    }], [[\"Enter\", \"mac+Enter\"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(el) && !self.isEnterHandled\n    }], [[\" \", \"mac+ \"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(document.activeElement)\n    }], [[\"Escape\", \"mac+Escape\"], proto.unselectAll], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  constructor(container, viewer, altTextManager, signatureManager, eventBus, pdfDocument, pageColors, highlightColors, enableHighlightFloatingButton, enableUpdatedAddImage, enableNewAltTextWhenAddingImage, mlManager, editorUndoBar, supportsPinchToZoom) {\n    const signal = this._signal = this.#abortController.signal;\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#altTextManager = altTextManager;\n    this.#signatureManager = signatureManager;\n    this._eventBus = eventBus;\n    eventBus._on(\"editingaction\", this.onEditingAction.bind(this), {\n      signal\n    });\n    eventBus._on(\"pagechanging\", this.onPageChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"scalechanging\", this.onScaleChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"rotationchanging\", this.onRotationChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"setpreference\", this.onSetPreference.bind(this), {\n      signal\n    });\n    eventBus._on(\"switchannotationeditorparams\", evt => this.updateParams(evt.type, evt.value), {\n      signal\n    });\n    this.#addSelectionListener();\n    this.#addDragAndDropListeners();\n    this.#addKeyboardManager();\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.#highlightColors = highlightColors || null;\n    this.#enableHighlightFloatingButton = enableHighlightFloatingButton;\n    this.#enableUpdatedAddImage = enableUpdatedAddImage;\n    this.#enableNewAltTextWhenAddingImage = enableNewAltTextWhenAddingImage;\n    this.#mlManager = mlManager || null;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0\n    };\n    this.isShiftKeyDown = false;\n    this._editorUndoBar = editorUndoBar || null;\n    this._supportsPinchToZoom = supportsPinchToZoom !== false;\n  }\n  destroy() {\n    this.#updateModeCapability?.resolve();\n    this.#updateModeCapability = null;\n    this.#abortController?.abort();\n    this.#abortController = null;\n    this._signal = null;\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#missingCanvases?.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager?.destroy();\n    this.#signatureManager?.destroy();\n    this.#highlightToolbar?.hide();\n    this.#highlightToolbar = null;\n    this.#mainHighlightColorPicker?.destroy();\n    this.#mainHighlightColorPicker = null;\n    if (this.#focusMainContainerTimeoutId) {\n      clearTimeout(this.#focusMainContainerTimeoutId);\n      this.#focusMainContainerTimeoutId = null;\n    }\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n      this.#translationTimeoutId = null;\n    }\n    this._editorUndoBar?.destroy();\n  }\n  combinedSignal(ac) {\n    return AbortSignal.any([this._signal, ac.signal]);\n  }\n  get mlManager() {\n    return this.#mlManager;\n  }\n  get useNewAltTextFlow() {\n    return this.#enableUpdatedAddImage;\n  }\n  get useNewAltTextWhenAddingImage() {\n    return this.#enableNewAltTextWhenAddingImage;\n  }\n  get hcmFilter() {\n    return shadow(this, \"hcmFilter\", this.#pageColors ? this.#filterFactory.addHCMFilter(this.#pageColors.foreground, this.#pageColors.background) : \"none\");\n  }\n  get direction() {\n    return shadow(this, \"direction\", getComputedStyle(this.#container).direction);\n  }\n  get highlightColors() {\n    return shadow(this, \"highlightColors\", this.#highlightColors ? new Map(this.#highlightColors.split(\",\").map(pair => pair.split(\"=\").map(x => x.trim()))) : null);\n  }\n  get highlightColorNames() {\n    return shadow(this, \"highlightColorNames\", this.highlightColors ? new Map(Array.from(this.highlightColors, e => e.reverse())) : null);\n  }\n  setCurrentDrawingSession(layer) {\n    if (layer) {\n      this.unselectAll();\n      this.disableUserSelect(true);\n    } else {\n      this.disableUserSelect(false);\n    }\n    this.#currentDrawingSession = layer;\n  }\n  setMainHighlightColorPicker(colorPicker) {\n    this.#mainHighlightColorPicker = colorPicker;\n  }\n  editAltText(editor, firstTime = false) {\n    this.#altTextManager?.editAltText(this, editor, firstTime);\n  }\n  getSignature(editor) {\n    this.#signatureManager?.getSignature({\n      uiManager: this,\n      editor\n    });\n  }\n  get signatureManager() {\n    return this.#signatureManager;\n  }\n  switchToMode(mode, callback) {\n    this._eventBus.on(\"annotationeditormodechanged\", callback, {\n      once: true,\n      signal: this._signal\n    });\n    this._eventBus.dispatch(\"showannotationeditorui\", {\n      source: this,\n      mode\n    });\n  }\n  setPreference(name, value) {\n    this._eventBus.dispatch(\"setpreference\", {\n      source: this,\n      name,\n      value\n    });\n  }\n  onSetPreference({\n    name,\n    value\n  }) {\n    switch (name) {\n      case \"enableNewAltTextWhenAddingImage\":\n        this.#enableNewAltTextWhenAddingImage = value;\n        break;\n    }\n  }\n  onPageChanging({\n    pageNumber\n  }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n  focusMainContainer() {\n    this.#container.focus();\n  }\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const {\n        x: layerX,\n        y: layerY,\n        width,\n        height\n      } = layer.div.getBoundingClientRect();\n      if (x >= layerX && x <= layerX + width && y >= layerY && y <= layerY + height) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle(\"noUserSelect\", value);\n  }\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n  onScaleChanging({\n    scale\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n    this.#currentDrawingSession?.onScaleChanging();\n  }\n  onRotationChanging({\n    pagesRotation\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n  #getAnchorElementForSelection({\n    anchorNode\n  }) {\n    return anchorNode.nodeType === Node.TEXT_NODE ? anchorNode.parentElement : anchorNode;\n  }\n  #getLayerForTextLayer(textLayer) {\n    const {\n      currentLayer\n    } = this;\n    if (currentLayer.hasTextLayer(textLayer)) {\n      return currentLayer;\n    }\n    for (const layer of this.#allLayers.values()) {\n      if (layer.hasTextLayer(textLayer)) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  highlightSelection(methodOfCreation = \"\") {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const {\n      anchorNode,\n      anchorOffset,\n      focusNode,\n      focusOffset\n    } = selection;\n    const text = selection.toString();\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    selection.empty();\n    const layer = this.#getLayerForTextLayer(textLayer);\n    const isNoneMode = this.#mode === AnnotationEditorType.NONE;\n    const callback = () => {\n      layer?.createAndAddNewEditor({\n        x: 0,\n        y: 0\n      }, false, {\n        methodOfCreation,\n        boxes,\n        anchorNode,\n        anchorOffset,\n        focusNode,\n        focusOffset,\n        text\n      });\n      if (isNoneMode) {\n        this.showAllEditors(\"highlight\", true, true);\n      }\n    };\n    if (isNoneMode) {\n      this.switchToMode(AnnotationEditorType.HIGHLIGHT, callback);\n      return;\n    }\n    callback();\n  }\n  #displayHighlightToolbar() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    this.#highlightToolbar ||= new HighlightToolbar(this);\n    this.#highlightToolbar.show(textLayer, boxes, this.direction === \"ltr\");\n  }\n  addToAnnotationStorage(editor) {\n    if (!editor.isEmpty() && this.#annotationStorage && !this.#annotationStorage.has(editor.id)) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n  #selectionChange() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    const {\n      anchorNode\n    } = selection;\n    if (anchorNode === this.#selectedTextNode) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    if (!textLayer) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    this.#highlightToolbar?.hide();\n    this.#selectedTextNode = anchorNode;\n    this.#dispatchUpdateStates({\n      hasSelectedText: true\n    });\n    if (this.#mode !== AnnotationEditorType.HIGHLIGHT && this.#mode !== AnnotationEditorType.NONE) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.showAllEditors(\"highlight\", true, true);\n    }\n    this.#highlightWhenShiftUp = this.isShiftKeyDown;\n    if (!this.isShiftKeyDown) {\n      const activeLayer = this.#mode === AnnotationEditorType.HIGHLIGHT ? this.#getLayerForTextLayer(textLayer) : null;\n      activeLayer?.toggleDrawing();\n      const ac = new AbortController();\n      const signal = this.combinedSignal(ac);\n      const pointerup = e => {\n        if (e.type === \"pointerup\" && e.button !== 0) {\n          return;\n        }\n        ac.abort();\n        activeLayer?.toggleDrawing(true);\n        if (e.type === \"pointerup\") {\n          this.#onSelectEnd(\"main_toolbar\");\n        }\n      };\n      window.addEventListener(\"pointerup\", pointerup, {\n        signal\n      });\n      window.addEventListener(\"blur\", pointerup, {\n        signal\n      });\n    }\n  }\n  #onSelectEnd(methodOfCreation = \"\") {\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.highlightSelection(methodOfCreation);\n    } else if (this.#enableHighlightFloatingButton) {\n      this.#displayHighlightToolbar();\n    }\n  }\n  #addSelectionListener() {\n    document.addEventListener(\"selectionchange\", this.#selectionChange.bind(this), {\n      signal: this._signal\n    });\n  }\n  #addFocusManager() {\n    if (this.#focusManagerAC) {\n      return;\n    }\n    this.#focusManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#focusManagerAC);\n    window.addEventListener(\"focus\", this.focus.bind(this), {\n      signal\n    });\n    window.addEventListener(\"blur\", this.blur.bind(this), {\n      signal\n    });\n  }\n  #removeFocusManager() {\n    this.#focusManagerAC?.abort();\n    this.#focusManagerAC = null;\n  }\n  blur() {\n    this.isShiftKeyDown = false;\n    if (this.#highlightWhenShiftUp) {\n      this.#highlightWhenShiftUp = false;\n      this.#onSelectEnd(\"main_toolbar\");\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\"focusin\", () => {\n      lastEditor._focusEventsAllowed = true;\n    }, {\n      once: true,\n      signal: this._signal\n    });\n    lastActiveElement.focus();\n  }\n  #addKeyboardManager() {\n    if (this.#keyboardManagerAC) {\n      return;\n    }\n    this.#keyboardManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#keyboardManagerAC);\n    window.addEventListener(\"keydown\", this.keydown.bind(this), {\n      signal\n    });\n    window.addEventListener(\"keyup\", this.keyup.bind(this), {\n      signal\n    });\n  }\n  #removeKeyboardManager() {\n    this.#keyboardManagerAC?.abort();\n    this.#keyboardManagerAC = null;\n  }\n  #addCopyPasteListeners() {\n    if (this.#copyPasteAC) {\n      return;\n    }\n    this.#copyPasteAC = new AbortController();\n    const signal = this.combinedSignal(this.#copyPasteAC);\n    document.addEventListener(\"copy\", this.copy.bind(this), {\n      signal\n    });\n    document.addEventListener(\"cut\", this.cut.bind(this), {\n      signal\n    });\n    document.addEventListener(\"paste\", this.paste.bind(this), {\n      signal\n    });\n  }\n  #removeCopyPasteListeners() {\n    this.#copyPasteAC?.abort();\n    this.#copyPasteAC = null;\n  }\n  #addDragAndDropListeners() {\n    const signal = this._signal;\n    document.addEventListener(\"dragover\", this.dragOver.bind(this), {\n      signal\n    });\n    document.addEventListener(\"drop\", this.drop.bind(this), {\n      signal\n    });\n  }\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n  dragOver(event) {\n    for (const {\n      type\n    } of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(type)) {\n          event.dataTransfer.dropEffect = \"copy\";\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  drop(event) {\n    for (const item of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  copy(event) {\n    event.preventDefault();\n    this.#activeEditor?.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n    event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n  }\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n  async paste(event) {\n    event.preventDefault();\n    const {\n      clipboardData\n    } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n    let data = clipboardData.getData(\"application/pdfjs\");\n    if (!data) {\n      return;\n    }\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n    if (!Array.isArray(data)) {\n      return;\n    }\n    this.unselectAll();\n    const layer = this.currentLayer;\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = await layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({\n        cmd,\n        undo,\n        mustExec: true\n      });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n  keydown(event) {\n    if (!this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = true;\n    }\n    if (this.#mode !== AnnotationEditorType.NONE && !this.isEditorHandlingKeyboard) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n  keyup(event) {\n    if (this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = false;\n      if (this.#highlightWhenShiftUp) {\n        this.#highlightWhenShiftUp = false;\n        this.#onSelectEnd(\"main_toolbar\");\n      }\n    }\n  }\n  onEditingAction({\n    name\n  }) {\n    switch (name) {\n      case \"undo\":\n      case \"redo\":\n      case \"delete\":\n      case \"selectAll\":\n        this[name]();\n        break;\n      case \"highlightSelection\":\n        this.highlightSelection(\"context_menu\");\n        break;\n    }\n  }\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(([key, value]) => this.#previousStates[key] !== value);\n    if (hasChanged) {\n      this._eventBus.dispatch(\"annotationeditorstateschanged\", {\n        source: this,\n        details: Object.assign(this.#previousStates, details)\n      });\n      if (this.#mode === AnnotationEditorType.HIGHLIGHT && details.hasSelectedEditor === false) {\n        this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_FREE, true]]);\n      }\n    }\n  }\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch(\"annotationeditorparamschanged\", {\n      source: this,\n      details\n    });\n  }\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false\n      });\n      this.disableUserSelect(false);\n    }\n  }\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n  getId() {\n    return this.#idManager.id;\n  }\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n  async updateMode(mode, editId = null, isFromKeyboard = false) {\n    if (this.#mode === mode) {\n      return;\n    }\n    if (this.#updateModeCapability) {\n      await this.#updateModeCapability.promise;\n      if (!this.#updateModeCapability) {\n        return;\n      }\n    }\n    this.#updateModeCapability = Promise.withResolvers();\n    this.#currentDrawingSession?.commitOrRemove();\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n      this._editorUndoBar?.hide();\n      this.#updateModeCapability.resolve();\n      return;\n    }\n    if (mode === AnnotationEditorType.SIGNATURE) {\n      await this.#signatureManager?.loadSignatures();\n    }\n    this.setEditingState(true);\n    await this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (!editId) {\n      if (isFromKeyboard) {\n        this.addNewEditorFromKeyboard();\n      }\n      this.#updateModeCapability.resolve();\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      if (editor.annotationElementId === editId) {\n        this.setSelected(editor);\n        editor.enterInEditMode();\n      } else {\n        editor.unselect();\n      }\n    }\n    this.#updateModeCapability.resolve();\n  }\n  addNewEditorFromKeyboard() {\n    if (this.currentLayer.canCreateNewEmptyEditor()) {\n      this.currentLayer.addNewEditor();\n    }\n  }\n  updateToolbar(mode) {\n    if (mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch(\"switchannotationeditormode\", {\n      source: this,\n      mode\n    });\n  }\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n    switch (type) {\n      case AnnotationEditorParamsType.CREATE:\n        this.currentLayer.addNewEditor(value);\n        return;\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        this.#mainHighlightColorPicker?.updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:\n        this._eventBus.dispatch(\"reporttelemetry\", {\n          source: this,\n          details: {\n            type: \"editing\",\n            data: {\n              type: \"highlight\",\n              action: \"toggle_visibility\"\n            }\n          }\n        });\n        (this.#showAllStates ||= new Map()).set(type, value);\n        this.showAllEditors(\"highlight\", value);\n        break;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.updateParams(type, value);\n    }\n    for (const editorType of this.#editorTypes) {\n      editorType.updateDefaultParams(type, value);\n    }\n  }\n  showAllEditors(type, visible, updateButton = false) {\n    for (const editor of this.#allEditors.values()) {\n      if (editor.editorType === type) {\n        editor.show(visible);\n      }\n    }\n    const state = this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL) ?? true;\n    if (state !== visible) {\n      this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL, visible]]);\n    }\n  }\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle(\"waiting\", mustWait);\n    }\n  }\n  async #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      const promises = [];\n      for (const layer of this.#allLayers.values()) {\n        promises.push(layer.enable());\n      }\n      await Promise.all(promises);\n      for (const editor of this.#allEditors.values()) {\n        editor.enable();\n      }\n    }\n  }\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.disable();\n      }\n    }\n  }\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n  removeEditor(editor) {\n    if (editor.div.contains(document.activeElement)) {\n      if (this.#focusMainContainerTimeoutId) {\n        clearTimeout(this.#focusMainContainerTimeoutId);\n      }\n      this.#focusMainContainerTimeoutId = setTimeout(() => {\n        this.focusMainContainer();\n        this.#focusMainContainerTimeoutId = null;\n      }, 0);\n    }\n    this.#allEditors.delete(editor.id);\n    if (editor.annotationElementId) {\n      this.#missingCanvases?.delete(editor.annotationElementId);\n    }\n    this.unselect(editor);\n    if (!editor.annotationElementId || !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    this.addChangedExistingAnnotation(editor);\n    editor.deleted = true;\n  }\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    this.removeChangedExistingAnnotation(editor);\n    editor.deleted = false;\n  }\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n      this.addToAnnotationStorage(editor);\n    }\n  }\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  get #lastSelectedEditor() {\n    let ed = null;\n    for (ed of this.#selectedEditors) {}\n    return ed;\n  }\n  updateUI(editor) {\n    if (this.#lastSelectedEditor === editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  updateUIForDefaultProperties(editorType) {\n    this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n  }\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  setSelected(editor) {\n    this.#currentDrawingSession?.commitOrRemove();\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n  get firstSelectedEditor() {\n    return this.#selectedEditors.values().next().value;\n  }\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n  get isEnterHandled() {\n    return this.#selectedEditors.size === 1 && this.firstSelectedEditor.isEnterHandled;\n  }\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty()\n    });\n    this._editorUndoBar?.hide();\n  }\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty()\n    });\n  }\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty()\n    });\n  }\n  cleanUndoStack(type) {\n    this.#commandManager.cleanType(type);\n  }\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n    return false;\n  }\n  delete() {\n    this.commitOrRemove();\n    const drawingEditor = this.currentLayer?.endDrawingSession(true);\n    if (!this.hasSelection && !drawingEditor) {\n      return;\n    }\n    const editors = drawingEditor ? [drawingEditor] : [...this.#selectedEditors];\n    const cmd = () => {\n      this._editorUndoBar?.show(undo, editors.length === 1 ? editors[0].editorType : editors.length);\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true\n    });\n  }\n  commitOrRemove() {\n    this.#activeEditor?.commitOrRemove();\n  }\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n  #selectEditors(editors) {\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n  unselectAll() {\n    if (this.#activeEditor) {\n      this.#activeEditor.commitOrRemove();\n      if (this.#mode !== AnnotationEditorType.NONE) {\n        return;\n      }\n    }\n    if (this.#currentDrawingSession?.commitOrRemove()) {\n      return;\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false\n    });\n  }\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n    const TIME_TO_WAIT = 1000;\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        mustExec: false\n      });\n    }, TIME_TO_WAIT);\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n      editor.translationDone();\n    }\n  }\n  setUpDragSession() {\n    if (!this.hasSelection) {\n      return;\n    }\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1\n      });\n    }\n  }\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n    for (const [{\n      x,\n      y,\n      pageIndex\n    }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||= x !== value.savedX || y !== value.savedY || pageIndex !== value.savedPageIndex;\n    }\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, {\n          newX,\n          newY,\n          newPageIndex\n        }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, {\n          savedX,\n          savedY,\n          savedPageIndex\n        }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true\n    });\n    return true;\n  }\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n  get isEditorHandlingKeyboard() {\n    return this.getActive()?.shouldGetKeyboardEvents() || this.#selectedEditors.size === 1 && this.firstSelectedEditor.shouldGetKeyboardEvents();\n  }\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n  getActive() {\n    return this.#activeEditor;\n  }\n  getMode() {\n    return this.#mode;\n  }\n  get imageManager() {\n    return shadow(this, \"imageManager\", new ImageManager());\n  }\n  getSelectionBoxes(textLayer) {\n    if (!textLayer) {\n      return null;\n    }\n    const selection = document.getSelection();\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      if (!textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)) {\n        return null;\n      }\n    }\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    let rotator;\n    switch (textLayer.getAttribute(\"data-main-rotation\")) {\n      case \"90\":\n        rotator = (x, y, w, h) => ({\n          x: (y - layerY) / parentHeight,\n          y: 1 - (x + w - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      case \"180\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (x + w - layerX) / parentWidth,\n          y: 1 - (y + h - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n      case \"270\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (y + h - layerY) / parentHeight,\n          y: (x - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      default:\n        rotator = (x, y, w, h) => ({\n          x: (x - layerX) / parentWidth,\n          y: (y - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n    }\n    const boxes = [];\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      const range = selection.getRangeAt(i);\n      if (range.collapsed) {\n        continue;\n      }\n      for (const {\n        x,\n        y,\n        width,\n        height\n      } of range.getClientRects()) {\n        if (width === 0 || height === 0) {\n          continue;\n        }\n        boxes.push(rotator(x, y, width, height));\n      }\n    }\n    return boxes.length === 0 ? null : boxes;\n  }\n  addChangedExistingAnnotation({\n    annotationElementId,\n    id\n  }) {\n    (this.#changedExistingAnnotations ||= new Map()).set(annotationElementId, id);\n  }\n  removeChangedExistingAnnotation({\n    annotationElementId\n  }) {\n    this.#changedExistingAnnotations?.delete(annotationElementId);\n  }\n  renderAnnotationElement(annotation) {\n    const editorId = this.#changedExistingAnnotations?.get(annotation.data.id);\n    if (!editorId) {\n      return;\n    }\n    const editor = this.#annotationStorage.getRawValue(editorId);\n    if (!editor) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.NONE && !editor.hasBeenModified) {\n      return;\n    }\n    editor.renderAnnotationElement(annotation);\n  }\n  setMissingCanvas(annotationId, annotationElementId, canvas) {\n    const editor = this.#missingCanvases?.get(annotationId);\n    if (!editor) {\n      return;\n    }\n    editor.setCanvas(annotationElementId, canvas);\n    this.#missingCanvases.delete(annotationId);\n  }\n  addMissingCanvas(annotationId, editor) {\n    (this.#missingCanvases ||= new Map()).set(annotationId, editor);\n  }\n}\n\n;// ./src/display/editor/alt_text.js\n\nclass AltText {\n  #altText = null;\n  #altTextDecorative = false;\n  #altTextButton = null;\n  #altTextButtonLabel = null;\n  #altTextTooltip = null;\n  #altTextTooltipTimeout = null;\n  #altTextWasFromKeyBoard = false;\n  #badge = null;\n  #editor = null;\n  #guessedText = null;\n  #textWithDisclaimer = null;\n  #useNewAltTextFlow = false;\n  static #l10nNewButton = null;\n  static _l10n = null;\n  constructor(editor) {\n    this.#editor = editor;\n    this.#useNewAltTextFlow = editor._uiManager.useNewAltTextFlow;\n    AltText.#l10nNewButton ||= Object.freeze({\n      added: \"pdfjs-editor-new-alt-text-added-button\",\n      \"added-label\": \"pdfjs-editor-new-alt-text-added-button-label\",\n      missing: \"pdfjs-editor-new-alt-text-missing-button\",\n      \"missing-label\": \"pdfjs-editor-new-alt-text-missing-button-label\",\n      review: \"pdfjs-editor-new-alt-text-to-review-button\",\n      \"review-label\": \"pdfjs-editor-new-alt-text-to-review-button-label\"\n    });\n  }\n  static initialize(l10n) {\n    AltText._l10n ??= l10n;\n  }\n  async render() {\n    const altText = this.#altTextButton = document.createElement(\"button\");\n    altText.className = \"altText\";\n    altText.tabIndex = \"0\";\n    const label = this.#altTextButtonLabel = document.createElement(\"span\");\n    altText.append(label);\n    if (this.#useNewAltTextFlow) {\n      altText.classList.add(\"new\");\n      altText.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton.missing);\n      label.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[\"missing-label\"]);\n    } else {\n      altText.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button\");\n      label.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button-label\");\n    }\n    const signal = this.#editor._uiManager._signal;\n    altText.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    altText.addEventListener(\"pointerdown\", event => event.stopPropagation(), {\n      signal\n    });\n    const onClick = event => {\n      event.preventDefault();\n      this.#editor._uiManager.editAltText(this.#editor);\n      if (this.#useNewAltTextFlow) {\n        this.#editor._reportTelemetry({\n          action: \"pdfjs.image.alt_text.image_status_label_clicked\",\n          data: {\n            label: this.#label\n          }\n        });\n      }\n    };\n    altText.addEventListener(\"click\", onClick, {\n      capture: true,\n      signal\n    });\n    altText.addEventListener(\"keydown\", event => {\n      if (event.target === altText && event.key === \"Enter\") {\n        this.#altTextWasFromKeyBoard = true;\n        onClick(event);\n      }\n    }, {\n      signal\n    });\n    await this.#setState();\n    return altText;\n  }\n  get #label() {\n    return this.#altText && \"added\" || this.#altText === null && this.guessedText && \"review\" || \"missing\";\n  }\n  finish() {\n    if (!this.#altTextButton) {\n      return;\n    }\n    this.#altTextButton.focus({\n      focusVisible: this.#altTextWasFromKeyBoard\n    });\n    this.#altTextWasFromKeyBoard = false;\n  }\n  isEmpty() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText === null;\n    }\n    return !this.#altText && !this.#altTextDecorative;\n  }\n  hasData() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText !== null || !!this.#guessedText;\n    }\n    return this.isEmpty();\n  }\n  get guessedText() {\n    return this.#guessedText;\n  }\n  async setGuessedText(guessedText) {\n    if (this.#altText !== null) {\n      return;\n    }\n    this.#guessedText = guessedText;\n    this.#textWithDisclaimer = await AltText._l10n.get(\"pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer\", {\n      generatedAltText: guessedText\n    });\n    this.#setState();\n  }\n  toggleAltTextBadge(visibility = false) {\n    if (!this.#useNewAltTextFlow || this.#altText) {\n      this.#badge?.remove();\n      this.#badge = null;\n      return;\n    }\n    if (!this.#badge) {\n      const badge = this.#badge = document.createElement(\"div\");\n      badge.className = \"noAltTextBadge\";\n      this.#editor.div.append(badge);\n    }\n    this.#badge.classList.toggle(\"hidden\", !visibility);\n  }\n  serialize(isForCopying) {\n    let altText = this.#altText;\n    if (!isForCopying && this.#guessedText === altText) {\n      altText = this.#textWithDisclaimer;\n    }\n    return {\n      altText,\n      decorative: this.#altTextDecorative,\n      guessedText: this.#guessedText,\n      textWithDisclaimer: this.#textWithDisclaimer\n    };\n  }\n  get data() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative\n    };\n  }\n  set data({\n    altText,\n    decorative,\n    guessedText,\n    textWithDisclaimer,\n    cancel = false\n  }) {\n    if (guessedText) {\n      this.#guessedText = guessedText;\n      this.#textWithDisclaimer = textWithDisclaimer;\n    }\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    if (!cancel) {\n      this.#altText = altText;\n      this.#altTextDecorative = decorative;\n    }\n    this.#setState();\n  }\n  toggle(enabled = false) {\n    if (!this.#altTextButton) {\n      return;\n    }\n    if (!enabled && this.#altTextTooltipTimeout) {\n      clearTimeout(this.#altTextTooltipTimeout);\n      this.#altTextTooltipTimeout = null;\n    }\n    this.#altTextButton.disabled = !enabled;\n  }\n  shown() {\n    this.#editor._reportTelemetry({\n      action: \"pdfjs.image.alt_text.image_status_label_displayed\",\n      data: {\n        label: this.#label\n      }\n    });\n  }\n  destroy() {\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextButtonLabel = null;\n    this.#altTextTooltip = null;\n    this.#badge?.remove();\n    this.#badge = null;\n  }\n  async #setState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n    if (this.#useNewAltTextFlow) {\n      button.classList.toggle(\"done\", !!this.#altText);\n      button.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[this.#label]);\n      this.#altTextButtonLabel?.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[`${this.#label}-label`]);\n      if (!this.#altText) {\n        this.#altTextTooltip?.remove();\n        return;\n      }\n    } else {\n      if (!this.#altText && !this.#altTextDecorative) {\n        button.classList.remove(\"done\");\n        this.#altTextTooltip?.remove();\n        return;\n      }\n      button.classList.add(\"done\");\n      button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-edit-button\");\n    }\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement(\"span\");\n      tooltip.className = \"tooltip\";\n      tooltip.setAttribute(\"role\", \"tooltip\");\n      tooltip.id = `alt-text-tooltip-${this.#editor.id}`;\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      const signal = this.#editor._uiManager._signal;\n      signal.addEventListener(\"abort\", () => {\n        clearTimeout(this.#altTextTooltipTimeout);\n        this.#altTextTooltipTimeout = null;\n      }, {\n        once: true\n      });\n      button.addEventListener(\"mouseenter\", () => {\n        this.#altTextTooltipTimeout = setTimeout(() => {\n          this.#altTextTooltipTimeout = null;\n          this.#altTextTooltip.classList.add(\"show\");\n          this.#editor._reportTelemetry({\n            action: \"alt_text_tooltip\"\n          });\n        }, DELAY_TO_SHOW_TOOLTIP);\n      }, {\n        signal\n      });\n      button.addEventListener(\"mouseleave\", () => {\n        if (this.#altTextTooltipTimeout) {\n          clearTimeout(this.#altTextTooltipTimeout);\n          this.#altTextTooltipTimeout = null;\n        }\n        this.#altTextTooltip?.classList.remove(\"show\");\n      }, {\n        signal\n      });\n    }\n    if (this.#altTextDecorative) {\n      tooltip.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-decorative-tooltip\");\n    } else {\n      tooltip.removeAttribute(\"data-l10n-id\");\n      tooltip.textContent = this.#altText;\n    }\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n    const element = this.#editor.getElementForAltText();\n    element?.setAttribute(\"aria-describedby\", tooltip.id);\n  }\n}\n\n;// ./src/display/touch_manager.js\n\nclass TouchManager {\n  #container;\n  #isPinching = false;\n  #isPinchingStopped = null;\n  #isPinchingDisabled;\n  #onPinchStart;\n  #onPinching;\n  #onPinchEnd;\n  #pointerDownAC = null;\n  #signal;\n  #touchInfo = null;\n  #touchManagerAC;\n  #touchMoveAC = null;\n  constructor({\n    container,\n    isPinchingDisabled = null,\n    isPinchingStopped = null,\n    onPinchStart = null,\n    onPinching = null,\n    onPinchEnd = null,\n    signal\n  }) {\n    this.#container = container;\n    this.#isPinchingStopped = isPinchingStopped;\n    this.#isPinchingDisabled = isPinchingDisabled;\n    this.#onPinchStart = onPinchStart;\n    this.#onPinching = onPinching;\n    this.#onPinchEnd = onPinchEnd;\n    this.#touchManagerAC = new AbortController();\n    this.#signal = AbortSignal.any([signal, this.#touchManagerAC.signal]);\n    container.addEventListener(\"touchstart\", this.#onTouchStart.bind(this), {\n      passive: false,\n      signal: this.#signal\n    });\n  }\n  get MIN_TOUCH_DISTANCE_TO_PINCH() {\n    return 35 / OutputScale.pixelRatio;\n  }\n  #onTouchStart(evt) {\n    if (this.#isPinchingDisabled?.()) {\n      return;\n    }\n    if (evt.touches.length === 1) {\n      if (this.#pointerDownAC) {\n        return;\n      }\n      const pointerDownAC = this.#pointerDownAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, pointerDownAC.signal]);\n      const container = this.#container;\n      const opts = {\n        capture: true,\n        signal,\n        passive: false\n      };\n      const cancelPointerDown = e => {\n        if (e.pointerType === \"touch\") {\n          this.#pointerDownAC?.abort();\n          this.#pointerDownAC = null;\n        }\n      };\n      container.addEventListener(\"pointerdown\", e => {\n        if (e.pointerType === \"touch\") {\n          stopEvent(e);\n          cancelPointerDown(e);\n        }\n      }, opts);\n      container.addEventListener(\"pointerup\", cancelPointerDown, opts);\n      container.addEventListener(\"pointercancel\", cancelPointerDown, opts);\n      return;\n    }\n    if (!this.#touchMoveAC) {\n      this.#touchMoveAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, this.#touchMoveAC.signal]);\n      const container = this.#container;\n      const opt = {\n        signal,\n        capture: false,\n        passive: false\n      };\n      container.addEventListener(\"touchmove\", this.#onTouchMove.bind(this), opt);\n      const onTouchEnd = this.#onTouchEnd.bind(this);\n      container.addEventListener(\"touchend\", onTouchEnd, opt);\n      container.addEventListener(\"touchcancel\", onTouchEnd, opt);\n      opt.capture = true;\n      container.addEventListener(\"pointerdown\", stopEvent, opt);\n      container.addEventListener(\"pointermove\", stopEvent, opt);\n      container.addEventListener(\"pointercancel\", stopEvent, opt);\n      container.addEventListener(\"pointerup\", stopEvent, opt);\n      this.#onPinchStart?.();\n    }\n    stopEvent(evt);\n    if (evt.touches.length !== 2 || this.#isPinchingStopped?.()) {\n      this.#touchInfo = null;\n      return;\n    }\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    this.#touchInfo = {\n      touch0X: touch0.screenX,\n      touch0Y: touch0.screenY,\n      touch1X: touch1.screenX,\n      touch1Y: touch1.screenY\n    };\n  }\n  #onTouchMove(evt) {\n    if (!this.#touchInfo || evt.touches.length !== 2) {\n      return;\n    }\n    stopEvent(evt);\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    const {\n      screenX: screen0X,\n      screenY: screen0Y\n    } = touch0;\n    const {\n      screenX: screen1X,\n      screenY: screen1Y\n    } = touch1;\n    const touchInfo = this.#touchInfo;\n    const {\n      touch0X: pTouch0X,\n      touch0Y: pTouch0Y,\n      touch1X: pTouch1X,\n      touch1Y: pTouch1Y\n    } = touchInfo;\n    const prevGapX = pTouch1X - pTouch0X;\n    const prevGapY = pTouch1Y - pTouch0Y;\n    const currGapX = screen1X - screen0X;\n    const currGapY = screen1Y - screen0Y;\n    const distance = Math.hypot(currGapX, currGapY) || 1;\n    const pDistance = Math.hypot(prevGapX, prevGapY) || 1;\n    if (!this.#isPinching && Math.abs(pDistance - distance) <= TouchManager.MIN_TOUCH_DISTANCE_TO_PINCH) {\n      return;\n    }\n    touchInfo.touch0X = screen0X;\n    touchInfo.touch0Y = screen0Y;\n    touchInfo.touch1X = screen1X;\n    touchInfo.touch1Y = screen1Y;\n    if (!this.#isPinching) {\n      this.#isPinching = true;\n      return;\n    }\n    const origin = [(screen0X + screen1X) / 2, (screen0Y + screen1Y) / 2];\n    this.#onPinching?.(origin, pDistance, distance);\n  }\n  #onTouchEnd(evt) {\n    if (evt.touches.length >= 2) {\n      return;\n    }\n    if (this.#touchMoveAC) {\n      this.#touchMoveAC.abort();\n      this.#touchMoveAC = null;\n      this.#onPinchEnd?.();\n    }\n    if (!this.#touchInfo) {\n      return;\n    }\n    stopEvent(evt);\n    this.#touchInfo = null;\n    this.#isPinching = false;\n  }\n  destroy() {\n    this.#touchManagerAC?.abort();\n    this.#touchManagerAC = null;\n    this.#pointerDownAC?.abort();\n    this.#pointerDownAC = null;\n  }\n}\n\n;// ./src/display/editor/editor.js\n\n\n\n\n\n\nclass AnnotationEditor {\n  #accessibilityData = null;\n  #allResizerDivs = null;\n  #altText = null;\n  #disabled = false;\n  #dragPointerId = null;\n  #dragPointerType = \"\";\n  #keepAspectRatio = false;\n  #resizersDiv = null;\n  #lastPointerCoords = null;\n  #savedDimensions = null;\n  #focusAC = null;\n  #focusedResizerName = \"\";\n  #hasBeenClicked = false;\n  #initialRect = null;\n  #isEditing = false;\n  #isInEditMode = false;\n  #isResizerEnabledForKeyboard = false;\n  #moveInDOMTimeout = null;\n  #prevDragX = 0;\n  #prevDragY = 0;\n  #telemetryTimeouts = null;\n  #touchManager = null;\n  _isCopy = false;\n  _editToolbar = null;\n  _initialOptions = Object.create(null);\n  _initialData = null;\n  _isVisible = true;\n  _uiManager = null;\n  _focusEventsAllowed = true;\n  static _l10n = null;\n  static _l10nResizer = null;\n  #isDraggable = false;\n  #zIndex = AnnotationEditor._zIndex++;\n  static _borderLineWidth = -1;\n  static _colorManager = new ColorManager();\n  static _zIndex = 1;\n  static _telemetryTimeout = 1000;\n  static get _resizerKeyboardManager() {\n    const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_resizerKeyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], resize, {\n      args: [-small, 0]\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], resize, {\n      args: [-big, 0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], resize, {\n      args: [small, 0]\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], resize, {\n      args: [big, 0]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], resize, {\n      args: [0, -small]\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], resize, {\n      args: [0, -big]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], resize, {\n      args: [0, small]\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], resize, {\n      args: [0, big]\n    }], [[\"Escape\", \"mac+Escape\"], AnnotationEditor.prototype._stopResizingWithKeyboard]]));\n  }\n  constructor(parameters) {\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n    const {\n      rotation,\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = this.parent.viewport;\n    this.rotation = rotation;\n    this.pageRotation = (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n  static get isDrawer() {\n    return false;\n  }\n  static get _defaultLineColor() {\n    return shadow(this, \"_defaultLineColor\", this._colorManager.getHexCode(\"CanvasText\"));\n  }\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n  static initialize(l10n, _uiManager) {\n    AnnotationEditor._l10n ??= l10n;\n    AnnotationEditor._l10nResizer ||= Object.freeze({\n      topLeft: \"pdfjs-editor-resizer-top-left\",\n      topMiddle: \"pdfjs-editor-resizer-top-middle\",\n      topRight: \"pdfjs-editor-resizer-top-right\",\n      middleRight: \"pdfjs-editor-resizer-middle-right\",\n      bottomRight: \"pdfjs-editor-resizer-bottom-right\",\n      bottomMiddle: \"pdfjs-editor-resizer-bottom-middle\",\n      bottomLeft: \"pdfjs-editor-resizer-bottom-left\",\n      middleLeft: \"pdfjs-editor-resizer-middle-left\"\n    });\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth = parseFloat(style.getPropertyValue(\"--outline-width\")) || 0;\n  }\n  static updateDefaultParams(_type, _value) {}\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n  static paste(item, parent) {\n    unreachable(\"Not implemented\");\n  }\n  get propertiesToUpdate() {\n    return [];\n  }\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle(\"draggable\", value);\n  }\n  get isEnterHandled() {\n    return true;\n  }\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= this.height * pageHeight / (pageWidth * 2);\n        this.y += this.width * pageWidth / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += this.height * pageHeight / (pageWidth * 2);\n        this.y -= this.width * pageWidth / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    } else {\n      this.#stopResizing();\n    }\n    this.parent = parent;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n    event.preventDefault();\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n  commit() {\n    this.addToAnnotationStorage();\n  }\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n    this.fixAndSetPosition();\n  }\n  _moveAfterPaste(baseX, baseY) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n    this._onTranslated();\n  }\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n    this.x += x / width;\n    this.y += y / height;\n    this._onTranslating(this.x, this.y);\n    this.fixAndSetPosition();\n  }\n  translate(x, y) {\n    this.#translate(this.parentDimensions, x, y);\n  }\n  translateInPage(x, y) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  translationDone() {\n    this._onTranslated(this.x, this.y);\n  }\n  drag(tx, ty) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    const {\n      div,\n      parentDimensions: [parentWidth, parentHeight]\n    } = this;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      const {\n        x,\n        y\n      } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n    let {\n      x,\n      y\n    } = this;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    const {\n      style\n    } = div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this._onTranslating(x, y);\n    div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  _onTranslating(x, y) {}\n  _onTranslated(x, y) {}\n  get _hasBeenMoved() {\n    return !!this.#initialRect && (this.#initialRect[0] !== this.x || this.#initialRect[1] !== this.y);\n  }\n  get _hasBeenResized() {\n    return !!this.#initialRect && (this.#initialRect[2] !== this.width || this.#initialRect[3] !== this.height);\n  }\n  getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      _borderLineWidth\n    } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n  get _mustFixPosition() {\n    return true;\n  }\n  fixAndSetPosition(rotation = this.rotation) {\n    const {\n      div: {\n        style\n      },\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    let {\n      x,\n      y,\n      width,\n      height\n    } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n    if (this._mustFixPosition) {\n      switch (rotation) {\n        case 0:\n          x = MathClamp(x, 0, pageWidth - width);\n          y = MathClamp(y, 0, pageHeight - height);\n          break;\n        case 90:\n          x = MathClamp(x, 0, pageWidth - height);\n          y = MathClamp(y, width, pageHeight);\n          break;\n        case 180:\n          x = MathClamp(x, width, pageWidth);\n          y = MathClamp(y, height, pageHeight);\n          break;\n        case 270:\n          x = MathClamp(x, height, pageWidth);\n          y = MathClamp(y, 0, pageHeight - width);\n          break;\n      }\n    }\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this.moveInDOM();\n  }\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n        }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n        }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    return [pageWidth * parentScale, pageHeight * parentScale];\n  }\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      style\n    } = this.div;\n    style.width = `${(100 * width / parentWidth).toFixed(2)}%`;\n    if (!this.#keepAspectRatio) {\n      style.height = `${(100 * height / parentHeight).toFixed(2)}%`;\n    }\n  }\n  fixDims() {\n    const {\n      style\n    } = this.div;\n    const {\n      height,\n      width\n    } = style;\n    const widthPercent = width.endsWith(\"%\");\n    const heightPercent = !this.#keepAspectRatio && height.endsWith(\"%\");\n    if (widthPercent && heightPercent) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${(100 * parseFloat(width) / parentWidth).toFixed(2)}%`;\n    }\n    if (!this.#keepAspectRatio && !heightPercent) {\n      style.height = `${(100 * parseFloat(height) / parentHeight).toFixed(2)}%`;\n    }\n  }\n  getInitialTranslation() {\n    return [0, 0];\n  }\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement(\"div\");\n    this.#resizersDiv.classList.add(\"resizers\");\n    const classes = this._willKeepAspectRatio ? [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"] : [\"topLeft\", \"topMiddle\", \"topRight\", \"middleRight\", \"bottomRight\", \"bottomMiddle\", \"bottomLeft\", \"middleLeft\"];\n    const signal = this._uiManager._signal;\n    for (const name of classes) {\n      const div = document.createElement(\"div\");\n      this.#resizersDiv.append(div);\n      div.classList.add(\"resizer\", name);\n      div.setAttribute(\"data-resizer-name\", name);\n      div.addEventListener(\"pointerdown\", this.#resizerPointerdown.bind(this, name), {\n        signal\n      });\n      div.addEventListener(\"contextmenu\", noContextMenu, {\n        signal\n      });\n      div.tabIndex = -1;\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    this.#altText?.toggle(false);\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    this.#lastPointerCoords = [event.screenX, event.screenY];\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    this.parent.togglePointerEvents(false);\n    window.addEventListener(\"pointermove\", this.#resizerPointermove.bind(this, name), {\n      passive: true,\n      capture: true,\n      signal\n    });\n    window.addEventListener(\"touchmove\", stopEvent, {\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor = window.getComputedStyle(event.target).cursor;\n    const pointerUpCallback = () => {\n      ac.abort();\n      this.parent.togglePointerEvents(true);\n      this.#altText?.toggle(true);\n      this._isDraggable = savedDraggable;\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n      this.#addResizeToUndoStack();\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  #resize(x, y, width, height) {\n    this.width = width;\n    this.height = height;\n    this.x = x;\n    this.y = y;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(parentWidth * width, parentHeight * height);\n    this.fixAndSetPosition();\n    this._onResized();\n  }\n  _onResized() {}\n  #addResizeToUndoStack() {\n    if (!this.#savedDimensions) {\n      return;\n    }\n    const {\n      savedX,\n      savedY,\n      savedWidth,\n      savedHeight\n    } = this.#savedDimensions;\n    this.#savedDimensions = null;\n    const newX = this.x;\n    const newY = this.y;\n    const newWidth = this.width;\n    const newHeight = this.height;\n    if (newX === savedX && newY === savedY && newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.addCommands({\n      cmd: this.#resize.bind(this, newX, newY, newWidth, newHeight),\n      undo: this.#resize.bind(this, savedX, savedY, savedWidth, savedHeight),\n      mustExec: true\n    });\n  }\n  static _round(x) {\n    return Math.round(x * 10000) / 10000;\n  }\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [invRotationMatrix[0] * x + invRotationMatrix[2] * y, invRotationMatrix[1] * x + invRotationMatrix[3] * y];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n    switch (name) {\n      case \"topLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case \"topMiddle\":\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case \"topRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case \"middleRight\":\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case \"bottomRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case \"bottomMiddle\":\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case \"bottomLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case \"middleLeft\":\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = AnnotationEditor._round(savedX + transfOppositePoint[0]);\n    const oppositeY = AnnotationEditor._round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n    let deltaX, deltaY;\n    if (!event.fromKeyboard) {\n      const {\n        screenX,\n        screenY\n      } = event;\n      const [lastScreenX, lastScreenY] = this.#lastPointerCoords;\n      [deltaX, deltaY] = this.screenToPageTranslation(screenX - lastScreenX, screenY - lastScreenY);\n      this.#lastPointerCoords[0] = screenX;\n      this.#lastPointerCoords[1] = screenY;\n    } else {\n      ({\n        deltaX,\n        deltaY\n      } = event);\n    }\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(Math.min(Math.hypot(oppositePoint[0] - point[0] - deltaX, oppositePoint[1] - point[1] - deltaY) / oldDiag, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    } else if (isHorizontal) {\n      ratioX = MathClamp(Math.abs(oppositePoint[0] - point[0] - deltaX), minWidth, 1) / savedWidth;\n    } else {\n      ratioY = MathClamp(Math.abs(oppositePoint[1] - point[1] - deltaY), minHeight, 1) / savedHeight;\n    }\n    const newWidth = AnnotationEditor._round(savedWidth * ratioX);\n    const newHeight = AnnotationEditor._round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n    this._onResizing();\n  }\n  _onResizing() {}\n  altTextFinish() {\n    this.#altText?.finish();\n  }\n  async addEditToolbar() {\n    if (this._editToolbar || this.#isInEditMode) {\n      return this._editToolbar;\n    }\n    this._editToolbar = new EditorToolbar(this);\n    this.div.append(this._editToolbar.render());\n    if (this.#altText) {\n      await this._editToolbar.addAltText(this.#altText);\n    }\n    return this._editToolbar;\n  }\n  removeEditToolbar() {\n    if (!this._editToolbar) {\n      return;\n    }\n    this._editToolbar.remove();\n    this._editToolbar = null;\n    this.#altText?.destroy();\n  }\n  addContainer(container) {\n    const editToolbarDiv = this._editToolbar?.div;\n    if (editToolbarDiv) {\n      editToolbarDiv.before(container);\n    } else {\n      this.div.append(container);\n    }\n  }\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n  async addAltTextButton() {\n    if (this.#altText) {\n      return;\n    }\n    AltText.initialize(AnnotationEditor._l10n);\n    this.#altText = new AltText(this);\n    if (this.#accessibilityData) {\n      this.#altText.data = this.#accessibilityData;\n      this.#accessibilityData = null;\n    }\n    await this.addEditToolbar();\n  }\n  get altTextData() {\n    return this.#altText?.data;\n  }\n  set altTextData(data) {\n    if (!this.#altText) {\n      return;\n    }\n    this.#altText.data = data;\n  }\n  get guessedAltText() {\n    return this.#altText?.guessedText;\n  }\n  async setGuessedAltText(text) {\n    await this.#altText?.setGuessedText(text);\n  }\n  serializeAltText(isForCopying) {\n    return this.#altText?.serialize(isForCopying);\n  }\n  hasAltText() {\n    return !!this.#altText && !this.#altText.isEmpty();\n  }\n  hasAltTextData() {\n    return this.#altText?.hasData() ?? false;\n  }\n  render() {\n    const div = this.div = document.createElement(\"div\");\n    div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n    div.className = this.name;\n    div.setAttribute(\"id\", this.id);\n    div.tabIndex = this.#disabled ? -1 : 0;\n    div.setAttribute(\"role\", \"application\");\n    if (this.defaultL10nId) {\n      div.setAttribute(\"data-l10n-id\", this.defaultL10nId);\n    }\n    if (!this._isVisible) {\n      div.classList.add(\"hidden\");\n    }\n    this.setInForeground();\n    this.#addFocusListeners();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      div.style.maxWidth = `${(100 * parentHeight / parentWidth).toFixed(2)}%`;\n      div.style.maxHeight = `${(100 * parentWidth / parentHeight).toFixed(2)}%`;\n    }\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n    bindEvents(this, div, [\"keydown\", \"pointerdown\"]);\n    if (this.isResizable && this._uiManager._supportsPinchToZoom) {\n      this.#touchManager ||= new TouchManager({\n        container: div,\n        isPinchingDisabled: () => !this.isSelected,\n        onPinchStart: this.#touchPinchStartCallback.bind(this),\n        onPinching: this.#touchPinchCallback.bind(this),\n        onPinchEnd: this.#touchPinchEndCallback.bind(this),\n        signal: this._uiManager._signal\n      });\n    }\n    this._uiManager._editorUndoBar?.hide();\n    return div;\n  }\n  #touchPinchStartCallback() {\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    this.#altText?.toggle(false);\n    this.parent.togglePointerEvents(false);\n  }\n  #touchPinchCallback(_origin, prevDistance, distance) {\n    const slowDownFactor = 0.7;\n    let factor = slowDownFactor * (distance / prevDistance) + 1 - slowDownFactor;\n    if (factor === 1) {\n      return;\n    }\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    factor = Math.max(Math.min(factor, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    const newWidth = AnnotationEditor._round(savedWidth * factor);\n    const newHeight = AnnotationEditor._round(savedHeight * factor);\n    if (newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.#initialRect ||= [savedX, savedY, savedWidth, savedHeight];\n    const transfCenterPoint = transf(savedWidth / 2, savedHeight / 2);\n    const centerX = AnnotationEditor._round(savedX + transfCenterPoint[0]);\n    const centerY = AnnotationEditor._round(savedY + transfCenterPoint[1]);\n    const newTransfCenterPoint = transf(newWidth / 2, newHeight / 2);\n    this.x = centerX - newTransfCenterPoint[0];\n    this.y = centerY - newTransfCenterPoint[1];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n    this._onResizing();\n  }\n  #touchPinchEndCallback() {\n    this.#altText?.toggle(true);\n    this.parent.togglePointerEvents(true);\n    this.#addResizeToUndoStack();\n  }\n  pointerdown(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      event.preventDefault();\n      return;\n    }\n    this.#hasBeenClicked = true;\n    if (this._isDraggable) {\n      this.#setUpDragSession(event);\n      return;\n    }\n    this.#selectOnPointerEvent(event);\n  }\n  get isSelected() {\n    return this._uiManager.isSelected(this);\n  }\n  #selectOnPointerEvent(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.ctrlKey && !isMac || event.shiftKey || event.metaKey && isMac) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n  }\n  #setUpDragSession(event) {\n    const {\n      isSelected\n    } = this;\n    this._uiManager.setUpDragSession();\n    let hasDraggingStarted = false;\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    const opts = {\n      capture: true,\n      passive: false,\n      signal\n    };\n    const cancelDrag = e => {\n      ac.abort();\n      this.#dragPointerId = null;\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        this.#selectOnPointerEvent(e);\n      }\n      if (hasDraggingStarted) {\n        this._onStopDragging();\n      }\n    };\n    if (isSelected) {\n      this.#prevDragX = event.clientX;\n      this.#prevDragY = event.clientY;\n      this.#dragPointerId = event.pointerId;\n      this.#dragPointerType = event.pointerType;\n      window.addEventListener(\"pointermove\", e => {\n        if (!hasDraggingStarted) {\n          hasDraggingStarted = true;\n          this._onStartDragging();\n        }\n        const {\n          clientX: x,\n          clientY: y,\n          pointerId\n        } = e;\n        if (pointerId !== this.#dragPointerId) {\n          stopEvent(e);\n          return;\n        }\n        const [tx, ty] = this.screenToPageTranslation(x - this.#prevDragX, y - this.#prevDragY);\n        this.#prevDragX = x;\n        this.#prevDragY = y;\n        this._uiManager.dragSelectedEditors(tx, ty);\n      }, opts);\n      window.addEventListener(\"touchmove\", stopEvent, opts);\n      window.addEventListener(\"pointerdown\", e => {\n        if (e.pointerType === this.#dragPointerType) {\n          if (this.#touchManager || e.isPrimary) {\n            cancelDrag(e);\n          }\n        }\n        stopEvent(e);\n      }, opts);\n    }\n    const pointerUpCallback = e => {\n      if (!this.#dragPointerId || this.#dragPointerId === e.pointerId) {\n        cancelDrag(e);\n        return;\n      }\n      stopEvent(e);\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  _onStartDragging() {}\n  _onStopDragging() {}\n  moveInDOM() {\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n    }\n    this.#moveInDOMTimeout = setTimeout(() => {\n      this.#moveInDOMTimeout = null;\n      this.parent?.moveEditorInDOM(this);\n    }, 0);\n  }\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n    this._onTranslated();\n  }\n  getRect(tx, ty, rotation = this.rotation) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n    switch (rotation) {\n      case 0:\n        return [x + shiftX + pageX, pageHeight - y - shiftY - height + pageY, x + shiftX + width + pageX, pageHeight - y - shiftY + pageY];\n      case 90:\n        return [x + shiftY + pageX, pageHeight - y + shiftX + pageY, x + shiftY + height + pageX, pageHeight - y + shiftX + width + pageY];\n      case 180:\n        return [x - shiftX - width + pageX, pageHeight - y + shiftY + pageY, x - shiftX + pageX, pageHeight - y + shiftY + height + pageY];\n      case 270:\n        return [x - shiftY - height + pageX, pageHeight - y - shiftX - width + pageY, x - shiftY + pageX, pageHeight - y - shiftX + pageY];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n    const width = x2 - x1;\n    const height = y2 - y1;\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  onceAdded(focus) {}\n  isEmpty() {\n    return false;\n  }\n  enableEditMode() {\n    this.#isInEditMode = true;\n  }\n  disableEditMode() {\n    this.#isInEditMode = false;\n  }\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n  shouldGetKeyboardEvents() {\n    return this.#isResizerEnabledForKeyboard;\n  }\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n  get isOnScreen() {\n    const {\n      top,\n      left,\n      bottom,\n      right\n    } = this.getClientDimensions();\n    const {\n      innerHeight,\n      innerWidth\n    } = window;\n    return left < innerWidth && right > 0 && top < innerHeight && bottom > 0;\n  }\n  #addFocusListeners() {\n    if (this.#focusAC || !this.div) {\n      return;\n    }\n    this.#focusAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#focusAC);\n    this.div.addEventListener(\"focusin\", this.focusin.bind(this), {\n      signal\n    });\n    this.div.addEventListener(\"focusout\", this.focusout.bind(this), {\n      signal\n    });\n  }\n  rebuild() {\n    this.#addFocusListeners();\n  }\n  rotate(_angle) {}\n  resize() {}\n  serializeDeleted() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex,\n      popupRef: this._initialData?.popupRef || \"\"\n    };\n  }\n  serialize(isForCopying = false, context = null) {\n    unreachable(\"An editor must be serializable\");\n  }\n  static async deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager\n    });\n    editor.rotation = data.rotation;\n    editor.#accessibilityData = data.accessibilityData;\n    editor._isCopy = data.isCopy || false;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(data.rect, pageHeight);\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n    return editor;\n  }\n  get hasBeenModified() {\n    return !!this.annotationElementId && (this.deleted || this.serialize() !== null);\n  }\n  remove() {\n    this.#focusAC?.abort();\n    this.#focusAC = null;\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n      this.#moveInDOMTimeout = null;\n    }\n    this.#stopResizing();\n    this.removeEditToolbar();\n    if (this.#telemetryTimeouts) {\n      for (const timeout of this.#telemetryTimeouts.values()) {\n        clearTimeout(timeout);\n      }\n      this.#telemetryTimeouts = null;\n    }\n    this.parent = null;\n    this.#touchManager?.destroy();\n    this.#touchManager = null;\n  }\n  get isResizable() {\n    return false;\n  }\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove(\"hidden\");\n    }\n  }\n  get toolbarPosition() {\n    return null;\n  }\n  keydown(event) {\n    if (!this.isResizable || event.target !== this.div || event.key !== \"Enter\") {\n      return;\n    }\n    this._uiManager.setSelected(this);\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const children = this.#resizersDiv.children;\n    if (!this.#allResizerDivs) {\n      this.#allResizerDivs = Array.from(children);\n      const boundResizerKeydown = this.#resizerKeydown.bind(this);\n      const boundResizerBlur = this.#resizerBlur.bind(this);\n      const signal = this._uiManager._signal;\n      for (const div of this.#allResizerDivs) {\n        const name = div.getAttribute(\"data-resizer-name\");\n        div.setAttribute(\"role\", \"spinbutton\");\n        div.addEventListener(\"keydown\", boundResizerKeydown, {\n          signal\n        });\n        div.addEventListener(\"blur\", boundResizerBlur, {\n          signal\n        });\n        div.addEventListener(\"focus\", this.#resizerFocus.bind(this, name), {\n          signal\n        });\n        div.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n    const first = this.#allResizerDivs[0];\n    let firstPosition = 0;\n    for (const div of children) {\n      if (div === first) {\n        break;\n      }\n      firstPosition++;\n    }\n    const nextFirstPosition = (360 - this.rotation + this.parentRotation) % 360 / 90 * (this.#allResizerDivs.length / 4);\n    if (nextFirstPosition !== firstPosition) {\n      if (nextFirstPosition < firstPosition) {\n        for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n          this.#resizersDiv.append(this.#resizersDiv.firstChild);\n        }\n      } else if (nextFirstPosition > firstPosition) {\n        for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);\n        }\n      }\n      let i = 0;\n      for (const child of children) {\n        const div = this.#allResizerDivs[i++];\n        const name = div.getAttribute(\"data-resizer-name\");\n        child.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n    this.#setResizerTabIndex(0);\n    this.#isResizerEnabledForKeyboard = true;\n    this.#resizersDiv.firstChild.focus({\n      focusVisible: true\n    });\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n  #resizerKeydown(event) {\n    AnnotationEditor._resizerKeyboardManager.exec(this, event);\n  }\n  #resizerBlur(event) {\n    if (this.#isResizerEnabledForKeyboard && event.relatedTarget?.parentNode !== this.#resizersDiv) {\n      this.#stopResizing();\n    }\n  }\n  #resizerFocus(name) {\n    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : \"\";\n  }\n  #setResizerTabIndex(value) {\n    if (!this.#allResizerDivs) {\n      return;\n    }\n    for (const div of this.#allResizerDivs) {\n      div.tabIndex = value;\n    }\n  }\n  _resizeWithKeyboard(x, y) {\n    if (!this.#isResizerEnabledForKeyboard) {\n      return;\n    }\n    this.#resizerPointermove(this.#focusedResizerName, {\n      deltaX: x,\n      deltaY: y,\n      fromKeyboard: true\n    });\n  }\n  #stopResizing() {\n    this.#isResizerEnabledForKeyboard = false;\n    this.#setResizerTabIndex(-1);\n    this.#addResizeToUndoStack();\n  }\n  _stopResizingWithKeyboard() {\n    this.#stopResizing();\n    this.div.focus();\n  }\n  select() {\n    this.makeResizable();\n    this.div?.classList.add(\"selectedEditor\");\n    if (!this._editToolbar) {\n      this.addEditToolbar().then(() => {\n        if (this.div?.classList.contains(\"selectedEditor\")) {\n          this._editToolbar?.show();\n        }\n      });\n      return;\n    }\n    this._editToolbar?.show();\n    this.#altText?.toggleAltTextBadge(false);\n  }\n  unselect() {\n    this.#resizersDiv?.classList.add(\"hidden\");\n    this.div?.classList.remove(\"selectedEditor\");\n    if (this.div?.contains(document.activeElement)) {\n      this._uiManager.currentLayer.div.focus({\n        preventScroll: true\n      });\n    }\n    this._editToolbar?.hide();\n    this.#altText?.toggleAltTextBadge(true);\n  }\n  updateParams(type, value) {}\n  disableEditing() {}\n  enableEditing() {}\n  enterInEditMode() {}\n  getElementForAltText() {\n    return this.div;\n  }\n  get contentDiv() {\n    return this.div;\n  }\n  get isEditing() {\n    return this.#isEditing;\n  }\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n  setAspectRatio(width, height) {\n    this.#keepAspectRatio = true;\n    const aspectRatio = width / height;\n    const {\n      style\n    } = this.div;\n    style.aspectRatio = aspectRatio;\n    style.height = \"auto\";\n  }\n  static get MIN_SIZE() {\n    return 16;\n  }\n  static canCreateNewEmptyEditor() {\n    return true;\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\"\n    };\n  }\n  get telemetryFinalData() {\n    return null;\n  }\n  _reportTelemetry(data, mustWait = false) {\n    if (mustWait) {\n      this.#telemetryTimeouts ||= new Map();\n      const {\n        action\n      } = data;\n      let timeout = this.#telemetryTimeouts.get(action);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        this._reportTelemetry(data);\n        this.#telemetryTimeouts.delete(action);\n        if (this.#telemetryTimeouts.size === 0) {\n          this.#telemetryTimeouts = null;\n        }\n      }, AnnotationEditor._telemetryTimeout);\n      this.#telemetryTimeouts.set(action, timeout);\n      return;\n    }\n    data.type ||= this.editorType;\n    this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n      source: this,\n      details: {\n        type: \"editing\",\n        data\n      }\n    });\n  }\n  show(visible = this._isVisible) {\n    this.div.classList.toggle(\"hidden\", !visible);\n    this._isVisible = visible;\n  }\n  enable() {\n    if (this.div) {\n      this.div.tabIndex = 0;\n    }\n    this.#disabled = false;\n  }\n  disable() {\n    if (this.div) {\n      this.div.tabIndex = -1;\n    }\n    this.#disabled = true;\n  }\n  renderAnnotationElement(annotation) {\n    let content = annotation.container.querySelector(\".annotationContent\");\n    if (!content) {\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      annotation.container.prepend(content);\n    } else if (content.nodeName === \"CANVAS\") {\n      const canvas = content;\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      canvas.before(content);\n    }\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    const {\n      firstChild\n    } = annotation.container;\n    if (firstChild?.nodeName === \"DIV\" && firstChild.classList.contains(\"annotationContent\")) {\n      firstChild.remove();\n    }\n  }\n}\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n  serialize() {\n    return this.serializeDeleted();\n  }\n}\n\n;// ./src/shared/murmurhash3.js\nconst SEED = 0xc3d2e1f0;\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (ArrayBuffer.isView(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\"Invalid data format, must be a string or TypedArray.\");\n    }\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        h1 ^= k1;\n        h1 = h1 << 13 | h1 >>> 19;\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = k2 * C1 & MASK_HIGH | k2 * C1_LOW & MASK_LOW;\n        k2 = k2 << 15 | k2 >>> 17;\n        k2 = k2 * C2 & MASK_HIGH | k2 * C2_LOW & MASK_LOW;\n        h2 ^= k2;\n        h2 = h2 << 13 | h2 >>> 19;\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n    k1 = 0;\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0xed558ccd & MASK_HIGH | h1 * 0x8ccd & MASK_LOW;\n    h2 = h2 * 0xff51afd7 & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xafd7ed55 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0x1a85ec53 & MASK_HIGH | h1 * 0xec53 & MASK_LOW;\n    h2 = h2 * 0xc4ceb9fe & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xb9fe1a85 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    return (h1 >>> 0).toString(16).padStart(8, \"0\") + (h2 >>> 0).toString(16).padStart(8, \"0\");\n  }\n}\n\n;// ./src/display/annotation_storage.js\n\n\n\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: \"\",\n  transfer: undefined\n});\nclass AnnotationStorage {\n  #modified = false;\n  #modifiedIds = null;\n  #storage = new Map();\n  constructor() {\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n    return Object.assign(defaultValue, value);\n  }\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n  remove(key) {\n    this.#storage.delete(key);\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n    if (typeof this.onAnnotationEditor === \"function\") {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n    if (value instanceof AnnotationEditor && typeof this.onAnnotationEditor === \"function\") {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n  has(key) {\n    return this.#storage.has(key);\n  }\n  get size() {\n    return this.#storage.size;\n  }\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new MurmurHash3_64(),\n      transfer = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n    for (const [key, val] of this.#storage) {\n      const serialized = val instanceof AnnotationEditor ? val.serialize(false, context) : val;\n      if (serialized) {\n        map.set(key, serialized);\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n    if (hasBitmap) {\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfer.push(value.bitmap);\n        }\n      }\n    }\n    return map.size > 0 ? {\n      map,\n      hash: hash.hexdigest(),\n      transfer\n    } : SerializableEmpty;\n  }\n  get editorStats() {\n    let stats = null;\n    const typeToEditor = new Map();\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor)) {\n        continue;\n      }\n      const editorStats = value.telemetryFinalData;\n      if (!editorStats) {\n        continue;\n      }\n      const {\n        type\n      } = editorStats;\n      if (!typeToEditor.has(type)) {\n        typeToEditor.set(type, Object.getPrototypeOf(value).constructor);\n      }\n      stats ||= Object.create(null);\n      const map = stats[type] ||= new Map();\n      for (const [key, val] of Object.entries(editorStats)) {\n        if (key === \"type\") {\n          continue;\n        }\n        let counters = map.get(key);\n        if (!counters) {\n          counters = new Map();\n          map.set(key, counters);\n        }\n        const count = counters.get(val) ?? 0;\n        counters.set(val, count + 1);\n      }\n    }\n    for (const [type, editor] of typeToEditor) {\n      stats[type] = editor.computeTelemetryFinalData(stats[type]);\n    }\n    return stats;\n  }\n  resetModifiedIds() {\n    this.#modifiedIds = null;\n  }\n  get modifiedIds() {\n    if (this.#modifiedIds) {\n      return this.#modifiedIds;\n    }\n    const ids = [];\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor) || !value.annotationElementId || !value.serialize()) {\n        continue;\n      }\n      ids.push(value.annotationElementId);\n    }\n    return this.#modifiedIds = {\n      ids: new Set(ids),\n      hash: ids.join(\",\")\n    };\n  }\n  [Symbol.iterator]() {\n    return this.#storage.entries();\n  }\n}\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n  constructor(parent) {\n    super();\n    const {\n      map,\n      hash,\n      transfer\n    } = parent.serializable;\n    const clone = structuredClone(map, transfer ? {\n      transfer\n    } : null);\n    this.#serializable = {\n      map: clone,\n      hash,\n      transfer\n    };\n  }\n  get print() {\n    unreachable(\"Should not call PrintAnnotationStorage.print\");\n  }\n  get serializable() {\n    return this.#serializable;\n  }\n  get modifiedIds() {\n    return shadow(this, \"modifiedIds\", {\n      ids: new Set(),\n      hash: \"\"\n    });\n  }\n}\n\n;// ./src/display/font_loader.js\n\nclass FontLoader {\n  #systemFonts = new Set();\n  constructor({\n    ownerDocument = globalThis.document,\n    styleElement = null\n  }) {\n    this._document = ownerDocument;\n    this.nativeFontFaces = new Set();\n    this.styleElement = null;\n    this.loadingRequests = [];\n    this.loadTestFontId = 0;\n  }\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement(\"style\");\n      this._document.documentElement.getElementsByTagName(\"head\")[0].append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n    if (this.styleElement) {\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n  async loadSystemFont({\n    systemFontInfo: info,\n    disableFontFace,\n    _inspectFont\n  }) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(!disableFontFace, \"loadSystemFont shouldn't be called when `disableFontFace` is set.\");\n    if (this.isFontLoadingAPISupported) {\n      const {\n        loadedName,\n        src,\n        style\n      } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n        _inspectFont?.(info);\n      } catch {\n        warn(`Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`);\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n    unreachable(\"Not implemented: loadSystemFont without the Font Loading API.\");\n  }\n  async bind(font) {\n    if (font.attached || font.missingFile && !font.systemFontInfo) {\n      return;\n    }\n    font.attached = true;\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font);\n      return;\n    }\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return;\n    }\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n      if (this.isSyncFontLoadingSupported) {\n        return;\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n    }\n  }\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    return shadow(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n  get isSyncFontLoadingSupported() {\n    return shadow(this, \"isSyncFontLoadingSupported\", isNodeJS || util_FeatureTest.platform.isFirefox);\n  }\n  _queueLoadingCallback(callback) {\n    function completeRequest() {\n      assert(!request.done, \"completeRequest() cannot be called twice.\");\n      request.done = true;\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n    const {\n      loadingRequests\n    } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n  get _loadTestFont() {\n    const testFont = atob(\"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" + \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" + \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" + \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" + \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" + \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" + \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" + \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" + \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" + \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" + \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" + \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" + \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" + \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" + \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" + \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" + \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\");\n    return shadow(this, \"_loadTestFont\", testFont);\n  }\n  _prepareFontLoadEvent(font, request) {\n    function int32(data, offset) {\n      return data.charCodeAt(offset) << 24 | data.charCodeAt(offset + 1) << 16 | data.charCodeAt(offset + 2) << 8 | data.charCodeAt(offset + 3) & 0xff;\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n    let called = 0;\n    function isFontReady(name, callback) {\n      if (++called > 30) {\n        warn(\"Load test font never loaded.\");\n        callback();\n        return;\n      }\n      ctx.font = \"30px \" + name;\n      ctx.fillText(\".\", 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976;\n    data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858;\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId, i) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n    const div = this._document.createElement(\"div\");\n    div.style.visibility = \"hidden\";\n    div.style.width = div.style.height = \"10px\";\n    div.style.position = \"absolute\";\n    div.style.top = div.style.left = \"0px\";\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement(\"span\");\n      span.textContent = \"Hi\";\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n  }\n}\nclass FontFaceObject {\n  constructor(translatedData, inspectFont = null) {\n    this.compiledGlyphs = Object.create(null);\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this._inspectFont = inspectFont;\n  }\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(this.cssFontInfo.fontFamily, this.data, css);\n    }\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const url = `url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n    const objId = this.loadedName + \"_path_\" + character;\n    let cmds;\n    try {\n      cmds = objs.get(objId);\n    } catch (ex) {\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n    }\n    const path = new Path2D(cmds || \"\");\n    if (!this.fontExtraProperties) {\n      objs.delete(objId);\n    }\n    return this.compiledGlyphs[character] = path;\n  }\n}\n\n;// ./src/shared/message_handler.js\n\nconst CallbackKind = {\n  DATA: 1,\n  ERROR: 2\n};\nconst StreamKind = {\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8\n};\nfunction onFn() {}\nfunction wrapReason(ex) {\n  if (ex instanceof AbortException || ex instanceof InvalidPDFException || ex instanceof PasswordException || ex instanceof ResponseException || ex instanceof UnknownErrorException) {\n    return ex;\n  }\n  if (!(ex instanceof Error || typeof ex === \"object\" && ex !== null)) {\n    unreachable('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');\n  }\n  switch (ex.name) {\n    case \"AbortException\":\n      return new AbortException(ex.message);\n    case \"InvalidPDFException\":\n      return new InvalidPDFException(ex.message);\n    case \"PasswordException\":\n      return new PasswordException(ex.message, ex.code);\n    case \"ResponseException\":\n      return new ResponseException(ex.message, ex.status, ex.missing);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(ex.message, ex.details);\n  }\n  return new UnknownErrorException(ex.message, ex.toString());\n}\nclass MessageHandler {\n  #messageAC = new AbortController();\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n    comObj.addEventListener(\"message\", this.#onMessage.bind(this), {\n      signal: this.#messageAC.signal\n    });\n  }\n  #onMessage({\n    data\n  }) {\n    if (data.targetName !== this.sourceName) {\n      return;\n    }\n    if (data.stream) {\n      this.#processStreamMessage(data);\n      return;\n    }\n    if (data.callback) {\n      const callbackId = data.callbackId;\n      const capability = this.callbackCapabilities[callbackId];\n      if (!capability) {\n        throw new Error(`Cannot resolve callback ${callbackId}`);\n      }\n      delete this.callbackCapabilities[callbackId];\n      if (data.callback === CallbackKind.DATA) {\n        capability.resolve(data.data);\n      } else if (data.callback === CallbackKind.ERROR) {\n        capability.reject(wrapReason(data.reason));\n      } else {\n        throw new Error(\"Unexpected callback case\");\n      }\n      return;\n    }\n    const action = this.actionHandler[data.action];\n    if (!action) {\n      throw new Error(`Unknown action from worker: ${data.action}`);\n    }\n    if (data.callbackId) {\n      const sourceName = this.sourceName,\n        targetName = data.sourceName,\n        comObj = this.comObj;\n      Promise.try(action, data.data).then(function (result) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          callback: CallbackKind.DATA,\n          callbackId: data.callbackId,\n          data: result\n        });\n      }, function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          callback: CallbackKind.ERROR,\n          callbackId: data.callbackId,\n          reason: wrapReason(reason)\n        });\n      });\n      return;\n    }\n    if (data.streamId) {\n      this.#createStreamSink(data);\n      return;\n    }\n    action(data.data);\n  }\n  on(actionName, handler) {\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n  send(actionName, data, transfers) {\n    this.comObj.postMessage({\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data\n    }, transfers);\n  }\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = Promise.withResolvers();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage({\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        callbackId,\n        data\n      }, transfers);\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n    return new ReadableStream({\n      start: controller => {\n        const startCapability = Promise.withResolvers();\n        this.streamControllers[streamId] = {\n          controller,\n          startCall: startCapability,\n          pullCall: null,\n          cancelCall: null,\n          isClosed: false\n        };\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          action: actionName,\n          streamId,\n          data,\n          desiredSize: controller.desiredSize\n        }, transfers);\n        return startCapability.promise;\n      },\n      pull: controller => {\n        const pullCapability = Promise.withResolvers();\n        this.streamControllers[streamId].pullCall = pullCapability;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.PULL,\n          streamId,\n          desiredSize: controller.desiredSize\n        });\n        return pullCapability.promise;\n      },\n      cancel: reason => {\n        assert(reason instanceof Error, \"cancel must have a valid reason\");\n        const cancelCapability = Promise.withResolvers();\n        this.streamControllers[streamId].cancelCall = cancelCapability;\n        this.streamControllers[streamId].isClosed = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CANCEL,\n          streamId,\n          reason: wrapReason(reason)\n        });\n        return cancelCapability.promise;\n      }\n    }, queueingStrategy);\n  }\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = Promise.withResolvers();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ENQUEUE,\n          streamId,\n          chunk\n        }, transfers);\n      },\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId\n        });\n        delete self.streamSinks[streamId];\n      },\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason)\n        });\n      },\n      sinkCapability: Promise.withResolvers(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null\n    };\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n    Promise.try(action, data.data, streamSink).then(function () {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        success: true\n      });\n    }, function (reason) {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        reason: wrapReason(reason)\n      });\n    });\n  }\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n          break;\n        }\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        streamSink.desiredSize = data.desiredSize;\n        Promise.try(streamSink.onPull || onFn).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n        const dataReason = wrapReason(data.reason);\n        Promise.try(streamSink.onCancel || onFn, dataReason).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        streamSink.sinkCapability.reject(dataReason);\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n  async #deleteStreamController(streamController, streamId) {\n    await Promise.allSettled([streamController.startCall?.promise, streamController.pullCall?.promise, streamController.cancelCall?.promise]);\n    delete this.streamControllers[streamId];\n  }\n  destroy() {\n    this.#messageAC?.abort();\n    this.#messageAC = null;\n  }\n}\n\n;// ./src/display/canvas_factory.js\n\nclass BaseCanvasFactory {\n  #enableHWA = false;\n  constructor({\n    enableHWA = false\n  }) {\n    this.#enableHWA = enableHWA;\n  }\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\", {\n        willReadFrequently: !this.#enableHWA\n      })\n    };\n  }\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n  _createCanvas(width, height) {\n    unreachable(\"Abstract method `_createCanvas` called.\");\n  }\n}\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({\n    ownerDocument = globalThis.document,\n    enableHWA = false\n  }) {\n    super({\n      enableHWA\n    });\n    this._document = ownerDocument;\n  }\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\n\n;// ./src/display/cmap_reader_factory.js\n\n\nclass BaseCMapReaderFactory {\n  constructor({\n    baseUrl = null,\n    isCompressed = true\n  }) {\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n  async fetch({\n    name\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.\");\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    return this._fetch(url).then(cMapData => ({\n      cMapData,\n      isCompressed: this.isCompressed\n    })).catch(reason => {\n      throw new Error(`Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, this.isCompressed ? \"arraybuffer\" : \"text\");\n    return data instanceof ArrayBuffer ? new Uint8Array(data) : stringToBytes(data);\n  }\n}\n\n;// ./src/display/filter_factory.js\n\n\nclass BaseFilterFactory {\n  addFilter(maps) {\n    return \"none\";\n  }\n  addHCMFilter(fgColor, bgColor) {\n    return \"none\";\n  }\n  addAlphaFilter(map) {\n    return \"none\";\n  }\n  addLuminosityFilter(map) {\n    return \"none\";\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    return \"none\";\n  }\n  destroy(keepHCM = false) {}\n}\nclass DOMFilterFactory extends BaseFilterFactory {\n  #baseUrl;\n  #_cache;\n  #_defs;\n  #docId;\n  #document;\n  #_hcmCache;\n  #id = 0;\n  constructor({\n    docId,\n    ownerDocument = globalThis.document\n  }) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n  get #cache() {\n    return this.#_cache ||= new Map();\n  }\n  get #hcmCache() {\n    return this.#_hcmCache ||= new Map();\n  }\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement(\"div\");\n      const {\n        style\n      } = div;\n      style.visibility = \"hidden\";\n      style.contain = \"strict\";\n      style.width = style.height = 0;\n      style.position = \"absolute\";\n      style.top = style.left = 0;\n      style.zIndex = -1;\n      const svg = this.#document.createElementNS(SVG_NS, \"svg\");\n      svg.setAttribute(\"width\", 0);\n      svg.setAttribute(\"height\", 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, \"defs\");\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n  #createTables(maps) {\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      const table = buffer.join(\",\");\n      return [table, table, table];\n    }\n    const [mapR, mapG, mapB] = maps;\n    const bufferR = new Array(256);\n    const bufferG = new Array(256);\n    const bufferB = new Array(256);\n    for (let i = 0; i < 256; i++) {\n      bufferR[i] = mapR[i] / 255;\n      bufferG[i] = mapG[i] / 255;\n      bufferB[i] = mapB[i] / 255;\n    }\n    return [bufferR.join(\",\"), bufferG.join(\",\"), bufferB.join(\",\")];\n  }\n  #createUrl(id) {\n    if (this.#baseUrl === undefined) {\n      this.#baseUrl = \"\";\n      const url = this.#document.URL;\n      if (url !== this.#document.baseURI) {\n        if (isDataScheme(url)) {\n          warn('#createUrl: ignore \"data:\"-URL for performance reasons.');\n        } else {\n          this.#baseUrl = updateUrlHash(url, \"\");\n        }\n      }\n    }\n    return `url(${this.#baseUrl}#${id})`;\n  }\n  addFilter(maps) {\n    if (!maps) {\n      return \"none\";\n    }\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n    const [tableR, tableG, tableB] = this.#createTables(maps);\n    const key = maps.length === 1 ? tableR : `${tableR}${tableG}${tableB}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n    return url;\n  }\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    const filterName = \"base\";\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = \"\";\n    if (fgColor === \"#000000\" && bgColor === \"#ffffff\" || fgColor === bgColor) {\n      return info.url;\n    }\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(\",\");\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + i / n * (end - start);\n      }\n      return arr.join(\",\");\n    };\n    this.#addTransferMapConversion(getSteps(0, 5), getSteps(1, 5), getSteps(2, 5), filter);\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n  addAlphaFilter(map) {\n    let value = this.#cache.get(map);\n    if (value) {\n      return value;\n    }\n    const [tableA] = this.#createTables([map]);\n    const key = `alpha_${tableA}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_alpha_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapAlphaConversion(tableA, filter);\n    return url;\n  }\n  addLuminosityFilter(map) {\n    let value = this.#cache.get(map || \"luminosity\");\n    if (value) {\n      return value;\n    }\n    let tableA, key;\n    if (map) {\n      [tableA] = this.#createTables([map]);\n      key = `luminosity_${tableA}`;\n    } else {\n      key = \"luminosity\";\n    }\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_luminosity_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addLuminosityConversion(filter);\n    if (map) {\n      this.#addTransferMapAlphaConversion(tableA, filter);\n    }\n    return url;\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]);\n    let bgGray = Math.round(0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]);\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(this.#getRGB.bind(this));\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [bgGray, fgGray, newBgRGB, newFgRGB];\n    }\n    this.#defs.style.color = \"\";\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(\",\");\n    };\n    const id = `g_${this.#docId}_hcm_${filterName}_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(getSteps(newFgRGB[0], newBgRGB[0], 5), getSteps(newFgRGB[1], newBgRGB[1], 5), getSteps(newFgRGB[2], newBgRGB[2], 5), filter);\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n  destroy(keepHCM = false) {\n    if (keepHCM && this.#_hcmCache?.size) {\n      return;\n    }\n    this.#_defs?.parentNode.parentNode.remove();\n    this.#_defs = null;\n    this.#_cache?.clear();\n    this.#_cache = null;\n    this.#_hcmCache?.clear();\n    this.#_hcmCache = null;\n    this.#id = 0;\n  }\n  #addLuminosityConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0\");\n    filter.append(feColorMatrix);\n  }\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\");\n    filter.append(feColorMatrix);\n  }\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, \"filter\");\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    filter.setAttribute(\"id\", id);\n    this.#defs.append(filter);\n    return filter;\n  }\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute(\"type\", \"discrete\");\n    feFunc.setAttribute(\"tableValues\", table);\n    feComponentTransfer.append(feFunc);\n  }\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", rTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", gTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", bTable);\n  }\n  #addTransferMapAlphaConversion(aTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncA\", aTable);\n  }\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue(\"color\"));\n  }\n}\n\n;// ./src/display/standard_fontdata_factory.js\n\n\nclass BaseStandardFontDataFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `standardFontDataUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\n;// ./src/display/wasm_factory.js\n\n\nclass BaseWasmFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `wasmUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Wasm filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load wasm data at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMWasmFactory extends BaseWasmFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\n;// ./src/display/node_utils.js\n\n\n\n\n\n\nif (isNodeJS) {\n  warn(\"Please use the `legacy` build in Node.js environments.\");\n}\nasync function node_utils_fetchData(url) {\n  const fs = process.getBuiltinModule(\"fs\");\n  const data = await fs.promises.readFile(url);\n  return new Uint8Array(data);\n}\nclass NodeFilterFactory extends BaseFilterFactory {}\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  _createCanvas(width, height) {\n    const require = process.getBuiltinModule(\"module\").createRequire(import.meta.url);\n    const canvas = require(\"@napi-rs/canvas\");\n    return canvas.createCanvas(width, height);\n  }\n}\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\nclass NodeWasmFactory extends BaseWasmFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\n\n;// ./src/display/pattern_helper.js\n\n\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\"\n};\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\nclass BaseShadingPattern {\n  isModifyingCurrentTransform() {\n    return false;\n  }\n  getPattern() {\n    unreachable(\"Abstract method `getPattern` called.\");\n  }\n}\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(this._p0[0], this._p0[1], this._p1[0], this._p1[1]);\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(this._p0[0], this._p0[1], this._r0, this._p1[0], this._p1[1], this._r1);\n    }\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(pathType, getCurrentTransform(ctx)) || [0, 0, 0, 0];\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [1, 0, 0, 1, ownerBBox[0], ownerBBox[1]]);\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = car - (car - cbr) * k | 0;\n      bytes[j++] = cag - (cag - cbg) * k | 0;\n      bytes[j++] = cab - (cab - cbb) * k | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(data, context, ps[q], ps[q + 1], ps[q + verticesPerRow], cs[q], cs[q + 1], cs[q + verticesPerRow]);\n          drawTriangle(data, context, ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow], cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[6];\n    this._background = IR[7];\n    this.matrix = null;\n  }\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    const EXPECTED_SCALE = 1.1;\n    const MAX_PATTERN_SIZE = 3000;\n    const BORDER_SIZE = 2;\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n    const width = Math.min(Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const height = Math.min(Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY\n    };\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n    const tmpCanvas = cachedCanvases.getCanvas(\"mesh\", paddedWidth, paddedHeight);\n    const tmpCtx = tmpCanvas.context;\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY\n    };\n  }\n  isModifyingCurrentTransform() {\n    return true;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    const scale = new Float32Array(2);\n    if (pathType === PathType.SHADING) {\n      Util.singularValueDecompose2dScale(getCurrentTransform(ctx), scale);\n    } else if (this.matrix) {\n      Util.singularValueDecompose2dScale(this.matrix, scale);\n      const [matrixScaleX, matrixScaleY] = scale;\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n      scale[0] *= matrixScaleX;\n      scale[1] *= matrixScaleY;\n    } else {\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n    }\n    const temporaryPatternCanvas = this._createMeshCanvas(scale, pathType === PathType.SHADING ? null : this._background, owner.cachedCanvases);\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n    ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2\n};\nclass TilingPattern {\n  static MAX_PATTERN_SIZE = 3000;\n  constructor(IR, ctx, canvasGraphicsFactory, baseTransform) {\n    this.color = IR[1];\n    this.operatorList = IR[2];\n    this.matrix = IR[3];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n  createPatternCanvas(owner) {\n    const {\n      bbox,\n      operatorList,\n      paintType,\n      tilingType,\n      color,\n      canvasGraphicsFactory\n    } = this;\n    let {\n      xstep,\n      ystep\n    } = this;\n    xstep = Math.abs(xstep);\n    ystep = Math.abs(ystep);\n    info(\"TilingType: \" + tilingType);\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n    const width = x1 - x0;\n    const height = y1 - y0;\n    const scale = new Float32Array(2);\n    Util.singularValueDecompose2dScale(this.matrix, scale);\n    const [matrixScaleX, matrixScaleY] = scale;\n    Util.singularValueDecompose2dScale(this.baseTransform, scale);\n    const combinedScaleX = matrixScaleX * scale[0];\n    const combinedScaleY = matrixScaleY * scale[1];\n    let canvasWidth = width,\n      canvasHeight = height,\n      redrawHorizontally = false,\n      redrawVertically = false;\n    const xScaledStep = Math.ceil(xstep * combinedScaleX);\n    const yScaledStep = Math.ceil(ystep * combinedScaleY);\n    const xScaledWidth = Math.ceil(width * combinedScaleX);\n    const yScaledHeight = Math.ceil(height * combinedScaleY);\n    if (xScaledStep >= xScaledWidth) {\n      canvasWidth = xstep;\n    } else {\n      redrawHorizontally = true;\n    }\n    if (yScaledStep >= yScaledHeight) {\n      canvasHeight = ystep;\n    } else {\n      redrawVertically = true;\n    }\n    const dimx = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);\n    const dimy = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", dimx.size, dimy.size);\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n    tmpCtx.translate(-dimx.scale * x0, -dimy.scale * y0);\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n    tmpCtx.save();\n    this.clipBbox(graphics, x0, y0, x1, y1);\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n    graphics.executeOperatorList(operatorList);\n    graphics.endDrawing();\n    tmpCtx.restore();\n    if (redrawHorizontally || redrawVertically) {\n      const image = tmpCanvas.canvas;\n      if (redrawHorizontally) {\n        canvasWidth = xstep;\n      }\n      if (redrawVertically) {\n        canvasHeight = ystep;\n      }\n      const dimx2 = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);\n      const dimy2 = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);\n      const xSize = dimx2.size;\n      const ySize = dimy2.size;\n      const tmpCanvas2 = owner.cachedCanvases.getCanvas(\"pattern-workaround\", xSize, ySize);\n      const tmpCtx2 = tmpCanvas2.context;\n      const ii = redrawHorizontally ? Math.floor(width / xstep) : 0;\n      const jj = redrawVertically ? Math.floor(height / ystep) : 0;\n      for (let i = 0; i <= ii; i++) {\n        for (let j = 0; j <= jj; j++) {\n          tmpCtx2.drawImage(image, xSize * i, ySize * j, xSize, ySize, 0, 0, xSize, ySize);\n        }\n      }\n      return {\n        canvas: tmpCanvas2.canvas,\n        scaleX: dimx2.scale,\n        scaleY: dimy2.scale,\n        offsetX: x0,\n        offsetY: y0\n      };\n    }\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: x0,\n      offsetY: y0\n    };\n  }\n  getSizeAndScale(step, realOutputSize, scale) {\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return {\n      scale,\n      size\n    };\n  }\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    Util.axialAlignedBoundingBox([x0, y0, x1, y1], getCurrentTransform(graphics.ctx), graphics.current.minMax);\n    graphics.clip();\n    graphics.endPath();\n  }\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const ctx = this.ctx;\n        context.fillStyle = ctx.fillStyle;\n        context.strokeStyle = ctx.strokeStyle;\n        current.fillColor = ctx.fillStyle;\n        current.strokeColor = ctx.strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        const cssColor = Util.makeHexColor(color[0], color[1], color[2]);\n        context.fillStyle = cssColor;\n        context.strokeStyle = cssColor;\n        current.fillColor = cssColor;\n        current.strokeColor = cssColor;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n  isModifyingCurrentTransform() {\n    return false;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n    let domMatrix = new DOMMatrix(matrix);\n    domMatrix = domMatrix.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    domMatrix = domMatrix.scale(1 / temporaryPatternCanvas.scaleX, 1 / temporaryPatternCanvas.scaleY);\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    pattern.setTransform(domMatrix);\n    return pattern;\n  }\n}\n\n;// ./src/shared/image_utils.js\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n  return null;\n}\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false\n}) {\n  const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode ? [nonBlackColor, black] : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & 1 << 7 - j ? oneMapping : zeroMapping;\n    }\n  }\n  return {\n    srcPos,\n    destPos\n  };\n}\nfunction convertRGBToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height\n}) {\n  let i = 0;\n  const len = width * height * 3;\n  const len32 = len >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n  if (FeatureTest.isLittleEndian) {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = s1 >>> 24 | s2 << 8 | 0xff000000;\n      dest[destPos + 2] = s2 >>> 16 | s3 << 16 | 0xff000000;\n      dest[destPos + 3] = s3 >>> 8 | 0xff000000;\n    }\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] = src[j] | src[j + 1] << 8 | src[j + 2] << 16 | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = s1 << 24 | s2 >>> 8 | 0xff;\n      dest[destPos + 2] = s2 << 16 | s3 >>> 16 | 0xff;\n      dest[destPos + 3] = s3 << 8 | 0xff;\n    }\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] = src[j] << 24 | src[j + 1] << 16 | src[j + 2] << 8 | 0xff;\n    }\n  }\n  return {\n    srcPos: srcPos + len,\n    destPos\n  };\n}\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x10101 | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x1010100 | 0x000000ff;\n    }\n  }\n}\n\n;// ./src/display/canvas.js\n\n\n\n\nconst MIN_FONT_SIZE = 16;\nconst MAX_FONT_SIZE = 100;\nconst EXECUTION_TIME = 15;\nconst EXECUTION_STEPS = 10;\nconst FULL_CHUNK_HEIGHT = 16;\nconst SCALE_MATRIX = new DOMMatrix();\nconst XY = new Float32Array(2);\nconst MIN_MAX_INIT = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n  ctx.save = function () {\n    destCtx.save();\n    this.__originalSave();\n  };\n  ctx.restore = function () {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n  ctx.translate = function (x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n  ctx.scale = function (x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n  ctx.transform = function (a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n  ctx.setTransform = function (a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n  ctx.resetTransform = function () {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n  ctx.rotate = function (angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n  ctx.clip = function (rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n  delete(id) {\n    delete this.cache[id];\n  }\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\nfunction drawImageAtIntegerCoords(ctx, srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rWidth, rHeight];\n  }\n  if (a === 0 && d === 0) {\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rHeight, rWidth];\n  }\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\nclass CanvasExtraState {\n  alphaIsShape = false;\n  fontSize = 0;\n  fontSizeScale = 1;\n  textMatrix = null;\n  textMatrixScale = 1;\n  fontMatrix = FONT_IDENTITY_MATRIX;\n  leading = 0;\n  x = 0;\n  y = 0;\n  lineX = 0;\n  lineY = 0;\n  charSpacing = 0;\n  wordSpacing = 0;\n  textHScale = 1;\n  textRenderingMode = TextRenderingMode.FILL;\n  textRise = 0;\n  fillColor = \"#000000\";\n  strokeColor = \"#000000\";\n  patternFill = false;\n  patternStroke = false;\n  fillAlpha = 1;\n  strokeAlpha = 1;\n  lineWidth = 1;\n  activeSMask = null;\n  transferMaps = \"none\";\n  constructor(width, height) {\n    this.clipBox = new Float32Array([0, 0, width, height]);\n    this.minMax = MIN_MAX_INIT.slice();\n  }\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    clone.minMax = this.minMax.slice();\n    return clone;\n  }\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = this.minMax.slice();\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable(\"Stroke bounding box must include transform.\");\n      }\n      Util.singularValueDecompose2dScale(transform, XY);\n      const xStrokePad = XY[0] * this.lineWidth / 2;\n      const yStrokePad = XY[1] * this.lineWidth / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n  isEmptyClip() {\n    return this.minMax[0] === Infinity;\n  }\n  startNewPathAndClipBox(box) {\n    this.clipBox.set(box, 0);\n    this.minMax.set(MIN_MAX_INIT, 0);\n  }\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(this.clipBox, this.getPathBoundingBox(pathType, transform));\n  }\n}\nfunction putBinaryImageData(ctx, imgData) {\n  if (imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n  if (imgData.kind === util_ImageKind.GRAYSCALE_1BPP) {\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = width + 7 >> 3;\n    const white = 0xffffffff;\n    const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === util_ImageKind.RGBA_32BPP) {\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === util_ImageKind.RGB_24BPP) {\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n      destPos = 0;\n      for (j = elemsInThisChunk; j--;) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n    ({\n      srcPos\n    } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0\n    }));\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\"strokeStyle\", \"fillStyle\", \"fillRule\", \"globalAlpha\", \"lineWidth\", \"lineCap\", \"lineJoin\", \"miterLimit\", \"globalCompositeOperation\", \"font\", \"filter\"];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  const {\n    filter\n  } = ctx;\n  if (filter !== \"none\" && filter !== \"\") {\n    ctx.filter = \"none\";\n  }\n}\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  if (interpolate) {\n    return true;\n  }\n  Util.singularValueDecompose2dScale(transform, XY);\n  const actualScale = Math.fround(OutputScale.pixelRatio * PixelsPerInch.PDF_TO_CSS_UNITS);\n  return XY[0] <= actualScale && XY[1] <= actualScale;\n}\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\nclass CanvasGraphics {\n  constructor(canvasCtx, commonObjs, objs, canvasFactory, filterFactory, {\n    optionalContentConfig,\n    markedContentStack = null\n  }, annotationCanvasMap, pageColors) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n  getObject(data, fallback = null) {\n    if (typeof data === \"string\") {\n      return data.startsWith(\"g_\") ? this.commonObjs.get(data) : this.objs.get(data);\n    }\n    return fallback;\n  }\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null\n  }) {\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || \"#ffffff\";\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\"transparent\", width, height);\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n  executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n    if (argsArrayLen === i) {\n      return i;\n    }\n    const chunkOperations = argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n      fnId = fnArray[i];\n      if (fnId !== OPS.dependency) {\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n      i++;\n      if (i === argsArrayLen) {\n        return i;\n      }\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n    }\n  }\n  #restoreInitialState() {\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n    this.current.activeSMask = null;\n    this.ctx.restore();\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n  endDrawing() {\n    this.#restoreInitialState();\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (typeof HTMLCanvasElement !== \"undefined\" && canvas instanceof HTMLCanvasElement) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(this.pageColors.foreground, this.pageColors.background);\n      if (hcmFilterId !== \"none\") {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n  _scaleImage(img, inverseTransform) {\n    const width = img.width ?? img.displayWidth;\n    const height = img.height ?? img.displayHeight;\n    let widthScale = Math.max(Math.hypot(inverseTransform[0], inverseTransform[1]), 1);\n    let heightScale = Math.max(Math.hypot(inverseTransform[2], inverseTransform[3]), 1);\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (widthScale > 2 && paintWidth > 1 || heightScale > 2 && paintHeight > 1) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        newWidth = paintWidth >= 16384 ? Math.floor(paintWidth / 2) - 1 || 1 : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        newHeight = paintHeight >= 16384 ? Math.floor(paintHeight / 2) - 1 || 1 : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight);\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(img, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight\n    };\n  }\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const {\n      width,\n      height\n    } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      cacheKey = JSON.stringify(isPatternFill ? currentTransform : [currentTransform.slice(0, 4), fillColor]);\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(Math.min(currentTransform[0], currentTransform[2]) + currentTransform[4]);\n        const offsetY = Math.round(Math.min(currentTransform[1], currentTransform[3]) + currentTransform[5]);\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY\n        };\n      }\n      scaled = cachedImage;\n    }\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n    let maskToCanvas = Util.transform(currentTransform, [1 / width, 0, 0, -1 / height, 0, 0]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const minMax = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox([0, 0, width, height], maskToCanvas, minMax);\n    const [minX, minY, maxX, maxY] = minMax;\n    const drawnWidth = Math.round(maxX - minX) || 1;\n    const drawnHeight = Math.round(maxY - minY) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\"fillCanvas\", drawnWidth, drawnHeight);\n    const fillCtx = fillCanvas.context;\n    const offsetX = minX;\n    const offsetY = minY;\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n    if (!scaled) {\n      scaled = this._scaleImage(maskCanvas.canvas, getCurrentTransformInverse(fillCtx));\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(fillCtx), img.interpolate);\n    drawImageAtIntegerCoords(fillCtx, scaled, 0, 0, scaled.width, scaled.height, 0, 0, width, height);\n    fillCtx.globalCompositeOperation = \"source-in\";\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [1, 0, 0, 1, -offsetX, -offsetY]);\n    fillCtx.fillStyle = isPatternFill ? fillColor.getPattern(ctx, this, inverse, PathType.FILL) : fillColor;\n    fillCtx.fillRect(0, 0, width, height);\n    if (cache && !isPatternFill) {\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY)\n    };\n  }\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n  setRenderingIntent(intent) {}\n  setFlatness(flatness) {}\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(value);\n          break;\n        case \"LC\":\n          this.setLineCap(value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(value);\n          break;\n        case \"D\":\n          this.setDash(value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(value);\n          break;\n        case \"FL\":\n          this.setFlatness(value);\n          break;\n        case \"Font\":\n          this.setFont(value[0], value[1]);\n          break;\n        case \"CA\":\n          this.current.strokeAlpha = value;\n          break;\n        case \"ca\":\n          this.ctx.globalAlpha = this.current.fillAlpha = value;\n          break;\n        case \"BM\":\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.ctx.filter = this.current.transferMaps = this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n  }\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    this.suspendedCtx = this.ctx;\n    const ctx = this.ctx = scratchCanvas.context;\n    ctx.setTransform(this.suspendedCtx.getTransform());\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n    this.setGState([[\"BM\", \"source-over\"]]);\n  }\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n    this.suspendedCtx = null;\n  }\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n    this.composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n  composeSMask(ctx, smask, layerCtx, layerBox) {\n    const layerOffsetX = layerBox[0];\n    const layerOffsetY = layerBox[1];\n    const layerWidth = layerBox[2] - layerOffsetX;\n    const layerHeight = layerBox[3] - layerOffsetY;\n    if (layerWidth === 0 || layerHeight === 0) {\n      return;\n    }\n    this.genericComposeSMask(smask.context, layerCtx, layerWidth, layerHeight, smask.subtype, smask.backdrop, smask.transferMap, layerOffsetX, layerOffsetY, smask.offsetX, smask.offsetY);\n    ctx.save();\n    ctx.globalAlpha = 1;\n    ctx.globalCompositeOperation = \"source-over\";\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(layerCtx.canvas, 0, 0);\n    ctx.restore();\n  }\n  genericComposeSMask(maskCtx, layerCtx, width, height, subtype, backdrop, transferMap, layerOffsetX, layerOffsetY, maskOffsetX, maskOffsetY) {\n    let maskCanvas = maskCtx.canvas;\n    let maskX = layerOffsetX - maskOffsetX;\n    let maskY = layerOffsetY - maskOffsetY;\n    if (backdrop) {\n      const backdropRGB = Util.makeHexColor(...backdrop);\n      if (maskX < 0 || maskY < 0 || maskX + width > maskCanvas.width || maskY + height > maskCanvas.height) {\n        const canvas = this.cachedCanvases.getCanvas(\"maskExtension\", width, height);\n        const ctx = canvas.context;\n        ctx.drawImage(maskCanvas, -maskX, -maskY);\n        ctx.globalCompositeOperation = \"destination-atop\";\n        ctx.fillStyle = backdropRGB;\n        ctx.fillRect(0, 0, width, height);\n        ctx.globalCompositeOperation = \"source-over\";\n        maskCanvas = canvas.canvas;\n        maskX = maskY = 0;\n      } else {\n        maskCtx.save();\n        maskCtx.globalAlpha = 1;\n        maskCtx.setTransform(1, 0, 0, 1, 0, 0);\n        const clip = new Path2D();\n        clip.rect(maskX, maskY, width, height);\n        maskCtx.clip(clip);\n        maskCtx.globalCompositeOperation = \"destination-atop\";\n        maskCtx.fillStyle = backdropRGB;\n        maskCtx.fillRect(maskX, maskY, width, height);\n        maskCtx.restore();\n      }\n    }\n    layerCtx.save();\n    layerCtx.globalAlpha = 1;\n    layerCtx.setTransform(1, 0, 0, 1, 0, 0);\n    if (subtype === \"Alpha\" && transferMap) {\n      layerCtx.filter = this.filterFactory.addAlphaFilter(transferMap);\n    } else if (subtype === \"Luminosity\") {\n      layerCtx.filter = this.filterFactory.addLuminosityFilter(transferMap);\n    }\n    const clip = new Path2D();\n    clip.rect(layerOffsetX, layerOffsetY, width, height);\n    layerCtx.clip(clip);\n    layerCtx.globalCompositeOperation = \"destination-in\";\n    layerCtx.drawImage(maskCanvas, maskX, maskY, width, height, layerOffsetX, layerOffsetY, width, height);\n    layerCtx.restore();\n  }\n  save() {\n    if (this.inSMaskMode) {\n      copyCtxState(this.ctx, this.suspendedCtx);\n    }\n    this.ctx.save();\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n  restore() {\n    if (this.stateStack.length === 0) {\n      if (this.inSMaskMode) {\n        this.endSMaskMode();\n      }\n      return;\n    }\n    this.current = this.stateStack.pop();\n    this.ctx.restore();\n    if (this.inSMaskMode) {\n      copyCtxState(this.suspendedCtx, this.ctx);\n    }\n    this.checkSMaskState();\n    this.pendingClip = null;\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  constructPath(op, data, minMax) {\n    let [path] = data;\n    if (!minMax) {\n      path ||= data[0] = new Path2D();\n      this[op](path);\n      return;\n    }\n    if (!(path instanceof Path2D)) {\n      const path2d = data[0] = new Path2D();\n      for (let i = 0, ii = path.length; i < ii;) {\n        switch (path[i++]) {\n          case DrawOPS.moveTo:\n            path2d.moveTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.lineTo:\n            path2d.lineTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.curveTo:\n            path2d.bezierCurveTo(path[i++], path[i++], path[i++], path[i++], path[i++], path[i++]);\n            break;\n          case DrawOPS.closePath:\n            path2d.closePath();\n            break;\n          default:\n            warn(`Unrecognized drawing path operator: ${path[i - 1]}`);\n            break;\n        }\n      }\n      path = path2d;\n    }\n    Util.axialAlignedBoundingBox(minMax, getCurrentTransform(this.ctx), this.current.minMax);\n    this[op](path);\n  }\n  closePath() {\n    this.ctx.closePath();\n  }\n  stroke(path, consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        const baseTransform = strokeColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);\n        if (baseTransform) {\n          const newPath = new Path2D();\n          newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));\n          path = newPath;\n        }\n        this.rescaleAndStroke(path, false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(path, true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(path, this.current.getClippedPathBoundingBox(PathType.STROKE, getCurrentTransform(this.ctx)));\n    }\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n  closeStroke(path) {\n    this.stroke(path);\n  }\n  fill(path, consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n    if (isPatternFill) {\n      const baseTransform = fillColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      if (baseTransform) {\n        const newPath = new Path2D();\n        newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));\n        path = newPath;\n      }\n      needRestore = true;\n    }\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(path, \"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill(path);\n      }\n    }\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(path, intersect);\n    }\n  }\n  eoFill(path) {\n    this.pendingEOFill = true;\n    this.fill(path);\n  }\n  fillStroke(path) {\n    this.fill(path, false);\n    this.stroke(path, false);\n    this.consumePath(path);\n  }\n  eoFillStroke(path) {\n    this.pendingEOFill = true;\n    this.fillStroke(path);\n  }\n  closeFillStroke(path) {\n    this.fillStroke(path);\n  }\n  closeEOFillStroke(path) {\n    this.pendingEOFill = true;\n    this.fillStroke(path);\n  }\n  endPath(path) {\n    this.consumePath(path);\n  }\n  rawFillPath(path) {\n    this.ctx.fill(path);\n  }\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n  beginText() {\n    this.current.textMatrix = null;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      return;\n    }\n    const newPath = new Path2D();\n    const invTransf = ctx.getTransform().invertSelf();\n    for (const {\n      transform,\n      x,\n      y,\n      fontSize,\n      path\n    } of paths) {\n      newPath.addPath(path, new DOMMatrix(transform).preMultiplySelf(invTransf).translate(x, y).scale(fontSize, -fontSize));\n    }\n    ctx.clip(newPath);\n    delete this.pendingTextPaths;\n  }\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn(\"Invalid font matrix for font \" + fontRefName);\n    }\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n    if (fontObj.isType3Font) {\n      return;\n    }\n    const name = fontObj.loadedName || \"sans-serif\";\n    const typeface = fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n  setTextMatrix(matrix) {\n    const {\n      current\n    } = this;\n    current.textMatrix = matrix;\n    current.textMatrixScale = Math.hypot(matrix[0], matrix[1]);\n    current.x = current.lineX = 0;\n    current.y = current.lineY = 0;\n  }\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n  #getScaledPath(path, currentTransform, transform) {\n    const newPath = new Path2D();\n    newPath.addPath(path, new DOMMatrix(transform).invertSelf().multiplySelf(currentTransform));\n    return newPath;\n  }\n  paintChar(character, x, y, patternFillTransform, patternStrokeTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode = textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG);\n    const patternFill = current.patternFill && !font.missingFile;\n    const patternStroke = current.patternStroke && !font.missingFile;\n    let path;\n    if (font.disableFontFace || isAddToPathSet || patternFill || patternStroke) {\n      path = font.getPathGenerator(this.commonObjs, character);\n    }\n    if (font.disableFontFace || patternFill || patternStroke) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.scale(fontSize, -fontSize);\n      let currentTransform;\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (patternFillTransform) {\n          currentTransform = ctx.getTransform();\n          ctx.setTransform(...patternFillTransform);\n          ctx.fill(this.#getScaledPath(path, currentTransform, patternFillTransform));\n        } else {\n          ctx.fill(path);\n        }\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (patternStrokeTransform) {\n          currentTransform ||= ctx.getTransform();\n          ctx.setTransform(...patternStrokeTransform);\n          const {\n            a,\n            b,\n            c,\n            d\n          } = currentTransform;\n          const invPatternTransform = Util.inverseTransform(patternStrokeTransform);\n          const transf = Util.transform([a, b, c, d, 0, 0], invPatternTransform);\n          Util.singularValueDecompose2dScale(transf, XY);\n          ctx.lineWidth *= Math.max(XY[0], XY[1]) / fontSize;\n          ctx.stroke(this.#getScaledPath(path, currentTransform, patternStrokeTransform));\n        } else {\n          ctx.lineWidth /= fontSize;\n          ctx.stroke(path);\n        }\n      }\n      ctx.restore();\n    } else {\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.fillText(character, x, y);\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n    if (isAddToPathSet) {\n      const paths = this.pendingTextPaths ||= [];\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        path\n      });\n    }\n  }\n  get isFontSubpixelAAEnabled() {\n    const {\n      context: ctx\n    } = this.cachedCanvases.getCanvas(\"isFontSubpixelAAEnabled\", 10, 10);\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n    const simpleFillText = current.textRenderingMode === TextRenderingMode.FILL && !font.disableFontFace && !current.patternFill;\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n    let patternFillTransform, patternStrokeTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      patternFillTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n    if (current.patternStroke) {\n      ctx.save();\n      const pattern = current.strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);\n      patternStrokeTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.strokeStyle = pattern;\n    }\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode = current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n    ctx.lineWidth = lineWidth;\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      ctx.fillText(chars.join(\"\"), 0, 0);\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n      return undefined;\n    }\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += spacingDir * glyph * fontSize / 1000;\n        continue;\n      }\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx = -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n      if (font.remeasure && width > 0) {\n        const measuredWidth = ctx.measureText(character).width * 1000 / fontSize * fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX += (width - measuredWidth) / 2000 * fontSize / fontSizeScale;\n        }\n      }\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternFillTransform, patternStrokeTransform);\n          if (accent) {\n            const scaledAccentX = scaledX + fontSize * accent.offset.x / fontSizeScale;\n            const scaledAccentY = scaledY - fontSize * accent.offset.y / fontSizeScale;\n            this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY, patternFillTransform, patternStrokeTransform);\n          }\n        }\n      }\n      const charWidth = vertical ? width * widthAdvanceScale - spacing * fontDirection : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n    return undefined;\n  }\n  showType3Text(glyphs) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible = current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n    ctx.scale(textHScale, fontDirection);\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = spacingDir * glyph * fontSize / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n      } else if (this.contentVisible) {\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n      const p = [glyph.width, 0];\n      Util.applyTransform(p, fontMatrix);\n      width = p[0] * fontSize + spacing;\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n  }\n  setCharWidth(xWidth, yWidth) {}\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    const clip = new Path2D();\n    clip.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip(clip);\n    this.endPath();\n  }\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: ctx => new CanvasGraphics(ctx, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n          optionalContentConfig: this.optionalContentConfig,\n          markedContentStack: this.markedContentStack\n        })\n      };\n      pattern = new TilingPattern(IR, this.ctx, canvasGraphicsFactory, baseTransform);\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n    this.current.patternStroke = true;\n  }\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n  setStrokeRGBColor(r, g, b) {\n    this.ctx.strokeStyle = this.current.strokeColor = Util.makeHexColor(r, g, b);\n    this.current.patternStroke = false;\n  }\n  setStrokeTransparent() {\n    this.ctx.strokeStyle = this.current.strokeColor = \"transparent\";\n    this.current.patternStroke = false;\n  }\n  setFillRGBColor(r, g, b) {\n    this.ctx.fillStyle = this.current.fillColor = Util.makeHexColor(r, g, b);\n    this.current.patternFill = false;\n  }\n  setFillTransparent() {\n    this.ctx.fillStyle = this.current.fillColor = \"transparent\";\n    this.current.patternFill = false;\n  }\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.SHADING);\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const {\n        width,\n        height\n      } = ctx.canvas;\n      const minMax = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, width, height], inv, minMax);\n      const [x0, y0, x1, y1] = minMax;\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n  beginInlineImage() {\n    unreachable(\"Should not call beginInlineImage\");\n  }\n  beginImageData() {\n    unreachable(\"Should not call beginImageData\");\n  }\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n    if (matrix) {\n      this.transform(...matrix);\n    }\n    this.baseTransform = getCurrentTransform(this.ctx);\n    if (bbox) {\n      Util.axialAlignedBoundingBox(bbox, this.baseTransform, this.current.minMax);\n      const [x0, y0, x1, y1] = bbox;\n      const clip = new Path2D();\n      clip.rect(x0, y0, x1 - x0, y1 - y0);\n      this.ctx.clip(clip);\n      this.endPath();\n    }\n  }\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n    const currentCtx = this.ctx;\n    if (!group.isolated) {\n      info(\"TODO: Support non-isolated groups.\");\n    }\n    if (group.knockout) {\n      warn(\"Knockout groups not supported.\");\n    }\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n    let bounds = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox(group.bbox, getCurrentTransform(currentCtx), bounds);\n    const canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    const drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    const drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      cacheId += \"_smask_\" + this.smaskCounter++ % 2;\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    const groupCtx = scratchCanvas.context;\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n    let clip = new Path2D();\n    const [x0, y0, x1, y1] = group.bbox;\n    clip.rect(x0, y0, x1 - x0, y1 - y0);\n    if (group.matrix) {\n      const path = new Path2D();\n      path.addPath(clip, new DOMMatrix(group.matrix));\n      clip = path;\n    }\n    groupCtx.clip(clip);\n    if (group.smask) {\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null\n      });\n    } else {\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.save();\n    }\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([[\"BM\", \"source-over\"], [\"ca\", 1], [\"CA\", 1]]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    this.ctx.imageSmoothingEnabled = false;\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, groupCtx.canvas.width, groupCtx.canvas.height], currentMtx, dirtyBox);\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n    this.ctx.save();\n    this.save();\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n    if (rect) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n        Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx), XY);\n        const {\n          viewportScale\n        } = this;\n        const canvasWidth = Math.ceil(width * this.outputScaleX * viewportScale);\n        const canvasHeight = Math.ceil(height * this.outputScaleY * viewportScale);\n        this.annotationCanvas = this.canvasFactory.create(canvasWidth, canvasHeight);\n        const {\n          canvas,\n          context\n        } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(XY[0], 0, 0, -XY[1], 0, height * XY[1]);\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n        this.endPath();\n        const clip = new Path2D();\n        clip.rect(rect[0], rect[1], width, height);\n        this.ctx.clip(clip);\n      }\n    }\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.transform(...transform);\n    this.transform(...matrix);\n  }\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n    const ctx = this.ctx;\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n    ctx.save();\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectRepeat(img, scaleX, skewX = 0, skewY = 0, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    img = this.getObject(img.data, img);\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n    ctx.setTransform(1, 0, 0, 1, mask.offsetX - currentTransform[4], mask.offsetY - currentTransform[5]);\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [scaleX, skewX, skewY, scaleY, positions[i], positions[i + 1]]);\n      ctx.drawImage(mask.canvas, trans[4], trans[5]);\n    }\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    for (const image of images) {\n      const {\n        data,\n        width,\n        height,\n        transform\n      } = image;\n      const maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n      const img = this.getObject(data, image);\n      putBinaryImageMask(maskCtx, img);\n      maskCtx.globalCompositeOperation = \"source-in\";\n      maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this, getCurrentTransformInverse(ctx), PathType.FILL) : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n      maskCtx.restore();\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    this.paintInlineImageXObject(imgData);\n  }\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== \"none\") {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = \"none\";\n    }\n    return ctx.canvas;\n  }\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === \"none\") {\n      return imgData.bitmap;\n    }\n    const {\n      bitmap,\n      width,\n      height\n    } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = \"none\";\n    return tmpCanvas.canvas;\n  }\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n    this.save();\n    const {\n      filter\n    } = ctx;\n    if (filter !== \"none\" && filter !== \"\") {\n      ctx.filter = \"none\";\n    }\n    ctx.scale(1 / width, -1 / height);\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement || !imgData.data) {\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    const scaled = this._scaleImage(imgToPaint, getCurrentTransformInverse(ctx));\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(ctx), imgData.interpolate);\n    drawImageAtIntegerCoords(ctx, scaled.img, 0, 0, scaled.paintWidth, scaled.paintHeight, 0, -height, width, height);\n    this.compose();\n    this.restore();\n  }\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, imgToPaint, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n  markPoint(tag) {}\n  markPointProps(tag, properties) {}\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true\n    });\n  }\n  beginMarkedContentProps(tag, properties) {\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties)\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n  beginCompat() {}\n  endCompat() {}\n  consumePath(path, clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(path, \"evenodd\");\n        } else {\n          ctx.clip(path);\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n  }\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        this._cachedGetSinglePixelWidth = 1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n  getScaleForStroking() {\n    if (this._cachedScaleForStroking[0] === -1) {\n      const {\n        lineWidth\n      } = this.current;\n      const {\n        a,\n        b,\n        c,\n        d\n      } = this.ctx.getTransform();\n      let scaleX, scaleY;\n      if (b === 0 && c === 0) {\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n  rescaleAndStroke(path, saveRestore) {\n    const {\n      ctx,\n      current: {\n        lineWidth\n      }\n    } = this;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n    if (scaleX === scaleY) {\n      ctx.lineWidth = (lineWidth || 1) * scaleX;\n      ctx.stroke(path);\n      return;\n    }\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n    ctx.scale(scaleX, scaleY);\n    SCALE_MATRIX.a = 1 / scaleX;\n    SCALE_MATRIX.d = 1 / scaleY;\n    const newPath = new Path2D();\n    newPath.addPath(path, SCALE_MATRIX);\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map(x => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n    ctx.lineWidth = lineWidth || 1;\n    ctx.stroke(newPath);\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\n;// ./src/display/worker_options.js\nclass GlobalWorkerOptions {\n  static #port = null;\n  static #src = \"\";\n  static get workerPort() {\n    return this.#port;\n  }\n  static set workerPort(val) {\n    if (!(typeof Worker !== \"undefined\" && val instanceof Worker) && val !== null) {\n      throw new Error(\"Invalid `workerPort` type.\");\n    }\n    this.#port = val;\n  }\n  static get workerSrc() {\n    return this.#src;\n  }\n  static set workerSrc(val) {\n    if (typeof val !== \"string\") {\n      throw new Error(\"Invalid `workerSrc` type.\");\n    }\n    this.#src = val;\n  }\n}\n\n;// ./src/display/metadata.js\nclass Metadata {\n  #map;\n  #data;\n  constructor({\n    parsedData,\n    rawData\n  }) {\n    this.#map = parsedData;\n    this.#data = rawData;\n  }\n  getRaw() {\n    return this.#data;\n  }\n  get(name) {\n    return this.#map.get(name) ?? null;\n  }\n  [Symbol.iterator]() {\n    return this.#map.entries();\n  }\n}\n\n;// ./src/display/optional_content_config.js\n\n\nconst INTERNAL = Symbol(\"INTERNAL\");\nclass OptionalContentGroup {\n  #isDisplay = false;\n  #isPrint = false;\n  #userSet = false;\n  #visible = true;\n  constructor(renderingIntent, {\n    name,\n    intent,\n    usage,\n    rbGroups\n  }) {\n    this.#isDisplay = !!(renderingIntent & RenderingIntentFlag.DISPLAY);\n    this.#isPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    this.name = name;\n    this.intent = intent;\n    this.usage = usage;\n    this.rbGroups = rbGroups;\n  }\n  get visible() {\n    if (this.#userSet) {\n      return this.#visible;\n    }\n    if (!this.#visible) {\n      return false;\n    }\n    const {\n      print,\n      view\n    } = this.usage;\n    if (this.#isDisplay) {\n      return view?.viewState !== \"OFF\";\n    } else if (this.#isPrint) {\n      return print?.printState !== \"OFF\";\n    }\n    return true;\n  }\n  _setVisible(internal, visible, userSet = false) {\n    if (internal !== INTERNAL) {\n      unreachable(\"Internal method `_setVisible` called.\");\n    }\n    this.#userSet = userSet;\n    this.#visible = visible;\n  }\n}\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n  #groups = new Map();\n  #initialHash = null;\n  #order = null;\n  constructor(data, renderingIntent = RenderingIntentFlag.DISPLAY) {\n    this.renderingIntent = renderingIntent;\n    this.name = null;\n    this.creator = null;\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(group.id, new OptionalContentGroup(renderingIntent, group));\n    }\n    if (data.baseState === \"OFF\") {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n    this.#initialHash = this.getHash();\n  }\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      info(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n  setVisibility(id, visible = true, preserveRB = true) {\n    const group = this.#groups.get(id);\n    if (!group) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    if (preserveRB && visible && group.rbGroups.length) {\n      for (const rbGroup of group.rbGroups) {\n        for (const otherId of rbGroup) {\n          if (otherId !== id) {\n            this.#groups.get(otherId)?._setVisible(INTERNAL, false, true);\n          }\n        }\n      }\n    }\n    group._setVisible(INTERNAL, !!visible, true);\n    this.#cachedGetHash = null;\n  }\n  setOCGState({\n    state,\n    preserveRB\n  }) {\n    let operator;\n    for (const elem of state) {\n      switch (elem) {\n        case \"ON\":\n        case \"OFF\":\n        case \"Toggle\":\n          operator = elem;\n          continue;\n      }\n      const group = this.#groups.get(elem);\n      if (!group) {\n        continue;\n      }\n      switch (operator) {\n        case \"ON\":\n          this.setVisibility(elem, true, preserveRB);\n          break;\n        case \"OFF\":\n          this.setVisibility(elem, false, preserveRB);\n          break;\n        case \"Toggle\":\n          this.setVisibility(elem, !group.visible, preserveRB);\n          break;\n      }\n    }\n    this.#cachedGetHash = null;\n  }\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return this.#cachedGetHash = hash.hexdigest();\n  }\n  [Symbol.iterator]() {\n    return this.#groups.entries();\n  }\n}\n\n;// ./src/display/transport_stream.js\n\n\nclass PDFDataTransportStream {\n  constructor(pdfDataRangeTransport, {\n    disableRange = false,\n    disableStream = false\n  }) {\n    assert(pdfDataRangeTransport, 'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.');\n    const {\n      length,\n      initialData,\n      progressiveDone,\n      contentDispositionFilename\n    } = pdfDataRangeTransport;\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n    if (initialData?.length > 0) {\n      const buffer = initialData instanceof Uint8Array && initialData.byteLength === initialData.buffer.byteLength ? initialData.buffer : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n    pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({\n        begin,\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({\n        loaded,\n        total\n      });\n    });\n    pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n    pdfDataRangeTransport.transportReady();\n  }\n  _onReceiveData({\n    begin,\n    chunk\n  }) {\n    const buffer = chunk instanceof Uint8Array && chunk.byteLength === chunk.buffer.byteLength ? chunk.buffer : new Uint8Array(chunk).buffer;\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(found, \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\");\n    }\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      this._rangeReaders[0]?.onProgress?.({\n        loaded: evt.loaded\n      });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total\n      });\n    }\n  }\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFDataTransportStream.getFullReader can only be called once.\");\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(this, queuedChunks, this._progressiveDone, this._contentDispositionFilename);\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\nclass PDFDataTransportStreamReader {\n  constructor(stream, queuedChunks, progressiveDone = false, contentDispositionFilename = null) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename) ? contentDispositionFilename : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n  get headersReady() {\n    return this._headersReady;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({\n        value: chunk,\n        done: false\n      });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({\n          value: undefined,\n          done: true\n        });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\n;// ./src/display/content_disposition.js\n\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\"(?:^|;)\\\\s*\" + attributePattern + \"\\\\s*=\\\\s*\" + \"(\" + '[^\";\\\\s][^;\\\\s]*' + \"|\" + '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' + \")\", flags);\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {}\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match;\n      n = parseInt(n, 10);\n      if (n in matches) {\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        break;\n      }\n      let [quot, part] = matches[n];\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1;\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    return value.replaceAll(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g, function (matches, charset, encoding, text) {\n      if (encoding === \"q\" || encoding === \"Q\") {\n        text = text.replaceAll(\"_\", \" \");\n        text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n          return String.fromCharCode(parseInt(hex, 16));\n        });\n        return textdecode(charset, text);\n      }\n      try {\n        text = atob(text);\n      } catch {}\n      return textdecode(charset, text);\n    });\n  }\n  return \"\";\n}\n\n;// ./src/display/network_utils.js\n\n\n\nfunction createHeaders(isHttp, httpHeaders) {\n  const headers = new Headers();\n  if (!isHttp || !httpHeaders || typeof httpHeaders !== \"object\") {\n    return headers;\n  }\n  for (const key in httpHeaders) {\n    const val = httpHeaders[key];\n    if (val !== undefined) {\n      headers.append(key, val);\n    }\n  }\n  return headers;\n}\nfunction getResponseOrigin(url) {\n  return URL.parse(url)?.origin ?? null;\n}\nfunction validateRangeRequestCapabilities({\n  responseHeaders,\n  isHttp,\n  rangeChunkSize,\n  disableRange\n}) {\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined\n  };\n  const length = parseInt(responseHeaders.get(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n  returnValues.suggestedLength = length;\n  if (length <= 2 * rangeChunkSize) {\n    return returnValues;\n  }\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (responseHeaders.get(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n  const contentEncoding = responseHeaders.get(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\nfunction extractFilenameFromHeader(responseHeaders) {\n  const contentDisposition = responseHeaders.get(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\nfunction createResponseError(status, url) {\n  return new ResponseException(`Unexpected server response (${status}) while retrieving PDF \"${url}\".`, status, status === 404 || status === 0 && url.startsWith(\"file:\"));\n}\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\n;// ./src/display/fetch_stream.js\n\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\"\n  };\n}\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\nclass PDFFetchStream {\n  _responseOrigin = null;\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.headers = createHeaders(this.isHttp, source.httpHeaders);\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFFetchStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    const headers = new Headers(stream.headers);\n    const url = source.url;\n    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then(response => {\n      stream._responseOrigin = getResponseOrigin(response.url);\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseError(response.status, url);\n      }\n      this._reader = response.body.getReader();\n      this._headersCapability.resolve();\n      const responseHeaders = response.headers;\n      const {\n        allowRangeRequests,\n        suggestedLength\n      } = validateRangeRequestCapabilities({\n        responseHeaders,\n        isHttp: stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange\n      });\n      this._isRangeSupported = allowRangeRequests;\n      this._contentLength = suggestedLength || this._contentLength;\n      this._filename = extractFilenameFromHeader(responseHeaders);\n      if (!this._isStreamingSupported && this._isRangeSupported) {\n        this.cancel(new AbortException(\"Streaming is disabled.\"));\n      }\n    }).catch(this._headersCapability.reject);\n    this.onProgress = null;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = Promise.withResolvers();\n    this._isStreamingSupported = !source.disableStream;\n    this._abortController = new AbortController();\n    const headers = new Headers(stream.headers);\n    headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n    const url = source.url;\n    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then(response => {\n      const responseOrigin = getResponseOrigin(response.url);\n      if (responseOrigin !== stream._responseOrigin) {\n        throw new Error(`Expected range response-origin \"${responseOrigin}\" to match \"${stream._responseOrigin}\".`);\n      }\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseError(response.status, url);\n      }\n      this._readCapability.resolve();\n      this._reader = response.body.getReader();\n    }).catch(this._readCapability.reject);\n    this.onProgress = null;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\n;// ./src/display/network.js\n\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\nfunction network_getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\nclass NetworkManager {\n  _responseOrigin = null;\n  constructor({\n    url,\n    httpHeaders,\n    withCredentials\n  }) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.headers = createHeaders(this.isHttp, httpHeaders);\n    this.withCredentials = withCredentials || false;\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = this.pendingRequests[xhrId] = {\n      xhr\n    };\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const [key, val] of this.headers) {\n      xhr.setRequestHeader(key, val);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n    assert(args.onError, \"Expected `onError` callback to be provided.\");\n    xhr.onerror = () => {\n      args.onError(xhr.status);\n    };\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n    xhr.send(null);\n    return xhrId;\n  }\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n    if (xhr.readyState !== 4) {\n      return;\n    }\n    if (!(xhrId in this.pendingRequests)) {\n      return;\n    }\n    delete this.pendingRequests[xhrId];\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n    const ok_response_on_range_request = xhrStatus === OK_RESPONSE && pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n    if (!ok_response_on_range_request && xhrStatus !== pendingRequest.expectedStatus) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const chunk = network_getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      if (matches) {\n        pendingRequest.onDone({\n          begin: parseInt(matches[1], 10),\n          chunk\n        });\n      } else {\n        warn(`Missing or invalid \"Content-Range\" header.`);\n        pendingRequest.onError(0);\n      }\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk\n      });\n    } else {\n      pendingRequest.onError(xhr.status);\n    }\n  }\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source);\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNetworkStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(this._manager, this._source);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(this._manager, begin, end);\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n    this._url = source.url;\n    this._fullRequestId = manager.request({\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    });\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n    this.onProgress = null;\n  }\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n    this._manager._responseOrigin = getResponseOrigin(fullRequestXhr.responseURL);\n    const rawResponseHeaders = fullRequestXhr.getAllResponseHeaders();\n    const responseHeaders = new Headers(rawResponseHeaders ? rawResponseHeaders.trimStart().replace(/[^\\S ]+$/, \"\").split(/[\\r\\n]+/).map(x => {\n      const [key, ...val] = x.split(\": \");\n      return [key, val.join(\": \")];\n    }) : []);\n    const {\n      allowRangeRequests,\n      suggestedLength\n    } = validateRangeRequestCapabilities({\n      responseHeaders,\n      isHttp: this._manager.isHttp,\n      rangeChunkSize: this._rangeChunkSize,\n      disableRange: this._disableRange\n    });\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    this._contentLength = suggestedLength || this._contentLength;\n    this._filename = extractFilenameFromHeader(responseHeaders);\n    if (this._isRangeSupported) {\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n    this._headersCapability.resolve();\n  }\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({\n          value: data.chunk,\n          done: false\n        });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  _onError(status) {\n    this._storedError = createResponseError(status, this._url);\n    this._headersCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength\n    });\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    this._headersCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n    this._url = manager.url;\n    this._requestId = manager.request({\n      begin,\n      end,\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    });\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n  _onHeadersReceived() {\n    const responseOrigin = getResponseOrigin(this._manager.getRequestXhr(this._requestId)?.responseURL);\n    if (responseOrigin !== this._manager._responseOrigin) {\n      this._storedError = new Error(`Expected range response-origin \"${responseOrigin}\" to match \"${this._manager._responseOrigin}\".`);\n      this._onError(0);\n    }\n  }\n  _close() {\n    this.onClosed?.(this);\n  }\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n  _onError(status) {\n    this._storedError ??= createResponseError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({\n        loaded: evt.loaded\n      });\n    }\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\n;// ./src/display/node_stream.js\n\n\nconst urlRegex = /^[a-z][a-z0-9\\-+.]+:/i;\nfunction parseUrlOrPath(sourceUrl) {\n  if (urlRegex.test(sourceUrl)) {\n    return new URL(sourceUrl);\n  }\n  const url = process.getBuiltinModule(\"url\");\n  return new URL(url.pathToFileURL(sourceUrl));\n}\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrlOrPath(source.url);\n    assert(this.url.protocol === \"file:\", \"PDFNodeStream only supports file:// URLs.\");\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNodeStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNodeStreamFsFullReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = new PDFNodeStreamFsRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNodeStreamFsFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length;\n    this._loaded = 0;\n    this._filename = null;\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    this._headersCapability = Promise.withResolvers();\n    const fs = process.getBuiltinModule(\"fs\");\n    fs.promises.lstat(this._url).then(stat => {\n      this._contentLength = stat.size;\n      this._setReadableStream(fs.createReadStream(this._url));\n      this._headersCapability.resolve();\n    }, error => {\n      if (error.code === \"ENOENT\") {\n        error = createResponseError(0, this._url.href);\n      }\n      this._storedError = error;\n      this._headersCapability.reject(error);\n    });\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nclass PDFNodeStreamFsRangeReader {\n  constructor(stream, start, end) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n    const fs = process.getBuiltinModule(\"fs\");\n    this._setReadableStream(fs.createReadStream(this._url, {\n      start,\n      end: end - 1\n    }));\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\n;// ./src/display/text_layer.js\n\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nclass TextLayer {\n  #capability = Promise.withResolvers();\n  #container = null;\n  #disableProcessItems = false;\n  #fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n  #lang = null;\n  #layoutTextParams = null;\n  #pageHeight = 0;\n  #pageWidth = 0;\n  #reader = null;\n  #rootContainer = null;\n  #rotation = 0;\n  #scale = 0;\n  #styleCache = Object.create(null);\n  #textContentItemsStr = [];\n  #textContentSource = null;\n  #textDivs = [];\n  #textDivProperties = new WeakMap();\n  #transform = null;\n  static #ascentCache = new Map();\n  static #canvasContexts = new Map();\n  static #canvasCtxFonts = new WeakMap();\n  static #minFontSize = null;\n  static #pendingTextLayers = new Set();\n  constructor({\n    textContentSource,\n    container,\n    viewport\n  }) {\n    if (textContentSource instanceof ReadableStream) {\n      this.#textContentSource = textContentSource;\n    } else if (typeof textContentSource === \"object\") {\n      this.#textContentSource = new ReadableStream({\n        start(controller) {\n          controller.enqueue(textContentSource);\n          controller.close();\n        }\n      });\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n    this.#container = this.#rootContainer = container;\n    this.#scale = viewport.scale * OutputScale.pixelRatio;\n    this.#rotation = viewport.rotation;\n    this.#layoutTextParams = {\n      div: null,\n      properties: null,\n      ctx: null\n    };\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    this.#transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this.#pageWidth = pageWidth;\n    this.#pageHeight = pageHeight;\n    TextLayer.#ensureMinFontSizeComputed();\n    setLayerDimensions(container, viewport);\n    this.#capability.promise.finally(() => {\n      TextLayer.#pendingTextLayers.delete(this);\n      this.#layoutTextParams = null;\n      this.#styleCache = null;\n    }).catch(() => {});\n  }\n  static get fontFamilyMap() {\n    const {\n      isWindows,\n      isFirefox\n    } = util_FeatureTest.platform;\n    return shadow(this, \"fontFamilyMap\", new Map([[\"sans-serif\", `${isWindows && isFirefox ? \"Calibri, \" : \"\"}sans-serif`], [\"monospace\", `${isWindows && isFirefox ? \"Lucida Console, \" : \"\"}monospace`]]));\n  }\n  render() {\n    const pump = () => {\n      this.#reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          this.#capability.resolve();\n          return;\n        }\n        this.#lang ??= value.lang;\n        Object.assign(this.#styleCache, value.styles);\n        this.#processItems(value.items);\n        pump();\n      }, this.#capability.reject);\n    };\n    this.#reader = this.#textContentSource.getReader();\n    TextLayer.#pendingTextLayers.add(this);\n    pump();\n    return this.#capability.promise;\n  }\n  update({\n    viewport,\n    onBefore = null\n  }) {\n    const scale = viewport.scale * OutputScale.pixelRatio;\n    const rotation = viewport.rotation;\n    if (rotation !== this.#rotation) {\n      onBefore?.();\n      this.#rotation = rotation;\n      setLayerDimensions(this.#rootContainer, {\n        rotation\n      });\n    }\n    if (scale !== this.#scale) {\n      onBefore?.();\n      this.#scale = scale;\n      const params = {\n        div: null,\n        properties: null,\n        ctx: TextLayer.#getCtx(this.#lang)\n      };\n      for (const div of this.#textDivs) {\n        params.properties = this.#textDivProperties.get(div);\n        params.div = div;\n        this.#layout(params);\n      }\n    }\n  }\n  cancel() {\n    const abortEx = new AbortException(\"TextLayer task cancelled.\");\n    this.#reader?.cancel(abortEx).catch(() => {});\n    this.#reader = null;\n    this.#capability.reject(abortEx);\n  }\n  get textDivs() {\n    return this.#textDivs;\n  }\n  get textContentItemsStr() {\n    return this.#textContentItemsStr;\n  }\n  #processItems(items) {\n    if (this.#disableProcessItems) {\n      return;\n    }\n    this.#layoutTextParams.ctx ??= TextLayer.#getCtx(this.#lang);\n    const textDivs = this.#textDivs,\n      textContentItemsStr = this.#textContentItemsStr;\n    for (const item of items) {\n      if (textDivs.length > MAX_TEXT_DIVS_TO_RENDER) {\n        warn(\"Ignoring additional textDivs for performance reasons.\");\n        this.#disableProcessItems = true;\n        return;\n      }\n      if (item.str === undefined) {\n        if (item.type === \"beginMarkedContentProps\" || item.type === \"beginMarkedContent\") {\n          const parent = this.#container;\n          this.#container = document.createElement(\"span\");\n          this.#container.classList.add(\"markedContent\");\n          if (item.id !== null) {\n            this.#container.setAttribute(\"id\", `${item.id}`);\n          }\n          parent.append(this.#container);\n        } else if (item.type === \"endMarkedContent\") {\n          this.#container = this.#container.parentNode;\n        }\n        continue;\n      }\n      textContentItemsStr.push(item.str);\n      this.#appendText(item);\n    }\n  }\n  #appendText(geom) {\n    const textDiv = document.createElement(\"span\");\n    const textDivProperties = {\n      angle: 0,\n      canvasWidth: 0,\n      hasText: geom.str !== \"\",\n      hasEOL: geom.hasEOL,\n      fontSize: 0\n    };\n    this.#textDivs.push(textDiv);\n    const tx = Util.transform(this.#transform, geom.transform);\n    let angle = Math.atan2(tx[1], tx[0]);\n    const style = this.#styleCache[geom.fontName];\n    if (style.vertical) {\n      angle += Math.PI / 2;\n    }\n    let fontFamily = this.#fontInspectorEnabled && style.fontSubstitution || style.fontFamily;\n    fontFamily = TextLayer.fontFamilyMap.get(fontFamily) || fontFamily;\n    const fontHeight = Math.hypot(tx[2], tx[3]);\n    const fontAscent = fontHeight * TextLayer.#getAscent(fontFamily, style, this.#lang);\n    let left, top;\n    if (angle === 0) {\n      left = tx[4];\n      top = tx[5] - fontAscent;\n    } else {\n      left = tx[4] + fontAscent * Math.sin(angle);\n      top = tx[5] - fontAscent * Math.cos(angle);\n    }\n    const scaleFactorStr = \"calc(var(--total-scale-factor) *\";\n    const divStyle = textDiv.style;\n    if (this.#container === this.#rootContainer) {\n      divStyle.left = `${(100 * left / this.#pageWidth).toFixed(2)}%`;\n      divStyle.top = `${(100 * top / this.#pageHeight).toFixed(2)}%`;\n    } else {\n      divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n      divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n    }\n    divStyle.fontSize = `${scaleFactorStr}${(TextLayer.#minFontSize * fontHeight).toFixed(2)}px)`;\n    divStyle.fontFamily = fontFamily;\n    textDivProperties.fontSize = fontHeight;\n    textDiv.setAttribute(\"role\", \"presentation\");\n    textDiv.textContent = geom.str;\n    textDiv.dir = geom.dir;\n    if (this.#fontInspectorEnabled) {\n      textDiv.dataset.fontName = style.fontSubstitutionLoadedName || geom.fontName;\n    }\n    if (angle !== 0) {\n      textDivProperties.angle = angle * (180 / Math.PI);\n    }\n    let shouldScaleText = false;\n    if (geom.str.length > 1) {\n      shouldScaleText = true;\n    } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n      const absScaleX = Math.abs(geom.transform[0]),\n        absScaleY = Math.abs(geom.transform[3]);\n      if (absScaleX !== absScaleY && Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5) {\n        shouldScaleText = true;\n      }\n    }\n    if (shouldScaleText) {\n      textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n    }\n    this.#textDivProperties.set(textDiv, textDivProperties);\n    this.#layoutTextParams.div = textDiv;\n    this.#layoutTextParams.properties = textDivProperties;\n    this.#layout(this.#layoutTextParams);\n    if (textDivProperties.hasText) {\n      this.#container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this.#container.append(br);\n    }\n  }\n  #layout(params) {\n    const {\n      div,\n      properties,\n      ctx\n    } = params;\n    const {\n      style\n    } = div;\n    let transform = \"\";\n    if (TextLayer.#minFontSize > 1) {\n      transform = `scale(${1 / TextLayer.#minFontSize})`;\n    }\n    if (properties.canvasWidth !== 0 && properties.hasText) {\n      const {\n        fontFamily\n      } = style;\n      const {\n        canvasWidth,\n        fontSize\n      } = properties;\n      TextLayer.#ensureCtxFont(ctx, fontSize * this.#scale, fontFamily);\n      const {\n        width\n      } = ctx.measureText(div.textContent);\n      if (width > 0) {\n        transform = `scaleX(${canvasWidth * this.#scale / width}) ${transform}`;\n      }\n    }\n    if (properties.angle !== 0) {\n      transform = `rotate(${properties.angle}deg) ${transform}`;\n    }\n    if (transform.length > 0) {\n      style.transform = transform;\n    }\n  }\n  static cleanup() {\n    if (this.#pendingTextLayers.size > 0) {\n      return;\n    }\n    this.#ascentCache.clear();\n    for (const {\n      canvas\n    } of this.#canvasContexts.values()) {\n      canvas.remove();\n    }\n    this.#canvasContexts.clear();\n  }\n  static #getCtx(lang = null) {\n    let ctx = this.#canvasContexts.get(lang ||= \"\");\n    if (!ctx) {\n      const canvas = document.createElement(\"canvas\");\n      canvas.className = \"hiddenCanvasElement\";\n      canvas.lang = lang;\n      document.body.append(canvas);\n      ctx = canvas.getContext(\"2d\", {\n        alpha: false,\n        willReadFrequently: true\n      });\n      this.#canvasContexts.set(lang, ctx);\n      this.#canvasCtxFonts.set(ctx, {\n        size: 0,\n        family: \"\"\n      });\n    }\n    return ctx;\n  }\n  static #ensureCtxFont(ctx, size, family) {\n    const cached = this.#canvasCtxFonts.get(ctx);\n    if (size === cached.size && family === cached.family) {\n      return;\n    }\n    ctx.font = `${size}px ${family}`;\n    cached.size = size;\n    cached.family = family;\n  }\n  static #ensureMinFontSizeComputed() {\n    if (this.#minFontSize !== null) {\n      return;\n    }\n    const div = document.createElement(\"div\");\n    div.style.opacity = 0;\n    div.style.lineHeight = 1;\n    div.style.fontSize = \"1px\";\n    div.style.position = \"absolute\";\n    div.textContent = \"X\";\n    document.body.append(div);\n    this.#minFontSize = div.getBoundingClientRect().height;\n    div.remove();\n  }\n  static #getAscent(fontFamily, style, lang) {\n    const cachedAscent = this.#ascentCache.get(fontFamily);\n    if (cachedAscent) {\n      return cachedAscent;\n    }\n    const ctx = this.#getCtx(lang);\n    ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;\n    this.#ensureCtxFont(ctx, DEFAULT_FONT_SIZE, fontFamily);\n    const metrics = ctx.measureText(\"\");\n    const ascent = metrics.fontBoundingBoxAscent;\n    const descent = Math.abs(metrics.fontBoundingBoxDescent);\n    ctx.canvas.width = ctx.canvas.height = 0;\n    let ratio = 0.8;\n    if (ascent) {\n      ratio = ascent / (ascent + descent);\n    } else {\n      if (util_FeatureTest.platform.isFirefox) {\n        warn(\"Enable the `dom.textMetrics.fontBoundingBox.enabled` preference \" + \"in `about:config` to improve TextLayer rendering.\");\n      }\n      if (style.ascent) {\n        ratio = style.ascent;\n      } else if (style.descent) {\n        ratio = 1 + style.descent;\n      }\n    }\n    this.#ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n}\n\n;// ./src/display/xfa_text.js\nclass XfaText {\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null)\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n  static shouldBuildText(name) {\n    return !(name === \"textarea\" || name === \"input\" || name === \"option\" || name === \"select\");\n  }\n}\n\n;// ./src/display/api.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_RANGE_CHUNK_SIZE = 65536;\nconst RENDERING_CANCELLED_TIMEOUT = 100;\nfunction getDocument(src = {}) {\n  if (typeof src === \"string\" || src instanceof URL) {\n    src = {\n      url: src\n    };\n  } else if (src instanceof ArrayBuffer || ArrayBuffer.isView(src)) {\n    src = {\n      data: src\n    };\n  }\n  const task = new PDFDocumentLoadingTask();\n  const {\n    docId\n  } = task;\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport = src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize = Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0 ? src.rangeChunkSize : DEFAULT_RANGE_CHUNK_SIZE;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  const docBaseUrl = typeof src.docBaseUrl === \"string\" && !isDataScheme(src.docBaseUrl) ? src.docBaseUrl : null;\n  const cMapUrl = getFactoryUrlProp(src.cMapUrl);\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || (isNodeJS ? NodeCMapReaderFactory : DOMCMapReaderFactory);\n  const iccUrl = getFactoryUrlProp(src.iccUrl);\n  const standardFontDataUrl = getFactoryUrlProp(src.standardFontDataUrl);\n  const StandardFontDataFactory = src.StandardFontDataFactory || (isNodeJS ? NodeStandardFontDataFactory : DOMStandardFontDataFactory);\n  const wasmUrl = getFactoryUrlProp(src.wasmUrl);\n  const WasmFactory = src.WasmFactory || (isNodeJS ? NodeWasmFactory : DOMWasmFactory);\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize = Number.isInteger(src.maxImageSize) && src.maxImageSize > -1 ? src.maxImageSize : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported = typeof src.isOffscreenCanvasSupported === \"boolean\" ? src.isOffscreenCanvasSupported : !isNodeJS;\n  const isImageDecoderSupported = typeof src.isImageDecoderSupported === \"boolean\" ? src.isImageDecoderSupported : !isNodeJS && (util_FeatureTest.platform.isFirefox || !globalThis.chrome);\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes) ? src.canvasMaxAreaInBytes : -1;\n  const disableFontFace = typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n  const CanvasFactory = src.CanvasFactory || (isNodeJS ? NodeCanvasFactory : DOMCanvasFactory);\n  const FilterFactory = src.FilterFactory || (isNodeJS ? NodeFilterFactory : DOMFilterFactory);\n  const enableHWA = src.enableHWA === true;\n  const useWasm = src.useWasm !== false;\n  const length = rangeTransport ? rangeTransport.length : src.length ?? NaN;\n  const useSystemFonts = typeof src.useSystemFonts === \"boolean\" ? src.useSystemFonts : !isNodeJS && !disableFontFace;\n  const useWorkerFetch = typeof src.useWorkerFetch === \"boolean\" ? src.useWorkerFetch : !!(CMapReaderFactory === DOMCMapReaderFactory && StandardFontDataFactory === DOMStandardFontDataFactory && WasmFactory === DOMWasmFactory && cMapUrl && standardFontDataUrl && wasmUrl && isValidFetchUrl(cMapUrl, document.baseURI) && isValidFetchUrl(standardFontDataUrl, document.baseURI) && isValidFetchUrl(wasmUrl, document.baseURI));\n  const styleElement = null;\n  setVerbosityLevel(verbosity);\n  const transportFactory = {\n    canvasFactory: new CanvasFactory({\n      ownerDocument,\n      enableHWA\n    }),\n    filterFactory: new FilterFactory({\n      docId,\n      ownerDocument\n    }),\n    cMapReaderFactory: useWorkerFetch ? null : new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked\n    }),\n    standardFontDataFactory: useWorkerFetch ? null : new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl\n    }),\n    wasmFactory: useWorkerFetch ? null : new WasmFactory({\n      baseUrl: wasmUrl\n    })\n  };\n  if (!worker) {\n    const workerParams = {\n      verbosity,\n      port: GlobalWorkerOptions.workerPort\n    };\n    worker = workerParams.port ? PDFWorker.fromPort(workerParams) : new PDFWorker(workerParams);\n    task._worker = worker;\n  }\n  const docParams = {\n    docId,\n    apiVersion: \"5.2.133\",\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      isImageDecoderSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      useWasm,\n      useWorkerFetch,\n      cMapUrl,\n      iccUrl,\n      standardFontDataUrl,\n      wasmUrl\n    }\n  };\n  const transportParams = {\n    ownerDocument,\n    pdfBug,\n    styleElement,\n    loadingParams: {\n      disableAutoFetch,\n      enableXfa\n    }\n  };\n  worker.promise.then(function () {\n    if (task.destroyed) {\n      throw new Error(\"Loading aborted\");\n    }\n    if (worker.destroyed) {\n      throw new Error(\"Worker was destroyed\");\n    }\n    const workerIdPromise = worker.messageHandler.sendWithPromise(\"GetDocRequest\", docParams, data ? [data.buffer] : null);\n    let networkStream;\n    if (rangeTransport) {\n      networkStream = new PDFDataTransportStream(rangeTransport, {\n        disableRange,\n        disableStream\n      });\n    } else if (!data) {\n      if (!url) {\n        throw new Error(\"getDocument - no `url` parameter provided.\");\n      }\n      let NetworkStream;\n      if (isNodeJS) {\n        if (isValidFetchUrl(url)) {\n          if (typeof fetch === \"undefined\" || typeof Response === \"undefined\" || !(\"body\" in Response.prototype)) {\n            throw new Error(\"getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.\");\n          }\n          NetworkStream = PDFFetchStream;\n        } else {\n          NetworkStream = PDFNodeStream;\n        }\n      } else {\n        NetworkStream = isValidFetchUrl(url) ? PDFFetchStream : PDFNetworkStream;\n      }\n      networkStream = new NetworkStream({\n        url,\n        length,\n        httpHeaders,\n        withCredentials,\n        rangeChunkSize,\n        disableRange,\n        disableStream\n      });\n    }\n    return workerIdPromise.then(workerId => {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n      if (worker.destroyed) {\n        throw new Error(\"Worker was destroyed\");\n      }\n      const messageHandler = new MessageHandler(docId, workerId, worker.port);\n      const transport = new WorkerTransport(messageHandler, task, networkStream, transportParams, transportFactory);\n      task._transport = transport;\n      messageHandler.send(\"Ready\", null);\n    });\n  }).catch(task._capability.reject);\n  return task;\n}\nfunction getUrlProp(val) {\n  if (val instanceof URL) {\n    return val.href;\n  }\n  if (typeof val === \"string\") {\n    if (isNodeJS) {\n      return val;\n    }\n    const url = URL.parse(val, window.location);\n    if (url) {\n      return url.href;\n    }\n  }\n  throw new Error(\"Invalid PDF url data: \" + \"either string or URL-object is expected in the url property.\");\n}\nfunction getDataProp(val) {\n  if (isNodeJS && typeof Buffer !== \"undefined\" && val instanceof Buffer) {\n    throw new Error(\"Please provide binary data as `Uint8Array`, rather than `Buffer`.\");\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    return val;\n  }\n  if (typeof val === \"string\") {\n    return stringToBytes(val);\n  }\n  if (val instanceof ArrayBuffer || ArrayBuffer.isView(val) || typeof val === \"object\" && !isNaN(val?.length)) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\"Invalid PDF binary data: either TypedArray, \" + \"string, or array-like object is expected in the data property.\");\n}\nfunction getFactoryUrlProp(val) {\n  if (typeof val !== \"string\") {\n    return null;\n  }\n  if (val.endsWith(\"/\")) {\n    return val;\n  }\n  throw new Error(`Invalid factory url: \"${val}\" must include trailing slash.`);\n}\nconst isRefProxy = v => typeof v === \"object\" && Number.isInteger(v?.num) && v.num >= 0 && Number.isInteger(v?.gen) && v.gen >= 0;\nconst isNameProxy = v => typeof v === \"object\" && typeof v?.name === \"string\";\nconst isValidExplicitDest = _isValidExplicitDest.bind(null, isRefProxy, isNameProxy);\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n  _capability = Promise.withResolvers();\n  _transport = null;\n  _worker = null;\n  docId = `d${PDFDocumentLoadingTask.#docId++}`;\n  destroyed = false;\n  onPassword = null;\n  onProgress = null;\n  get promise() {\n    return this._capability.promise;\n  }\n  async destroy() {\n    this.destroyed = true;\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n    this._transport = null;\n    this._worker?.destroy();\n    this._worker = null;\n  }\n  async getData() {\n    return this._transport.getData();\n  }\n}\nclass PDFDataRangeTransport {\n  constructor(length, initialData, progressiveDone = false, contentDispositionFilename = null) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n    this._rangeListeners = [];\n    this._progressListeners = [];\n    this._progressiveReadListeners = [];\n    this._progressiveDoneListeners = [];\n    this._readyCapability = Promise.withResolvers();\n  }\n  addRangeListener(listener) {\n    this._rangeListeners.push(listener);\n  }\n  addProgressListener(listener) {\n    this._progressListeners.push(listener);\n  }\n  addProgressiveReadListener(listener) {\n    this._progressiveReadListeners.push(listener);\n  }\n  addProgressiveDoneListener(listener) {\n    this._progressiveDoneListeners.push(listener);\n  }\n  onDataRange(begin, chunk) {\n    for (const listener of this._rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n  onDataProgress(loaded, total) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n  onDataProgressiveRead(chunk) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n  onDataProgressiveDone() {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n  transportReady() {\n    this._readyCapability.resolve();\n  }\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n  abort() {}\n}\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n  }\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n  get canvasFactory() {\n    return this._transport.canvasFactory;\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n  getOutline() {\n    return this._transport.getOutline();\n  }\n  getOptionalContentConfig({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getOptionalContentConfig(renderingIntent);\n  }\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n  getData() {\n    return this._transport.getData();\n  }\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n  cachedPageNumber(ref) {\n    return this._transport.cachedPageNumber(ref);\n  }\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\nclass PDFPageProxy {\n  #pendingCleanup = false;\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n  get ref() {\n    return this._pageInfo.ref;\n  }\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n  get view() {\n    return this._pageInfo.view;\n  }\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  getAnnotations({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getAnnotations(this._pageIndex, renderingIntent);\n  }\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n  render({\n    canvasContext,\n    viewport,\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null,\n    isEditing = false\n  }) {\n    this._stats?.time(\"Overall\");\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing);\n    const {\n      renderingIntent,\n      cacheKey\n    } = intentArgs;\n    this.#pendingCleanup = false;\n    optionalContentConfigPromise ||= this._transport.getOptionalContentConfig(renderingIntent);\n    let intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(cacheKey, intentState);\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    const intentPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = Promise.withResolvers();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n      if (intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup();\n      if (error) {\n        internalRenderTask.capability.reject(error);\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error)\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n      if (this._stats) {\n        this._stats.timeEnd(\"Rendering\");\n        this._stats.timeEnd(\"Overall\");\n        if (globalThis.Stats?.enabled) {\n          globalThis.Stats.add(this.pageNumber, this._stats);\n        }\n      }\n    };\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        background\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors\n    });\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n    Promise.all([intentState.displayReadyCapability.promise, optionalContentConfigPromise]).then(([transparency, optionalContentConfig]) => {\n      if (this.destroyed) {\n        complete();\n        return;\n      }\n      this._stats?.time(\"Rendering\");\n      if (!(optionalContentConfig.renderingIntent & renderingIntent)) {\n        throw new Error(\"Must use the same `intent`-argument when calling the `PDFPageProxy.render` \" + \"and `PDFDocumentProxy.getOptionalContentConfig` methods.\");\n      }\n      internalRenderTask.initializeGraphics({\n        transparency,\n        optionalContentConfig\n      });\n      internalRenderTask.operatorListChanged();\n    }).catch(complete);\n    return renderTask;\n  }\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n    isEditing = false\n  } = {}) {\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing, true);\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = Promise.withResolvers();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n  streamTextContent({\n    includeMarkedContent = false,\n    disableNormalization = false\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n    return this._transport.messageHandler.sendWithStream(\"GetTextContent\", {\n      pageIndex: this._pageIndex,\n      includeMarkedContent: includeMarkedContent === true,\n      disableNormalization: disableNormalization === true\n    }, {\n      highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n      size(textContent) {\n        return textContent.items.length;\n      }\n    });\n  }\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      return this.getXfa().then(xfa => XfaText.textContent(xfa));\n    }\n    const readableStream = this.streamTextContent(params);\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          textContent.lang ??= value.lang;\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n        lang: null\n      };\n      pump();\n    });\n  }\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n  _destroy() {\n    this.destroyed = true;\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true\n      });\n      if (intentState.opListReadCapability) {\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return Promise.all(waitOn);\n  }\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup();\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n  #tryCleanup() {\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    for (const {\n      renderTasks,\n      operatorList\n    } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return;\n    }\n    this._stats?.timeEnd(\"Page Request\");\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n  _renderPageChunk(operatorListChunk, intentState) {\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup();\n    }\n  }\n  _pumpOperatorList({\n    renderingIntent,\n    cacheKey,\n    annotationStorageSerializable,\n    modifiedIds\n  }) {\n    const {\n      map,\n      transfer\n    } = annotationStorageSerializable;\n    const readableStream = this._transport.messageHandler.sendWithStream(\"GetOperatorList\", {\n      pageIndex: this._pageIndex,\n      intent: renderingIntent,\n      cacheKey,\n      annotationStorage: map,\n      modifiedIds\n    }, transfer);\n    const reader = readableStream.getReader();\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n    const pump = () => {\n      reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          intentState.streamReader = null;\n          return;\n        }\n        if (this._transport.destroyed) {\n          return;\n        }\n        this._renderPageChunk(value, intentState);\n        pump();\n      }, reason => {\n        intentState.streamReader = null;\n        if (this._transport.destroyed) {\n          return;\n        }\n        if (intentState.operatorList) {\n          intentState.operatorList.lastChunk = true;\n          for (const internalRenderTask of intentState.renderTasks) {\n            internalRenderTask.operatorListChanged();\n          }\n          this.#tryCleanup();\n        }\n        if (intentState.displayReadyCapability) {\n          intentState.displayReadyCapability.reject(reason);\n        } else if (intentState.opListReadCapability) {\n          intentState.opListReadCapability.reject(reason);\n        } else {\n          throw reason;\n        }\n      });\n    };\n    pump();\n  }\n  _abortOperatorList({\n    intentState,\n    reason,\n    force = false\n  }) {\n    if (!intentState.streamReader) {\n      return;\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    if (!force) {\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < 1000) {\n          delay += reason.extraDelay;\n        }\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({\n            intentState,\n            reason,\n            force: true\n          });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader.cancel(new AbortException(reason.message)).catch(() => {});\n    intentState.streamReader = null;\n    if (this._transport.destroyed) {\n      return;\n    }\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    this.cleanup();\n  }\n  get stats() {\n    return this._stats;\n  }\n}\nclass LoopbackPort {\n  #listeners = new Map();\n  #deferred = Promise.resolve();\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(obj, transfer ? {\n        transfer\n      } : null)\n    };\n    this.#deferred.then(() => {\n      for (const [listener] of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n  addEventListener(name, listener, options = null) {\n    let rmAbort = null;\n    if (options?.signal instanceof AbortSignal) {\n      const {\n        signal\n      } = options;\n      if (signal.aborted) {\n        warn(\"LoopbackPort - cannot use an `aborted` signal.\");\n        return;\n      }\n      const onAbort = () => this.removeEventListener(name, listener);\n      rmAbort = () => signal.removeEventListener(\"abort\", onAbort);\n      signal.addEventListener(\"abort\", onAbort);\n    }\n    this.#listeners.set(listener, rmAbort);\n  }\n  removeEventListener(name, listener) {\n    const rmAbort = this.#listeners.get(listener);\n    rmAbort?.();\n    this.#listeners.delete(listener);\n  }\n  terminate() {\n    for (const [, rmAbort] of this.#listeners) {\n      rmAbort?.();\n    }\n    this.#listeners.clear();\n  }\n}\nclass PDFWorker {\n  static #fakeWorkerId = 0;\n  static #isWorkerDisabled = false;\n  static #workerPorts;\n  static {\n    if (isNodeJS) {\n      this.#isWorkerDisabled = true;\n      GlobalWorkerOptions.workerSrc ||= \"./pdf.worker.mjs\";\n    }\n    this._isSameOrigin = (baseUrl, otherUrl) => {\n      const base = URL.parse(baseUrl);\n      if (!base?.origin || base.origin === \"null\") {\n        return false;\n      }\n      const other = new URL(otherUrl, base);\n      return base.origin === other.origin;\n    };\n    this._createCDNWrapper = url => {\n      const wrapper = `await import(\"${url}\");`;\n      return URL.createObjectURL(new Blob([wrapper], {\n        type: \"text/javascript\"\n      }));\n    };\n  }\n  constructor({\n    name = null,\n    port = null,\n    verbosity = getVerbosityLevel()\n  } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n    this._readyCapability = Promise.withResolvers();\n    this._port = null;\n    this._webWorker = null;\n    this._messageHandler = null;\n    if (port) {\n      if (PDFWorker.#workerPorts?.has(port)) {\n        throw new Error(\"Cannot use more than one PDFWorker per port.\");\n      }\n      (PDFWorker.#workerPorts ||= new WeakMap()).set(port, this);\n      this._initializeFromPort(port);\n      return;\n    }\n    this._initialize();\n  }\n  get promise() {\n    return this._readyCapability.promise;\n  }\n  #resolve() {\n    this._readyCapability.resolve();\n    this._messageHandler.send(\"configure\", {\n      verbosity: this.verbosity\n    });\n  }\n  get port() {\n    return this._port;\n  }\n  get messageHandler() {\n    return this._messageHandler;\n  }\n  _initializeFromPort(port) {\n    this._port = port;\n    this._messageHandler = new MessageHandler(\"main\", \"worker\", port);\n    this._messageHandler.on(\"ready\", function () {});\n    this.#resolve();\n  }\n  _initialize() {\n    if (PDFWorker.#isWorkerDisabled || PDFWorker.#mainThreadWorkerMessageHandler) {\n      this._setupFakeWorker();\n      return;\n    }\n    let {\n      workerSrc\n    } = PDFWorker;\n    try {\n      if (!PDFWorker._isSameOrigin(window.location, workerSrc)) {\n        workerSrc = PDFWorker._createCDNWrapper(new URL(workerSrc, window.location).href);\n      }\n      const worker = new Worker(workerSrc, {\n        type: \"module\"\n      });\n      const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n      const terminateEarly = () => {\n        ac.abort();\n        messageHandler.destroy();\n        worker.terminate();\n        if (this.destroyed) {\n          this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n        } else {\n          this._setupFakeWorker();\n        }\n      };\n      const ac = new AbortController();\n      worker.addEventListener(\"error\", () => {\n        if (!this._webWorker) {\n          terminateEarly();\n        }\n      }, {\n        signal: ac.signal\n      });\n      messageHandler.on(\"test\", data => {\n        ac.abort();\n        if (this.destroyed || !data) {\n          terminateEarly();\n          return;\n        }\n        this._messageHandler = messageHandler;\n        this._port = worker;\n        this._webWorker = worker;\n        this.#resolve();\n      });\n      messageHandler.on(\"ready\", data => {\n        ac.abort();\n        if (this.destroyed) {\n          terminateEarly();\n          return;\n        }\n        try {\n          sendTest();\n        } catch {\n          this._setupFakeWorker();\n        }\n      });\n      const sendTest = () => {\n        const testObj = new Uint8Array();\n        messageHandler.send(\"test\", testObj, [testObj.buffer]);\n      };\n      sendTest();\n      return;\n    } catch {\n      info(\"The worker has been disabled.\");\n    }\n    this._setupFakeWorker();\n  }\n  _setupFakeWorker() {\n    if (!PDFWorker.#isWorkerDisabled) {\n      warn(\"Setting up fake worker.\");\n      PDFWorker.#isWorkerDisabled = true;\n    }\n    PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler => {\n      if (this.destroyed) {\n        this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n        return;\n      }\n      const port = new LoopbackPort();\n      this._port = port;\n      const id = `fake${PDFWorker.#fakeWorkerId++}`;\n      const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n      WorkerMessageHandler.setup(workerHandler, port);\n      this._messageHandler = new MessageHandler(id, id + \"_worker\", port);\n      this.#resolve();\n    }).catch(reason => {\n      this._readyCapability.reject(new Error(`Setting up fake worker failed: \"${reason.message}\".`));\n    });\n  }\n  destroy() {\n    this.destroyed = true;\n    this._webWorker?.terminate();\n    this._webWorker = null;\n    PDFWorker.#workerPorts?.delete(this._port);\n    this._port = null;\n    this._messageHandler?.destroy();\n    this._messageHandler = null;\n  }\n  static fromPort(params) {\n    if (!params?.port) {\n      throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n    }\n    const cachedPort = this.#workerPorts?.get(params.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\"PDFWorker.fromPort - the worker is being destroyed.\\n\" + \"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\");\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n  static get #mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      if (this.#mainThreadWorkerMessageHandler) {\n        return this.#mainThreadWorkerMessageHandler;\n      }\n      const worker = await import(\n      /*webpackIgnore: true*/\n      /*@vite-ignore*/\n      this.workerSrc);\n      return worker.WorkerMessageHandler;\n    };\n    return shadow(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\nclass WorkerTransport {\n  #methodPromises = new Map();\n  #pageCache = new Map();\n  #pagePromises = new Map();\n  #pageRefCache = new Map();\n  #passwordCapability = null;\n  constructor(messageHandler, loadingTask, networkStream, params, factory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement\n    });\n    this.loadingParams = params.loadingParams;\n    this._params = params;\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n    this.wasmFactory = factory.wasmFactory;\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = Promise.withResolvers();\n    this.setupMessageHandler();\n  }\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n  getRenderingIntent(intent, annotationMode = AnnotationMode.ENABLE, printAnnotationStorage = null, isEditing = false, isOpList = false) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY;\n    let annotationStorageSerializable = SerializableEmpty;\n    switch (intent) {\n      case \"any\":\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n    const annotationStorage = renderingIntent & RenderingIntentFlag.PRINT && printAnnotationStorage instanceof PrintAnnotationStorage ? printAnnotationStorage : this.annotationStorage;\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n    if (isEditing) {\n      renderingIntent += RenderingIntentFlag.IS_EDITING;\n    }\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n    const {\n      ids: modifiedIds,\n      hash: modifiedIdsHash\n    } = annotationStorage.modifiedIds;\n    const cacheKeyBuf = [renderingIntent, annotationStorageSerializable.hash, modifiedIdsHash];\n    return {\n      renderingIntent,\n      cacheKey: cacheKeyBuf.join(\"_\"),\n      annotationStorageSerializable,\n      modifiedIds\n    };\n  }\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n    this.destroyed = true;\n    this.destroyCapability = Promise.withResolvers();\n    this.#passwordCapability?.reject(new Error(\"Worker was destroyed during onPassword callback\"));\n    const waitOn = [];\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    this.#pageRefCache.clear();\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n      TextLayer.cleanup();\n      this._networkStream?.cancelAllRequests(new AbortException(\"Worker was terminated.\"));\n      this.messageHandler?.destroy();\n      this.messageHandler = null;\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n  setupMessageHandler() {\n    const {\n      messageHandler,\n      loadingTask\n    } = this;\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(this._networkStream, \"GetReader - no `IPDFStream` instance available.\");\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"ReaderHeadersReady\", async data => {\n      await this._fullReader.headersReady;\n      const {\n        isStreamingSupported,\n        isRangeSupported,\n        contentLength\n      } = this._fullReader;\n      if (!isStreamingSupported || !isRangeSupported) {\n        if (this._lastProgress) {\n          loadingTask.onProgress?.(this._lastProgress);\n        }\n        this._fullReader.onProgress = evt => {\n          loadingTask.onProgress?.({\n            loaded: evt.loaded,\n            total: evt.total\n          });\n        };\n      }\n      return {\n        isStreamingSupported,\n        isRangeSupported,\n        contentLength\n      };\n    });\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(this._networkStream, \"GetRangeReader - no `IPDFStream` instance available.\");\n      const rangeReader = this._networkStream.getRangeReader(data.begin, data.end);\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n      sink.onPull = () => {\n        rangeReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetRangeReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"GetDoc\", ({\n      pdfInfo\n    }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n    messageHandler.on(\"DocException\", ex => {\n      loadingTask._capability.reject(wrapReason(ex));\n    });\n    messageHandler.on(\"PasswordRequest\", ex => {\n      this.#passwordCapability = Promise.withResolvers();\n      try {\n        if (!loadingTask.onPassword) {\n          throw wrapReason(ex);\n        }\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({\n              password\n            });\n          }\n        };\n        loadingTask.onPassword(updatePassword, ex.code);\n      } catch (err) {\n        this.#passwordCapability.reject(err);\n      }\n      return this.#passwordCapability.promise;\n    });\n    messageHandler.on(\"DataLoaded\", data => {\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length\n      });\n      this.downloadInfoCapability.resolve(data);\n    });\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return null;\n      }\n      if (this.commonObjs.has(id)) {\n        return null;\n      }\n      switch (type) {\n        case \"Font\":\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n          const inspectFont = this._params.pdfBug && globalThis.FontInspector?.enabled ? (font, url) => globalThis.FontInspector.fontAdded(font, url) : null;\n          const font = new FontFaceObject(exportedData, inspectFont);\n          this.fontLoader.bind(font).catch(() => messageHandler.sendWithPromise(\"FontFallback\", {\n            id\n          })).finally(() => {\n            if (!font.fontExtraProperties && font.data) {\n              font.data = null;\n            }\n            this.commonObjs.resolve(id, font);\n          });\n          break;\n        case \"CopyLocalImage\":\n          const {\n            imageRef\n          } = exportedData;\n          assert(imageRef, \"The imageRef must be defined.\");\n          for (const pageProxy of this.#pageCache.values()) {\n            for (const [, data] of pageProxy.objs) {\n              if (data?.ref !== imageRef) {\n                continue;\n              }\n              if (!data.dataLen) {\n                return null;\n              }\n              this.commonObjs.resolve(id, structuredClone(data));\n              return data.dataLen;\n            }\n          }\n          break;\n        case \"FontPath\":\n        case \"Image\":\n        case \"Pattern\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n      return null;\n    });\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        return;\n      }\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      if (pageProxy._intentStates.size === 0) {\n        imageData?.bitmap?.close();\n        return;\n      }\n      switch (type) {\n        case \"Image\":\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total\n      });\n    });\n    messageHandler.on(\"FetchBinaryData\", async data => {\n      if (this.destroyed) {\n        throw new Error(\"Worker was destroyed.\");\n      }\n      const factory = this[data.type];\n      if (!factory) {\n        throw new Error(`${data.type} not initialized, see the \\`useWorkerFetch\\` parameter.`);\n      }\n      return factory.fetch(data);\n    });\n  }\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\"saveDocument called while `annotationStorage` is empty, \" + \"please use the getData-method instead.\");\n    }\n    const {\n      map,\n      transfer\n    } = this.annotationStorage.serializable;\n    return this.messageHandler.sendWithPromise(\"SaveDocument\", {\n      isPureXfa: !!this._htmlForXfa,\n      numPages: this._numPages,\n      annotationStorage: map,\n      filename: this._fullReader?.filename ?? null\n    }, transfer).finally(() => {\n      this.annotationStorage.resetModified();\n    });\n  }\n  getPage(pageNumber) {\n    if (!Number.isInteger(pageNumber) || pageNumber <= 0 || pageNumber > this._numPages) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(\"GetPage\", {\n      pageIndex\n    }).then(pageInfo => {\n      if (this.destroyed) {\n        throw new Error(\"Transport destroyed\");\n      }\n      if (pageInfo.refStr) {\n        this.#pageRefCache.set(pageInfo.refStr, pageNumber);\n      }\n      const page = new PDFPageProxy(pageIndex, pageInfo, this, this._params.pdfBug);\n      this.#pageCache.set(pageIndex, page);\n      return page;\n    });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n  getPageIndex(ref) {\n    if (!isRefProxy(ref)) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen\n    });\n  }\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent\n    });\n  }\n  getFieldObjects() {\n    return this.#cacheSimpleMethod(\"GetFieldObjects\");\n  }\n  hasJSActions() {\n    return this.#cacheSimpleMethod(\"HasJSActions\");\n  }\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id\n    });\n  }\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n  getDocJSActions() {\n    return this.#cacheSimpleMethod(\"GetDocJSActions\");\n  }\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex\n    });\n  }\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex\n    });\n  }\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n  getOptionalContentConfig(renderingIntent) {\n    return this.#cacheSimpleMethod(\"GetOptionalContentConfig\").then(data => new OptionalContentConfig(data, renderingIntent));\n  }\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n  getMetadata() {\n    const name = \"GetMetadata\",\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, null).then(results => ({\n      info: results[0],\n      metadata: results[1] ? new Metadata(results[1]) : null,\n      contentDispositionFilename: this._fullReader?.filename ?? null,\n      contentLength: this._fullReader?.contentLength ?? null\n    }));\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return;\n    }\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n      if (!cleanupSuccessful) {\n        throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(true);\n    TextLayer.cleanup();\n  }\n  cachedPageNumber(ref) {\n    if (!isRefProxy(ref)) {\n      return null;\n    }\n    const refStr = ref.gen === 0 ? `${ref.num}R` : `${ref.num}R${ref.gen}`;\n    return this.#pageRefCache.get(refStr) ?? null;\n  }\n}\nconst INITIAL_DATA = Symbol(\"INITIAL_DATA\");\nclass PDFObjects {\n  #objs = Object.create(null);\n  #ensureObj(objId) {\n    return this.#objs[objId] ||= {\n      ...Promise.withResolvers(),\n      data: INITIAL_DATA\n    };\n  }\n  get(objId, callback = null) {\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.promise.then(() => callback(obj.data));\n      return null;\n    }\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n  has(objId) {\n    const obj = this.#objs[objId];\n    return !!obj && obj.data !== INITIAL_DATA;\n  }\n  delete(objId) {\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      return false;\n    }\n    delete this.#objs[objId];\n    return true;\n  }\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.resolve();\n  }\n  clear() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      data?.bitmap?.close();\n    }\n    this.#objs = Object.create(null);\n  }\n  *[Symbol.iterator]() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      if (data === INITIAL_DATA) {\n        continue;\n      }\n      yield [objId, data];\n    }\n  }\n}\nclass RenderTask {\n  #internalRenderTask = null;\n  onContinue = null;\n  onError = null;\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n  }\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(null, extraDelay);\n  }\n  get separateAnnots() {\n    const {\n      separateAnnots\n    } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const {\n      annotationCanvasMap\n    } = this.#internalRenderTask;\n    return separateAnnots.form || separateAnnots.canvas && annotationCanvasMap?.size > 0;\n  }\n}\nclass InternalRenderTask {\n  #rAF = null;\n  static #canvasInUse = new WeakSet();\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame = useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = Promise.withResolvers();\n    this.task = new RenderTask(this);\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n  get completed() {\n    return this.capability.promise.catch(function () {});\n  }\n  initializeGraphics({\n    transparency = false,\n    optionalContentConfig\n  }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\"Cannot use the same canvas during multiple render() operations. \" + \"Use different canvas or ensure previous operations were \" + \"cancelled or completed.\");\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const {\n      canvasContext,\n      viewport,\n      transform,\n      background\n    } = this.params;\n    this.gfx = new CanvasGraphics(canvasContext, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n      optionalContentConfig\n    }, this.annotationCanvasMap, this.pageColors);\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    if (this.#rAF) {\n      window.cancelAnimationFrame(this.#rAF);\n      this.#rAF = null;\n    }\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n    error ||= new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex + 1}`, extraDelay);\n    this.callback(error);\n    this.task.onError?.(error);\n  }\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      this.#rAF = window.requestAnimationFrame(() => {\n        this.#rAF = null;\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList, this.operatorListIdx, this._continueBound, this.stepper);\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n        this.callback();\n      }\n    }\n  }\n}\nconst version = \"5.2.133\";\nconst build = \"4f7761353\";\n\n;// ./src/shared/scripting_utils.js\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255).toString(16).padStart(2, \"0\");\n}\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join(\"\")}`;\n  }\n  static T_HTML() {\n    return \"#00000000\";\n  }\n  static T_rgb() {\n    return [null];\n  }\n  static CMYK_RGB([c, y, m, k]) {\n    return [\"RGB\", 1 - Math.min(1, c + k), 1 - Math.min(1, m + k), 1 - Math.min(1, y + k)];\n  }\n  static CMYK_rgb([c, y, m, k]) {\n    return [scaleAndClamp(1 - Math.min(1, c + k)), scaleAndClamp(1 - Math.min(1, m + k)), scaleAndClamp(1 - Math.min(1, y + k))];\n  }\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\n\n;// ./src/display/svg_factory.js\n\n\nclass BaseSVGFactory {\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n    if (!skipDimensions) {\n      svg.setAttribute(\"width\", `${width}px`);\n      svg.setAttribute(\"height\", `${height}px`);\n    }\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n    return svg;\n  }\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n  _createSVG(type) {\n    unreachable(\"Abstract method `_createSVG` called.\");\n  }\n}\nclass DOMSVGFactory extends BaseSVGFactory {\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\n\n;// ./src/display/xfa_layer.js\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, {\n      value: null\n    });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, {\n            value: event.target.value\n          });\n        });\n        break;\n      case \"input\":\n        if (element.attributes.type === \"radio\" || element.attributes.type === \"checkbox\") {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked ? event.target.getAttribute(\"xfaOn\") : event.target.getAttribute(\"xfaOff\")\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, {\n              value: event.target.value\n            });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          html.setAttribute(\"value\", storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty(\"selected\")) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value = options.selectedIndex === -1 ? \"\" : options[options.selectedIndex].value;\n          storage.setValue(id, {\n            value\n          });\n        });\n        break;\n    }\n  }\n  static setAttributes({\n    html,\n    element,\n    storage = null,\n    intent,\n    linkService\n  }) {\n    const {\n      attributes\n    } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n    if (attributes.type === \"radio\") {\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n      switch (key) {\n        case \"class\":\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n          break;\n        case \"dataId\":\n          break;\n        case \"id\":\n          html.setAttribute(\"data-element-id\", value);\n          break;\n        case \"style\":\n          Object.assign(html.style, value);\n          break;\n        case \"textContent\":\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || key !== \"href\" && key !== \"newWindow\") {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(html, attributes.href, attributes.newWindow);\n    }\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService\n      });\n    }\n    const isNotForRichText = intent !== \"richText\";\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n    if (isNotForRichText) {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n    const textDivs = [];\n    if (root.children.length === 0) {\n      if (root.value) {\n        const node = document.createTextNode(root.value);\n        rootHtml.append(node);\n        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {\n          textDivs.push(node);\n        }\n      }\n      return {\n        textDivs\n      };\n    }\n    const stack = [[root, -1, rootHtml]];\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n      const {\n        name\n      } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n      const childHtml = child?.attributes?.xmlns ? document.createElementNS(child.attributes.xmlns, name) : document.createElement(name);\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService\n        });\n      }\n      if (child.children?.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (isNotForRichText && XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n    for (const el of rootDiv.querySelectorAll(\".xfaNonInteractive input, .xfaNonInteractive textarea\")) {\n      el.setAttribute(\"readOnly\", true);\n    }\n    return {\n      textDivs\n    };\n  }\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\n\n;// ./src/display/annotation_layer.js\n\n\n\n\n\n\nconst DEFAULT_TAB_INDEX = 1000;\nconst annotation_layer_DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\nclass AnnotationElementFactory {\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case \"Sig\":\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\nclass AnnotationElement {\n  #updates = null;\n  #hasBorder = false;\n  #popupElement = null;\n  constructor(parameters, {\n    isRenderable = false,\n    ignoreBorder = false,\n    createQuadrilaterals = false\n  } = {}) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n  static _hasPopupData({\n    titleObj,\n    contentsObj,\n    richText\n  }) {\n    return !!(titleObj?.str || contentsObj?.str || richText?.str);\n  }\n  get _isEditable() {\n    return this.data.isEditable;\n  }\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data);\n  }\n  updateEdited(params) {\n    if (!this.container) {\n      return;\n    }\n    this.#updates ||= {\n      rect: this.data.rect.slice(0)\n    };\n    const {\n      rect\n    } = params;\n    if (rect) {\n      this.#setRectEdited(rect);\n    }\n    this.#popupElement?.popup.updateEdited(params);\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    this.#setRectEdited(this.#updates.rect);\n    this.#popupElement?.popup.resetEdited();\n    this.#updates = null;\n  }\n  #setRectEdited(rect) {\n    const {\n      container: {\n        style\n      },\n      data: {\n        rect: currentRect,\n        rotation\n      },\n      parent: {\n        viewport: {\n          rawDims: {\n            pageWidth,\n            pageHeight,\n            pageX,\n            pageY\n          }\n        }\n      }\n    } = this;\n    currentRect?.splice(0, 4, ...rect);\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (pageHeight - rect[3] + pageY) / pageHeight}%`;\n    if (rotation === 0) {\n      style.width = `${100 * (rect[2] - rect[0]) / pageWidth}%`;\n      style.height = `${100 * (rect[3] - rect[1]) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation);\n    }\n  }\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: {\n        page,\n        viewport\n      }\n    } = this;\n    const container = document.createElement(\"section\");\n    container.setAttribute(\"data-annotation-id\", data.id);\n    if (!(this instanceof WidgetAnnotationElement)) {\n      container.tabIndex = DEFAULT_TAB_INDEX;\n    }\n    const {\n      style\n    } = container;\n    style.zIndex = this.parent.zIndex++;\n    if (data.alternativeText) {\n      container.title = data.alternativeText;\n    }\n    if (data.noRotate) {\n      container.classList.add(\"norotate\");\n    }\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const {\n        rotation\n      } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n    const {\n      width,\n      height\n    } = this;\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      style.borderWidth = `${data.borderStyle.width}px`;\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--total-scale-factor)) / calc(${verticalRadius}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--total-scale-factor)) / calc(${height}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      }\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          style.borderStyle = \"solid\";\n          break;\n        case AnnotationBorderStyleType.DASHED:\n          style.borderStyle = \"dashed\";\n          break;\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n        case AnnotationBorderStyleType.UNDERLINE:\n          style.borderBottomStyle = \"solid\";\n          break;\n        default:\n          break;\n      }\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        style.borderColor = Util.makeHexColor(borderColor[0] | 0, borderColor[1] | 0, borderColor[2] | 0);\n      } else {\n        style.borderWidth = 0;\n      }\n    }\n    const rect = Util.normalizeRect([data.rect[0], page.view[3] - data.rect[1] + page.view[1], data.rect[2], page.view[3] - data.rect[3] + page.view[1]]);\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (rect[1] - pageY) / pageHeight}%`;\n    const {\n      rotation\n    } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      style.width = `${100 * width / pageWidth}%`;\n      style.height = `${100 * height / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n    return container;\n  }\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const {\n      pageWidth,\n      pageHeight\n    } = this.parent.viewport.rawDims;\n    let {\n      width,\n      height\n    } = this;\n    if (angle % 180 !== 0) {\n      [width, height] = [height, width];\n    }\n    container.style.width = `${100 * width / pageWidth}%`;\n    container.style.height = `${100 * height / pageHeight}%`;\n    container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n  }\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] = ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray)\n      });\n    };\n    return shadow(this, \"_commonActions\", {\n      display: event => {\n        const {\n          display\n        } = event.detail;\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print\n        });\n      },\n      hidden: event => {\n        const {\n          hidden\n        } = event.detail;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({\n          preventScroll: false\n        }), 0);\n      },\n      userName: event => {\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: event => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n      rotation: event => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle\n        });\n      }\n    });\n  }\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail\n          },\n          target: element\n        };\n        action(eventProxy);\n        delete storedData[actionName];\n      }\n    }\n  }\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const {\n      quadPoints\n    } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect.map(x => Math.fround(x));\n    if (quadPoints.length === 8) {\n      const [trX, trY, blX, blY] = quadPoints.subarray(2, 6);\n      if (rectTrX === trX && rectTrY === trY && rectBlX === blX && rectBlY === blY) {\n        return;\n      }\n    }\n    const {\n      style\n    } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const {\n        borderColor,\n        borderWidth\n      } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\"url('data:image/svg+xml;utf8,\", `<svg xmlns=\"http://www.w3.org/2000/svg\"`, ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`, `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`];\n      this.container.classList.add(\"hasBorder\");\n    }\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n    const {\n      svgFactory\n    } = this;\n    const svg = svgFactory.createElement(\"svg\");\n    svg.classList.add(\"quadrilateralsContainer\");\n    svg.setAttribute(\"width\", 0);\n    svg.setAttribute(\"height\", 0);\n    const defs = svgFactory.createElement(\"defs\");\n    svg.append(defs);\n    const clipPath = svgFactory.createElement(\"clipPath\");\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute(\"id\", id);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    defs.append(clipPath);\n    for (let i = 2, ii = quadPoints.length; i < ii; i += 8) {\n      const trX = quadPoints[i];\n      const trY = quadPoints[i + 1];\n      const blX = quadPoints[i + 2];\n      const blY = quadPoints[i + 3];\n      const rect = svgFactory.createElement(\"rect\");\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute(\"x\", x);\n      rect.setAttribute(\"y\", y);\n      rect.setAttribute(\"width\", rectWidth);\n      rect.setAttribute(\"height\", rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(`<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`);\n    }\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join(\"\");\n    }\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n  _createPopup() {\n    const {\n      data\n    } = this;\n    const popup = this.#popupElement = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate: data.modificationDate,\n        contentsObj: data.contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation\n      },\n      parent: this.parent,\n      elements: [this]\n    });\n    this.parent.div.append(popup.render());\n  }\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const {\n          page,\n          id,\n          exportValues\n        } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue = typeof exportValues === \"string\" ? exportValues : null;\n          const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({\n            id,\n            exportValue,\n            domElement\n          });\n        }\n      }\n      return fields;\n    }\n    for (const domElement of document.getElementsByName(name)) {\n      const {\n        exportValue\n      } = domElement;\n      const id = domElement.getAttribute(\"data-element-id\");\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({\n        id,\n        exportValue,\n        domElement\n      });\n    }\n    return fields;\n  }\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add(\"highlightArea\");\n      }\n    } else {\n      triggers.classList.add(\"highlightArea\");\n    }\n  }\n  _editOnDoubleClick() {\n    if (!this._isEditable) {\n      return;\n    }\n    const {\n      annotationEditorType: mode,\n      data: {\n        id: editId\n      }\n    } = this;\n    this.container.addEventListener(\"dblclick\", () => {\n      this.linkService.eventBus?.dispatch(\"switchannotationeditormode\", {\n        source: this,\n        mode,\n        editId\n      });\n    });\n  }\n  get width() {\n    return this.data.rect[2] - this.data.rect[0];\n  }\n  get height() {\n    return this.data.rect[3] - this.data.rect[1];\n  }\n}\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n  render() {\n    const {\n      data,\n      linkService\n    } = this;\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"data-element-id\", data.id);\n    let isBound = false;\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n      isBound = true;\n    } else if (data.attachment) {\n      this.#bindAttachment(link, data.attachment, data.attachmentDest);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n      isBound = true;\n    } else {\n      if (data.actions && (data.actions.Action || data.actions[\"Mouse Up\"] || data.actions[\"Mouse Down\"]) && this.enableScripting && this.hasJSActions) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, \"\");\n        isBound = true;\n      }\n    }\n    this.container.classList.add(\"linkAnnotation\");\n    if (isBound) {\n      this.container.append(link);\n    }\n    return this.container;\n  }\n  #setInternalLink() {\n    this.container.setAttribute(\"data-internal-link\", \"\");\n  }\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === \"\") {\n      this.#setInternalLink();\n    }\n  }\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindAttachment(link, attachment, dest = null) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    if (attachment.description) {\n      link.title = attachment.description;\n    }\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(attachment.content, attachment.filename, dest);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindSetOCGState(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([[\"Action\", \"onclick\"], [\"Mouse Up\", \"onmouseup\"], [\"Mouse Down\", \"onmousedown\"]]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name\n          }\n        });\n        return false;\n      };\n    }\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    this.#setInternalLink();\n    if (!this._fieldObjects) {\n      warn(`_bindResetFormAction - \"resetForm\" action not supported, ` + \"ensure that the `fieldObjects` parameter is provided.\");\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n    link.onclick = () => {\n      otherClickAction?.();\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include\n      } = resetForm;\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const {\n            id\n          } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const {\n          id\n        } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"checkbox\":\n          case \"radiobutton\":\n            {\n              const value = field.defaultValue === field.exportValues;\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"combobox\":\n          case \"listbox\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          default:\n            continue;\n        }\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n      if (this.enableScripting) {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\"\n          }\n        });\n      }\n      return false;\n    };\n  }\n}\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"textAnnotation\");\n    const image = document.createElement(\"img\");\n    image.src = this.imageResourcesPath + \"annotation-\" + this.data.name.toLowerCase() + \".svg\";\n    image.setAttribute(\"data-l10n-id\", \"pdfjs-text-annotation-type\");\n    image.setAttribute(\"data-l10n-args\", JSON.stringify({\n      type: this.data.name\n    }));\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(image);\n    return this.container;\n  }\n}\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    return this.container;\n  }\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === \"CANVAS\") {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n  _getKeyModifier(event) {\n    return util_FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n  }\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event)\n          }\n        });\n      });\n    } else {\n      element.addEventListener(baseName, event => {\n        if (baseName === \"blur\") {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === \"focus\") {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n        if (!valueGetter) {\n          return;\n        }\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event)\n          }\n        });\n      });\n    }\n  }\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        if (eventName === \"Focus\" || eventName === \"Blur\") {\n          elementData ||= {\n            focused: false\n          };\n        }\n        this._setEventListener(element, elementData, baseName, eventName, getter);\n        if (eventName === \"Focus\" && !this.data.actions?.Blur) {\n          this._setEventListener(element, elementData, \"blur\", \"Blur\", null);\n        } else if (eventName === \"Blur\" && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, \"focus\", \"Focus\", null);\n        }\n      }\n    }\n  }\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor = color === null ? \"transparent\" : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const {\n      fontColor\n    } = this.data.defaultAppearanceData;\n    const fontSize = this.data.defaultAppearanceData.fontSize || annotation_layer_DEFAULT_FONT_SIZE;\n    const style = element.style;\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = x => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(lineHeight / LINE_FACTOR));\n    } else {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(height / LINE_FACTOR));\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--total-scale-factor))`;\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute(\"required\", true);\n    } else {\n      element.removeAttribute(\"required\");\n    }\n    element.setAttribute(\"aria-required\", isRequired);\n  }\n}\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable = parameters.renderForms || parameters.data.hasOwnCanvas || !parameters.data.hasAppearance && !!parameters.data.fieldValue;\n    super(parameters, {\n      isRenderable\n    });\n  }\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(base.name, base.id)) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, {\n        [keyInStorage]: value\n      });\n    }\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    this.container.classList.add(\"textWidgetAnnotation\");\n    let element = null;\n    if (this.renderForms) {\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue\n      });\n      let textContent = storedData.value || \"\";\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n      let fieldFormattedValues = storedData.formattedValue || this.data.textContent?.join(\"\\n\") || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n      }\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false\n      };\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = \"hidden\";\n        }\n      } else {\n        element = document.createElement(\"input\");\n        element.type = this.data.password ? \"password\" : \"text\";\n        element.setAttribute(\"value\", fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = \"hidden\";\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute(\"data-element-id\", id);\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = DEFAULT_TAB_INDEX;\n      this._setRequired(element, this.data.required);\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, {\n          value: event.target.value\n        });\n        this.setPropertyOnSiblings(element, \"value\", event.target.value, \"value\");\n        elementData.formattedValue = null;\n      });\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n      let blurListener = event => {\n        const {\n          formattedValue\n        } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        event.target.scrollLeft = 0;\n      };\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          if (elementData.focused) {\n            return;\n          }\n          const {\n            target\n          } = event;\n          if (elementData.userValue) {\n            target.value = elementData.userValue;\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          if (!this.data.actions?.Focus) {\n            elementData.focused = true;\n          }\n        });\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              storage.setValue(id, {\n                value: elementData.userValue.toString()\n              });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const {\n                formattedValue\n              } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (formattedValue !== null && formattedValue !== undefined && event.target !== document.activeElement) {\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: event => {\n              const {\n                charLimit\n              } = event.detail;\n              const {\n                target\n              } = event;\n              if (charLimit === 0) {\n                target.removeAttribute(\"maxLength\");\n                return;\n              }\n              target.setAttribute(\"maxLength\", charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, {\n                value\n              });\n              this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd\n                }\n              });\n            }\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n        element.addEventListener(\"keydown\", event => {\n          elementData.commitKey = 1;\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\" && !this.data.multiLine) {\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const {\n            value\n          } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd\n            }\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          if (!this.data.actions?.Blur) {\n            elementData.focused = false;\n          }\n          const {\n            value\n          } = event.target;\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd\n              }\n            });\n          }\n          _blurListener(event);\n        });\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            elementData.lastCommittedValue = null;\n            const {\n              data,\n              target\n            } = event;\n            const {\n              value,\n              selectionStart,\n              selectionEnd\n            } = target;\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n            switch (event.inputType) {\n              case \"deleteWordBackward\":\n                {\n                  const match = value.substring(0, selectionStart).match(/\\w*[^\\w]*$/);\n                  if (match) {\n                    selStart -= match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteWordForward\":\n                {\n                  const match = value.substring(selectionStart).match(/^[^\\w]*\\w*/);\n                  if (match) {\n                    selEnd += match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd\n              }\n            });\n          });\n        }\n        this._setEventListeners(element, elementData, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.value);\n      }\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px * var(--total-scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n    }\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: !!parameters.data.hasOwnCanvas\n    });\n  }\n}\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== \"Off\";\n      storage.setValue(id, {\n        value\n      });\n    }\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const checkbox of this._getElementsByName(name, id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, {\n          value: curChecked\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, {\n              value: event.target.checked\n            });\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== data.buttonValue;\n      storage.setValue(id, {\n        value\n      });\n    }\n    if (value) {\n      for (const radio of this._getElementsByName(data.fieldName, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n    }\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const radio of this._getElementsByName(name, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked = defaultValue !== null && defaultValue !== undefined && defaultValue === data.buttonValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, {\n                value: curChecked\n              });\n            }\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      ignoreBorder: parameters.data.hasAppearance\n    });\n  }\n  render() {\n    const container = super.render();\n    container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n      linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n    return container;\n  }\n}\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"choiceWidgetAnnotation\");\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue\n    });\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute(\"data-element-id\", id);\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = DEFAULT_TAB_INDEX;\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n    if (!this.data.combo) {\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement(\"option\");\n      noneOptionElement.value = \" \";\n      noneOptionElement.setAttribute(\"hidden\", true);\n      noneOptionElement.setAttribute(\"selected\", true);\n      selectElement.prepend(noneOptionElement);\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener(\"input\", removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener(\"input\", removeEmptyEntry);\n    }\n    const getValue = isExport => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const {\n        options,\n        multiple\n      } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1 ? null : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter.call(options, option => option.selected).map(option => option[name]);\n    };\n    let selectedValues = getValue(false);\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => ({\n        displayValue: option.textContent,\n        exportValue: option.value\n      }));\n    };\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(options, option => option.selected);\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, {\n              value: null,\n              items: []\n            });\n            selectedValues = getValue(false);\n          },\n          insert(event) {\n            const {\n              index,\n              displayValue,\n              exportValue\n            } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          items(event) {\n            const {\n              items\n            } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const {\n                displayValue,\n                exportValue\n              } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(true);\n        const change = getValue(false);\n        storage.setValue(id, {\n          value: exportValue\n        });\n        event.preventDefault();\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value: selectedValues,\n            change,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false\n          }\n        });\n      });\n      this._setEventListeners(selectElement, null, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"], [\"input\", \"Action\"], [\"input\", \"Validate\"]], event => event.target.value);\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, {\n          value: getValue(true)\n        });\n      });\n    }\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {}\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const {\n      data,\n      elements\n    } = parameters;\n    super(parameters, {\n      isRenderable: AnnotationElement._hasPopupData(data)\n    });\n    this.elements = elements;\n    this.popup = null;\n  }\n  render() {\n    this.container.classList.add(\"popupAnnotation\");\n    const popup = this.popup = new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open\n    });\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      element.container.ariaHasPopup = \"dialog\";\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n    this.container.setAttribute(\"aria-controls\", elementIds.map(id => `${AnnotationPrefix}${id}`).join(\",\"));\n    return this.container;\n  }\n}\nclass PopupElement {\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundHide = this.#hide.bind(this);\n  #boundShow = this.#show.bind(this);\n  #boundToggle = this.#toggle.bind(this);\n  #color = null;\n  #container = null;\n  #contentsObj = null;\n  #dateObj = null;\n  #elements = null;\n  #parent = null;\n  #parentRect = null;\n  #pinned = false;\n  #popup = null;\n  #position = null;\n  #rect = null;\n  #richText = null;\n  #titleObj = null;\n  #updates = null;\n  #wasVisible = false;\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n    this.#dateObj = PDFDateString.toDateObject(modificationDate);\n    this.trigger = elements.flatMap(e => e.getElementsToTriggerPopup());\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this.#boundToggle);\n      element.addEventListener(\"mouseenter\", this.#boundShow);\n      element.addEventListener(\"mouseleave\", this.#boundHide);\n      element.classList.add(\"popupTriggerArea\");\n    }\n    for (const element of elements) {\n      element.container?.addEventListener(\"keydown\", this.#boundKeyDown);\n    }\n    this.#container.hidden = true;\n    if (open) {\n      this.#toggle();\n    }\n  }\n  render() {\n    if (this.#popup) {\n      return;\n    }\n    const popup = this.#popup = document.createElement(\"div\");\n    popup.className = \"popup\";\n    if (this.#color) {\n      const baseColor = popup.style.outlineColor = Util.makeHexColor(...this.#color);\n      popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n    }\n    const header = document.createElement(\"span\");\n    header.className = \"header\";\n    const title = document.createElement(\"h1\");\n    header.append(title);\n    ({\n      dir: title.dir,\n      str: title.textContent\n    } = this.#titleObj);\n    popup.append(header);\n    if (this.#dateObj) {\n      const modificationDate = document.createElement(\"span\");\n      modificationDate.classList.add(\"popupDate\");\n      modificationDate.setAttribute(\"data-l10n-id\", \"pdfjs-annotation-date-time-string\");\n      modificationDate.setAttribute(\"data-l10n-args\", JSON.stringify({\n        dateObj: this.#dateObj.valueOf()\n      }));\n      header.append(modificationDate);\n    }\n    const html = this.#html;\n    if (html) {\n      XfaLayer.render({\n        xfaHtml: html,\n        intent: \"richText\",\n        div: popup\n      });\n      popup.lastChild.classList.add(\"richText\", \"popupContent\");\n    } else {\n      const contents = this._formatContents(this.#contentsObj);\n      popup.append(contents);\n    }\n    this.#container.append(popup);\n  }\n  get #html() {\n    const richText = this.#richText;\n    const contentsObj = this.#contentsObj;\n    if (richText?.str && (!contentsObj?.str || contentsObj.str === richText.str)) {\n      return this.#richText.html || null;\n    }\n    return null;\n  }\n  get #fontSize() {\n    return this.#html?.attributes?.style?.fontSize || 0;\n  }\n  get #fontColor() {\n    return this.#html?.attributes?.style?.color || null;\n  }\n  #makePopupContent(text) {\n    const popupLines = [];\n    const popupContent = {\n      str: text,\n      html: {\n        name: \"div\",\n        attributes: {\n          dir: \"auto\"\n        },\n        children: [{\n          name: \"p\",\n          children: popupLines\n        }]\n      }\n    };\n    const lineAttributes = {\n      style: {\n        color: this.#fontColor,\n        fontSize: this.#fontSize ? `calc(${this.#fontSize}px * var(--total-scale-factor))` : \"\"\n      }\n    };\n    for (const line of text.split(\"\\n\")) {\n      popupLines.push({\n        name: \"span\",\n        value: line,\n        attributes: lineAttributes\n      });\n    }\n    return popupContent;\n  }\n  _formatContents({\n    str,\n    dir\n  }) {\n    const p = document.createElement(\"p\");\n    p.classList.add(\"popupContent\");\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n    if (event.key === \"Enter\" || event.key === \"Escape\" && this.#pinned) {\n      this.#toggle();\n    }\n  }\n  updateEdited({\n    rect,\n    popupContent\n  }) {\n    this.#updates ||= {\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    };\n    if (rect) {\n      this.#position = null;\n    }\n    if (popupContent) {\n      this.#richText = this.#makePopupContent(popupContent);\n      this.#contentsObj = null;\n    }\n    this.#popup?.remove();\n    this.#popup = null;\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    ({\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    } = this.#updates);\n    this.#updates = null;\n    this.#popup?.remove();\n    this.#popup = null;\n    this.#position = null;\n  }\n  #setPosition() {\n    if (this.#position !== null) {\n      return;\n    }\n    const {\n      page: {\n        view\n      },\n      viewport: {\n        rawDims: {\n          pageWidth,\n          pageHeight,\n          pageX,\n          pageY\n        }\n      }\n    } = this.#parent;\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n    const normalizedRect = Util.normalizeRect([rect[0], view[3] - rect[1] + view[1], rect[2], view[3] - rect[3] + view[1]]);\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n    this.#position = [100 * (popupLeft - pageX) / pageWidth, 100 * (popupTop - pageY) / pageHeight];\n    const {\n      style\n    } = this.#container;\n    style.left = `${this.#position[0]}%`;\n    style.top = `${this.#position[1]}%`;\n  }\n  #toggle() {\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener(\"click\", this.#boundToggle);\n      this.#container.addEventListener(\"keydown\", this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener(\"click\", this.#boundToggle);\n      this.#container.removeEventListener(\"keydown\", this.#boundKeyDown);\n    }\n  }\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#setPosition();\n      this.#container.hidden = false;\n      this.#container.style.zIndex = parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add(\"focused\");\n    }\n  }\n  #hide() {\n    this.#container.classList.remove(\"focused\");\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex = parseInt(this.#container.style.zIndex) - 1000;\n  }\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n  maybeShow() {\n    if (!this.#wasVisible) {\n      return;\n    }\n    if (!this.#popup) {\n      this.#show();\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n  get isVisible() {\n    return this.#container.hidden === false;\n  }\n}\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = AnnotationEditorType.FREETEXT;\n  }\n  render() {\n    this.container.classList.add(\"freeTextAnnotation\");\n    if (this.textContent) {\n      const content = document.createElement(\"div\");\n      content.classList.add(\"annotationTextContent\");\n      content.setAttribute(\"role\", \"comment\");\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement(\"span\");\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"lineAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const line = this.#line = this.svgFactory.createElement(\"svg:line\");\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n    svg.append(line);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"squareAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const square = this.#square = this.svgFactory.createElement(\"svg:rect\");\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n    svg.append(square);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"circleAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const circle = this.#circle = this.svgFactory.createElement(\"svg:ellipse\");\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n    svg.append(circle);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        vertices,\n        borderStyle,\n        popupRef\n      },\n      width,\n      height\n    } = this;\n    if (!vertices) {\n      return this.container;\n    }\n    const svg = this.svgFactory.create(width, height, true);\n    let points = [];\n    for (let i = 0, ii = vertices.length; i < ii; i += 2) {\n      const x = vertices[i] - rect[0];\n      const y = rect[3] - vertices[i + 1];\n      points.push(`${x},${y}`);\n    }\n    points = points.join(\" \");\n    const polyline = this.#polyline = this.svgFactory.createElement(this.svgElementName);\n    polyline.setAttribute(\"points\", points);\n    polyline.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n    svg.append(polyline);\n    this.container.append(svg);\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    super(parameters);\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"caretAnnotation\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass InkAnnotationElement extends AnnotationElement {\n  #polylinesGroupElement = null;\n  #polylines = [];\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"inkAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n    this.annotationEditorType = this.data.it === \"InkHighlight\" ? AnnotationEditorType.HIGHLIGHT : AnnotationEditorType.INK;\n  }\n  #getTransform(rotation, rect) {\n    switch (rotation) {\n      case 90:\n        return {\n          transform: `rotate(90) translate(${-rect[0]},${rect[1]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0]\n        };\n      case 180:\n        return {\n          transform: `rotate(180) translate(${-rect[2]},${rect[1]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1]\n        };\n      case 270:\n        return {\n          transform: `rotate(270) translate(${-rect[2]},${rect[3]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0]\n        };\n      default:\n        return {\n          transform: `translate(${-rect[0]},${rect[3]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1]\n        };\n    }\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        rotation,\n        inkLists,\n        borderStyle,\n        popupRef\n      }\n    } = this;\n    const {\n      transform,\n      width,\n      height\n    } = this.#getTransform(rotation, rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const g = this.#polylinesGroupElement = this.svgFactory.createElement(\"svg:g\");\n    svg.append(g);\n    g.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    g.setAttribute(\"stroke-linecap\", \"round\");\n    g.setAttribute(\"stroke-linejoin\", \"round\");\n    g.setAttribute(\"stroke-miterlimit\", 10);\n    g.setAttribute(\"stroke\", \"transparent\");\n    g.setAttribute(\"fill\", \"transparent\");\n    g.setAttribute(\"transform\", transform);\n    for (let i = 0, ii = inkLists.length; i < ii; i++) {\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute(\"points\", inkLists[i].join(\",\"));\n      g.append(polyline);\n    }\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(svg);\n    this._editOnDoubleClick();\n    return this.container;\n  }\n  updateEdited(params) {\n    super.updateEdited(params);\n    const {\n      thickness,\n      points,\n      rect\n    } = params;\n    const g = this.#polylinesGroupElement;\n    if (thickness >= 0) {\n      g.setAttribute(\"stroke-width\", thickness || 1);\n    }\n    if (points) {\n      for (let i = 0, ii = this.#polylines.length; i < ii; i++) {\n        this.#polylines[i].setAttribute(\"points\", points[i].join(\",\"));\n      }\n    }\n    if (rect) {\n      const {\n        transform,\n        width,\n        height\n      } = this.#getTransform(this.data.rotation, rect);\n      const root = g.parentElement;\n      root.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n      g.setAttribute(\"transform\", transform);\n    }\n  }\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n    this.annotationEditorType = AnnotationEditorType.HIGHLIGHT;\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"highlightAnnotation\");\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"underlineAnnotation\");\n    return this.container;\n  }\n}\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"squigglyAnnotation\");\n    return this.container;\n  }\n}\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"strikeoutAnnotation\");\n    return this.container;\n  }\n}\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.annotationEditorType = AnnotationEditorType.STAMP;\n  }\n  render() {\n    this.container.classList.add(\"stampAnnotation\");\n    this.container.setAttribute(\"role\", \"img\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n    const {\n      file\n    } = this.data;\n    this.filename = file.filename;\n    this.content = file.content;\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      ...file\n    });\n  }\n  render() {\n    this.container.classList.add(\"fileAttachmentAnnotation\");\n    const {\n      container,\n      data\n    } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement(\"div\");\n    } else {\n      trigger = document.createElement(\"img\");\n      trigger.src = `${this.imageResourcesPath}annotation-${/paperclip/i.test(data.name) ? \"paperclip\" : \"pushpin\"}.svg`;\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(data.fillAlpha * 100)}%);`;\n      }\n    }\n    trigger.addEventListener(\"dblclick\", this.#download.bind(this));\n    this.#trigger = trigger;\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    container.addEventListener(\"keydown\", evt => {\n      if (evt.key === \"Enter\" && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add(\"popupTriggerArea\");\n    }\n    container.append(trigger);\n    return container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.content, this.filename);\n  }\n}\nclass AnnotationLayer {\n  #accessibilityManager = null;\n  #annotationCanvasMap = null;\n  #editableAnnotations = new Map();\n  #structTreeLayer = null;\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    annotationEditorUIManager,\n    page,\n    viewport,\n    structTreeLayer\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.#structTreeLayer = structTreeLayer || null;\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n  }\n  hasEditableAnnotations() {\n    return this.#editableAnnotations.size > 0;\n  }\n  async #appendElement(element, id) {\n    const contentElement = element.firstChild || element;\n    const annotationId = contentElement.id = `${AnnotationPrefix}${id}`;\n    const ariaAttributes = await this.#structTreeLayer?.getAriaAttributes(annotationId);\n    if (ariaAttributes) {\n      for (const [key, value] of ariaAttributes) {\n        contentElement.setAttribute(key, value);\n      }\n    }\n    this.div.append(element);\n    this.#accessibilityManager?.moveElementInDOM(this.div, element, contentElement, false);\n  }\n  async render(params) {\n    const {\n      annotations\n    } = params;\n    const layer = this.div;\n    setLayerDimensions(layer, this.viewport);\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || \"\",\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new AnnotationStorage(),\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null\n    };\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        if (data.rect[2] === data.rect[0] || data.rect[3] === data.rect[1]) {\n          continue;\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = \"hidden\";\n      }\n      await this.#appendElement(rendered, data.id);\n      if (element._isEditable) {\n        this.#editableAnnotations.set(element.data.id, element);\n        this._annotationEditorUIManager?.renderAnnotationElement(element);\n      }\n    }\n    this.#setAnnotationCanvasMap();\n  }\n  async addLinkAnnotations(annotations, linkService) {\n    const elementParams = {\n      data: null,\n      layer: this.div,\n      linkService,\n      svgFactory: new DOMSVGFactory(),\n      parent: this\n    };\n    for (const data of annotations) {\n      data.borderStyle ||= AnnotationLayer._defaultBorderStyle;\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      const rendered = element.render();\n      await this.#appendElement(rendered, data.id);\n    }\n  }\n  update({\n    viewport\n  }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    setLayerDimensions(layer, {\n      rotation: viewport.rotation\n    });\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n      canvas.className = \"annotationContent\";\n      const {\n        firstChild\n      } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === \"CANVAS\") {\n        firstChild.replaceWith(canvas);\n      } else if (!firstChild.classList.contains(\"annotationContent\")) {\n        firstChild.before(canvas);\n      } else {\n        firstChild.after(canvas);\n      }\n      const editableAnnotation = this.#editableAnnotations.get(id);\n      if (!editableAnnotation) {\n        continue;\n      }\n      if (editableAnnotation._hasNoCanvas) {\n        this._annotationEditorUIManager?.setMissingCanvas(id, element.id, canvas);\n        editableAnnotation._hasNoCanvas = false;\n      } else {\n        editableAnnotation.canvas = canvas;\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n  static get _defaultBorderStyle() {\n    return shadow(this, \"_defaultBorderStyle\", Object.freeze({\n      width: 1,\n      rawWidth: 1,\n      style: AnnotationBorderStyleType.SOLID,\n      dashArray: [3],\n      horizontalCornerRadius: 0,\n      verticalCornerRadius: 0\n    }));\n  }\n}\n\n;// ./src/display/editor/freetext.js\n\n\n\n\nconst EOL_PATTERN = /\\r\\n?|\\n/g;\nclass FreeTextEditor extends AnnotationEditor {\n  #color;\n  #content = \"\";\n  #editorDivId = `${this.id}-editor`;\n  #editModeAC = null;\n  #fontSize;\n  static _freeTextDefaultContent = \"\";\n  static _internalPadding = 0;\n  static _defaultColor = null;\n  static _defaultFontSize = 10;\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n    const arrowChecker = self => self.isEmpty();\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+s\", \"mac+meta+s\", \"ctrl+p\", \"mac+meta+p\"], proto.commitOrRemove, {\n      bubbles: true\n    }], [[\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"], proto.commitOrRemove], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._translateEmpty, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto._translateEmpty, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._translateEmpty, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto._translateEmpty, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._translateEmpty, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto._translateEmpty, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  static _type = \"freetext\";\n  static _editorType = AnnotationEditorType.FREETEXT;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"freeTextEditor\"\n    });\n    this.#color = params.color || FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    const style = getComputedStyle(document.documentElement);\n    this._internalPadding = parseFloat(style.getPropertyValue(\"--freetext-padding\"));\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, FreeTextEditor._defaultFontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color]];\n  }\n  #updateFontSize(fontSize) {\n    const setFontsize = size => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--total-scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: setFontsize.bind(this, fontSize),\n      undo: setFontsize.bind(this, savedFontsize),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  #updateColor(color) {\n    const setColor = col => {\n      this.#color = this.editorDiv.style.color = col;\n    };\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, true);\n  }\n  getInitialTranslation() {\n    const scale = this.parentScale;\n    return [-FreeTextEditor._internalPadding * scale, -(FreeTextEditor._internalPadding + this.#fontSize) * scale];\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return;\n    }\n    this.parent.setEditingState(false);\n    this.parent.updateToolbar(AnnotationEditorType.FREETEXT);\n    super.enableEditMode();\n    this.overlayDiv.classList.remove(\"enabled\");\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute(\"aria-activedescendant\");\n    this.#editModeAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#editModeAC);\n    this.editorDiv.addEventListener(\"keydown\", this.editorDivKeydown.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"focus\", this.editorDivFocus.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"blur\", this.editorDivBlur.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"input\", this.editorDivInput.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"paste\", this.editorDivPaste.bind(this), {\n      signal\n    });\n  }\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    this.parent.setEditingState(true);\n    super.disableEditMode();\n    this.overlayDiv.classList.add(\"enabled\");\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute(\"aria-activedescendant\", this.#editorDivId);\n    this._isDraggable = true;\n    this.#editModeAC?.abort();\n    this.#editModeAC = null;\n    this.div.focus({\n      preventScroll: true\n    });\n    this.isEditing = false;\n    this.parent.div.classList.add(\"freetextEditing\");\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n  onceAdded(focus) {\n    if (this.width) {\n      return;\n    }\n    this.enableEditMode();\n    if (focus) {\n      this.editorDiv.focus();\n    }\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n  }\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add(\"freetextEditing\");\n    }\n    super.remove();\n  }\n  #extractText() {\n    const buffer = [];\n    this.editorDiv.normalize();\n    let prevChild = null;\n    for (const child of this.editorDiv.childNodes) {\n      if (prevChild?.nodeType === Node.TEXT_NODE && child.nodeName === \"BR\") {\n        continue;\n      }\n      buffer.push(FreeTextEditor.#getNodeContent(child));\n      prevChild = child;\n    }\n    return buffer.join(\"\\n\");\n  }\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      const {\n        currentLayer,\n        div\n      } = this;\n      const savedDisplay = div.style.display;\n      const savedVisibility = div.classList.contains(\"hidden\");\n      div.classList.remove(\"hidden\");\n      div.style.display = \"hidden\";\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n      div.classList.toggle(\"hidden\", savedVisibility);\n    }\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = this.#content = this.#extractText().trimEnd();\n    if (savedText === newText) {\n      return;\n    }\n    const setText = text => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false\n    });\n    this.#setEditorDimensions();\n  }\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n  dblclick(event) {\n    this.enterInEditMode();\n  }\n  keydown(event) {\n    if (event.target === this.div && event.key === \"Enter\") {\n      this.enterInEditMode();\n      event.preventDefault();\n    }\n  }\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n  editorDivInput(event) {\n    this.parent.div.classList.toggle(\"freetextEditing\", this.isEmpty());\n  }\n  disableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"comment\");\n    this.editorDiv.removeAttribute(\"aria-multiline\");\n  }\n  enableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"textbox\");\n    this.editorDiv.setAttribute(\"aria-multiline\", true);\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy || this.annotationElementId) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.editorDiv = document.createElement(\"div\");\n    this.editorDiv.className = \"internal\";\n    this.editorDiv.setAttribute(\"id\", this.#editorDivId);\n    this.editorDiv.setAttribute(\"data-l10n-id\", \"pdfjs-free-text2\");\n    this.editorDiv.setAttribute(\"data-l10n-attrs\", \"default-content\");\n    this.enableEditing();\n    this.editorDiv.contentEditable = true;\n    const {\n      style\n    } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.#color;\n    this.div.append(this.editorDiv);\n    this.overlayDiv = document.createElement(\"div\");\n    this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n    this.div.append(this.overlayDiv);\n    bindEvents(this, this.div, [\"dblclick\", \"keydown\"]);\n    if (this._isCopy || this.annotationElementId) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        const {\n          position\n        } = this._initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX = baseX + (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY = baseY + (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this._moveAfterPaste(baseX, baseY);\n      }\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n    return this.div;\n  }\n  static #getNodeContent(node) {\n    return (node.nodeType === Node.TEXT_NODE ? node.nodeValue : node.innerText).replaceAll(EOL_PATTERN, \"\");\n  }\n  editorDivPaste(event) {\n    const clipboardData = event.clipboardData || window.clipboardData;\n    const {\n      types\n    } = clipboardData;\n    if (types.length === 1 && types[0] === \"text/plain\") {\n      return;\n    }\n    event.preventDefault();\n    const paste = FreeTextEditor.#deserializeContent(clipboardData.getData(\"text\") || \"\").replaceAll(EOL_PATTERN, \"\\n\");\n    if (!paste) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (!selection.rangeCount) {\n      return;\n    }\n    this.editorDiv.normalize();\n    selection.deleteFromDocument();\n    const range = selection.getRangeAt(0);\n    if (!paste.includes(\"\\n\")) {\n      range.insertNode(document.createTextNode(paste));\n      this.editorDiv.normalize();\n      selection.collapseToStart();\n      return;\n    }\n    const {\n      startContainer,\n      startOffset\n    } = range;\n    const bufferBefore = [];\n    const bufferAfter = [];\n    if (startContainer.nodeType === Node.TEXT_NODE) {\n      const parent = startContainer.parentElement;\n      bufferAfter.push(startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN, \"\"));\n      if (parent !== this.editorDiv) {\n        let buffer = bufferBefore;\n        for (const child of this.editorDiv.childNodes) {\n          if (child === parent) {\n            buffer = bufferAfter;\n            continue;\n          }\n          buffer.push(FreeTextEditor.#getNodeContent(child));\n        }\n      }\n      bufferBefore.push(startContainer.nodeValue.slice(0, startOffset).replaceAll(EOL_PATTERN, \"\"));\n    } else if (startContainer === this.editorDiv) {\n      let buffer = bufferBefore;\n      let i = 0;\n      for (const child of this.editorDiv.childNodes) {\n        if (i++ === startOffset) {\n          buffer = bufferAfter;\n        }\n        buffer.push(FreeTextEditor.#getNodeContent(child));\n      }\n    }\n    this.#content = `${bufferBefore.join(\"\\n\")}${paste}${bufferAfter.join(\"\\n\")}`;\n    this.#setContent();\n    const newRange = new Range();\n    let beforeLength = Math.sumPrecise(bufferBefore.map(line => line.length));\n    for (const {\n      firstChild\n    } of this.editorDiv.childNodes) {\n      if (firstChild.nodeType === Node.TEXT_NODE) {\n        const length = firstChild.nodeValue.length;\n        if (beforeLength <= length) {\n          newRange.setStart(firstChild, beforeLength);\n          newRange.setEnd(firstChild, beforeLength);\n          break;\n        }\n        beforeLength -= length;\n      }\n    }\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      this.editorDiv.append(div);\n    }\n  }\n  #serializeContent() {\n    return this.#content.replaceAll(\"\\xa0\", \" \");\n  }\n  static #deserializeContent(content) {\n    return content.replaceAll(\" \", \"\\xa0\");\n  }\n  get contentDiv() {\n    return this.editorDiv;\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: {\n            fontSize,\n            fontColor\n          },\n          rect,\n          rotation,\n          id,\n          popupRef\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      if (!textContent || textContent.length === 0) {\n        return null;\n      }\n      initialData = data = {\n        annotationType: AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join(\"\\n\"),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#fontSize = data.fontSize;\n    editor.#color = Util.makeHexColor(...data.color);\n    editor.#content = FreeTextEditor.#deserializeContent(data.value);\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    const rect = this.getRect(padding, padding);\n    const color = AnnotationEditor._colorManager.convert(this.isAttachedToDOM ? getComputedStyle(this.editorDiv).color : this.#color);\n    const serialized = {\n      annotationType: AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#serializeContent(),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      value,\n      fontSize,\n      color,\n      pageIndex\n    } = this._initialData;\n    return this._hasBeenMoved || serialized.value !== value || serialized.fontSize !== fontSize || serialized.color.some((c, i) => c !== color[i]) || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const content = super.renderAnnotationElement(annotation);\n    if (this.deleted) {\n      return content;\n    }\n    const {\n      style\n    } = content;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.#color;\n    content.replaceChildren();\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      content.append(div);\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    annotation.updateEdited({\n      rect: this.getRect(padding, padding),\n      popupContent: this.#content\n    });\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    super.resetAnnotationElement(annotation);\n    annotation.resetEdited();\n  }\n}\n\n;// ./src/display/editor/drawers/outline.js\n\nclass Outline {\n  static PRECISION = 1e-4;\n  toSVGPath() {\n    unreachable(\"Abstract method `toSVGPath` must be implemented.\");\n  }\n  get box() {\n    unreachable(\"Abstract getter `box` must be implemented.\");\n  }\n  serialize(_bbox, _rotation) {\n    unreachable(\"Abstract method `serialize` must be implemented.\");\n  }\n  static _rescale(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i] * sx;\n      dest[i + 1] = ty + src[i + 1] * sy;\n    }\n    return dest;\n  }\n  static _rescaleAndSwap(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i + 1] * sx;\n      dest[i + 1] = ty + src[i] * sy;\n    }\n    return dest;\n  }\n  static _translate(src, tx, ty, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i];\n      dest[i + 1] = ty + src[i + 1];\n    }\n    return dest;\n  }\n  static svgRound(x) {\n    return Math.round(x * 10000);\n  }\n  static _normalizePoint(x, y, parentWidth, parentHeight, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y / parentWidth, x / parentHeight];\n      case 180:\n        return [1 - x / parentWidth, 1 - y / parentHeight];\n      case 270:\n        return [y / parentWidth, 1 - x / parentHeight];\n      default:\n        return [x / parentWidth, y / parentHeight];\n    }\n  }\n  static _normalizePagePoint(x, y, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y, x];\n      case 180:\n        return [1 - x, 1 - y];\n      case 270:\n        return [y, 1 - x];\n      default:\n        return [x, y];\n    }\n  }\n  static createBezierPoints(x1, y1, x2, y2, x3, y3) {\n    return [(x1 + 5 * x2) / 6, (y1 + 5 * y2) / 6, (5 * x2 + x3) / 6, (5 * y2 + y3) / 6, (x2 + x3) / 2, (y2 + y3) / 2];\n  }\n}\n\n;// ./src/display/editor/drawers/freedraw.js\n\n\nclass FreeDrawOutliner {\n  #box;\n  #bottom = [];\n  #innerMargin;\n  #isLTR;\n  #top = [];\n  #last = new Float32Array(18);\n  #lastX;\n  #lastY;\n  #min;\n  #min_dist;\n  #scaleFactor;\n  #thickness;\n  #points = [];\n  static #MIN_DIST = 8;\n  static #MIN_DIFF = 2;\n  static #MIN = FreeDrawOutliner.#MIN_DIST + FreeDrawOutliner.#MIN_DIFF;\n  constructor({\n    x,\n    y\n  }, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    this.#box = box;\n    this.#thickness = thickness * scaleFactor;\n    this.#isLTR = isLTR;\n    this.#last.set([NaN, NaN, NaN, NaN, x, y], 6);\n    this.#innerMargin = innerMargin;\n    this.#min_dist = FreeDrawOutliner.#MIN_DIST * scaleFactor;\n    this.#min = FreeDrawOutliner.#MIN * scaleFactor;\n    this.#scaleFactor = scaleFactor;\n    this.#points.push(x, y);\n  }\n  isEmpty() {\n    return isNaN(this.#last[8]);\n  }\n  #getLastCoords() {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    return [(this.#lastX + (lastTop[0] - lastBottom[0]) / 2 - x) / width, (this.#lastY + (lastTop[1] - lastBottom[1]) / 2 - y) / height, (this.#lastX + (lastBottom[0] - lastTop[0]) / 2 - x) / width, (this.#lastY + (lastBottom[1] - lastTop[1]) / 2 - y) / height];\n  }\n  add({\n    x,\n    y\n  }) {\n    this.#lastX = x;\n    this.#lastY = y;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    let [x1, y1, x2, y2] = this.#last.subarray(8, 12);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(diffX, diffY);\n    if (d < this.#min) {\n      return false;\n    }\n    const diffD = d - this.#min_dist;\n    const K = diffD / d;\n    const shiftX = K * diffX;\n    const shiftY = K * diffY;\n    let x0 = x1;\n    let y0 = y1;\n    x1 = x2;\n    y1 = y2;\n    x2 += shiftX;\n    y2 += shiftY;\n    this.#points?.push(x, y);\n    const nX = -shiftY / diffD;\n    const nY = shiftX / diffD;\n    const thX = nX * this.#thickness;\n    const thY = nY * this.#thickness;\n    this.#last.set(this.#last.subarray(2, 8), 0);\n    this.#last.set([x2 + thX, y2 + thY], 4);\n    this.#last.set(this.#last.subarray(14, 18), 12);\n    this.#last.set([x2 - thX, y2 - thY], 16);\n    if (isNaN(this.#last[6])) {\n      if (this.#top.length === 0) {\n        this.#last.set([x1 + thX, y1 + thY], 2);\n        this.#top.push(NaN, NaN, NaN, NaN, (x1 + thX - layerX) / layerWidth, (y1 + thY - layerY) / layerHeight);\n        this.#last.set([x1 - thX, y1 - thY], 14);\n        this.#bottom.push(NaN, NaN, NaN, NaN, (x1 - thX - layerX) / layerWidth, (y1 - thY - layerY) / layerHeight);\n      }\n      this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n      return !this.isEmpty();\n    }\n    this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n    const angle = Math.abs(Math.atan2(y0 - y1, x0 - x1) - Math.atan2(shiftY, shiftX));\n    if (angle < Math.PI / 2) {\n      [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n      this.#top.push(NaN, NaN, NaN, NaN, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n      [x1, y1, x0, y0] = this.#last.subarray(14, 18);\n      this.#bottom.push(NaN, NaN, NaN, NaN, ((x0 + x1) / 2 - layerX) / layerWidth, ((y0 + y1) / 2 - layerY) / layerHeight);\n      return true;\n    }\n    [x0, y0, x1, y1, x2, y2] = this.#last.subarray(0, 6);\n    this.#top.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    [x2, y2, x1, y1, x0, y0] = this.#last.subarray(12, 18);\n    this.#bottom.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    return true;\n  }\n  toSVGPath() {\n    if (this.isEmpty()) {\n      return \"\";\n    }\n    const top = this.#top;\n    const bottom = this.#bottom;\n    if (isNaN(this.#last[6]) && !this.isEmpty()) {\n      return this.#toSVGPathTwoPoints();\n    }\n    const buffer = [];\n    buffer.push(`M${top[4]} ${top[5]}`);\n    for (let i = 6; i < top.length; i += 6) {\n      if (isNaN(top[i])) {\n        buffer.push(`L${top[i + 4]} ${top[i + 5]}`);\n      } else {\n        buffer.push(`C${top[i]} ${top[i + 1]} ${top[i + 2]} ${top[i + 3]} ${top[i + 4]} ${top[i + 5]}`);\n      }\n    }\n    this.#toSVGPathEnd(buffer);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      if (isNaN(bottom[i])) {\n        buffer.push(`L${bottom[i + 4]} ${bottom[i + 5]}`);\n      } else {\n        buffer.push(`C${bottom[i]} ${bottom[i + 1]} ${bottom[i + 2]} ${bottom[i + 3]} ${bottom[i + 4]} ${bottom[i + 5]}`);\n      }\n    }\n    this.#toSVGPathStart(buffer);\n    return buffer.join(\" \");\n  }\n  #toSVGPathTwoPoints() {\n    const [x, y, width, height] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    return `M${(this.#last[2] - x) / width} ${(this.#last[3] - y) / height} L${(this.#last[4] - x) / width} ${(this.#last[5] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(this.#last[16] - x) / width} ${(this.#last[17] - y) / height} L${(this.#last[14] - x) / width} ${(this.#last[15] - y) / height} Z`;\n  }\n  #toSVGPathStart(buffer) {\n    const bottom = this.#bottom;\n    buffer.push(`L${bottom[4]} ${bottom[5]} Z`);\n  }\n  #toSVGPathEnd(buffer) {\n    const [x, y, width, height] = this.#box;\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    buffer.push(`L${(lastTop[0] - x) / width} ${(lastTop[1] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(lastBottom[0] - x) / width} ${(lastBottom[1] - y) / height}`);\n  }\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR);\n  }\n  getOutlines() {\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const points = new Float32Array((this.#points?.length ?? 0) + 2);\n    for (let i = 0, ii = points.length - 2; i < ii; i += 2) {\n      points[i] = (this.#points[i] - layerX) / layerWidth;\n      points[i + 1] = (this.#points[i + 1] - layerY) / layerHeight;\n    }\n    points[points.length - 2] = (this.#lastX - layerX) / layerWidth;\n    points[points.length - 1] = (this.#lastY - layerY) / layerHeight;\n    if (isNaN(last[6]) && !this.isEmpty()) {\n      return this.#getOutlineTwoPoints(points);\n    }\n    const outline = new Float32Array(this.#top.length + 24 + this.#bottom.length);\n    let N = top.length;\n    for (let i = 0; i < N; i += 2) {\n      if (isNaN(top[i])) {\n        outline[i] = outline[i + 1] = NaN;\n        continue;\n      }\n      outline[i] = top[i];\n      outline[i + 1] = top[i + 1];\n    }\n    N = this.#getOutlineEnd(outline, N);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      for (let j = 0; j < 6; j += 2) {\n        if (isNaN(bottom[i + j])) {\n          outline[N] = outline[N + 1] = NaN;\n          N += 2;\n          continue;\n        }\n        outline[N] = bottom[i + j];\n        outline[N + 1] = bottom[i + j + 1];\n        N += 2;\n      }\n    }\n    this.#getOutlineStart(outline, N);\n    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n  #getOutlineTwoPoints(points) {\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    const outline = new Float32Array(36);\n    outline.set([NaN, NaN, NaN, NaN, (last[2] - layerX) / layerWidth, (last[3] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[4] - layerX) / layerWidth, (last[5] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (last[16] - layerX) / layerWidth, (last[17] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[14] - layerX) / layerWidth, (last[15] - layerY) / layerHeight], 0);\n    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n  #getOutlineStart(outline, pos) {\n    const bottom = this.#bottom;\n    outline.set([NaN, NaN, NaN, NaN, bottom[4], bottom[5]], pos);\n    return pos += 6;\n  }\n  #getOutlineEnd(outline, pos) {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    outline.set([NaN, NaN, NaN, NaN, (lastTop[0] - layerX) / layerWidth, (lastTop[1] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (lastBottom[0] - layerX) / layerWidth, (lastBottom[1] - layerY) / layerHeight], pos);\n    return pos += 24;\n  }\n}\nclass FreeDrawOutline extends Outline {\n  #box;\n  #bbox = new Float32Array(4);\n  #innerMargin;\n  #isLTR;\n  #points;\n  #scaleFactor;\n  #outline;\n  constructor(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    super();\n    this.#outline = outline;\n    this.#points = points;\n    this.#box = box;\n    this.#scaleFactor = scaleFactor;\n    this.#innerMargin = innerMargin;\n    this.#isLTR = isLTR;\n    this.lastPoint = [NaN, NaN];\n    this.#computeMinMax(isLTR);\n    const [x, y, width, height] = this.#bbox;\n    for (let i = 0, ii = outline.length; i < ii; i += 2) {\n      outline[i] = (outline[i] - x) / width;\n      outline[i + 1] = (outline[i + 1] - y) / height;\n    }\n    for (let i = 0, ii = points.length; i < ii; i += 2) {\n      points[i] = (points[i] - x) / width;\n      points[i + 1] = (points[i + 1] - y) / height;\n    }\n  }\n  toSVGPath() {\n    const buffer = [`M${this.#outline[4]} ${this.#outline[5]}`];\n    for (let i = 6, ii = this.#outline.length; i < ii; i += 6) {\n      if (isNaN(this.#outline[i])) {\n        buffer.push(`L${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n        continue;\n      }\n      buffer.push(`C${this.#outline[i]} ${this.#outline[i + 1]} ${this.#outline[i + 2]} ${this.#outline[i + 3]} ${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n    }\n    buffer.push(\"Z\");\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], rotation) {\n    const width = trX - blX;\n    const height = trY - blY;\n    let outline;\n    let points;\n    switch (rotation) {\n      case 0:\n        outline = Outline._rescale(this.#outline, blX, trY, width, -height);\n        points = Outline._rescale(this.#points, blX, trY, width, -height);\n        break;\n      case 90:\n        outline = Outline._rescaleAndSwap(this.#outline, blX, blY, width, height);\n        points = Outline._rescaleAndSwap(this.#points, blX, blY, width, height);\n        break;\n      case 180:\n        outline = Outline._rescale(this.#outline, trX, blY, -width, height);\n        points = Outline._rescale(this.#points, trX, blY, -width, height);\n        break;\n      case 270:\n        outline = Outline._rescaleAndSwap(this.#outline, trX, trY, -width, -height);\n        points = Outline._rescaleAndSwap(this.#points, trX, trY, -width, -height);\n        break;\n    }\n    return {\n      outline: Array.from(outline),\n      points: [Array.from(points)]\n    };\n  }\n  #computeMinMax(isLTR) {\n    const outline = this.#outline;\n    let lastX = outline[4];\n    let lastY = outline[5];\n    const minMax = [lastX, lastY, lastX, lastY];\n    let lastPointX = lastX;\n    let lastPointY = lastY;\n    const ltrCallback = isLTR ? Math.max : Math.min;\n    for (let i = 6, ii = outline.length; i < ii; i += 6) {\n      const x = outline[i + 4],\n        y = outline[i + 5];\n      if (isNaN(outline[i])) {\n        Util.pointBoundingBox(x, y, minMax);\n        if (lastPointY < y) {\n          lastPointX = x;\n          lastPointY = y;\n        } else if (lastPointY === y) {\n          lastPointX = ltrCallback(lastPointX, x);\n        }\n      } else {\n        const bbox = [Infinity, Infinity, -Infinity, -Infinity];\n        Util.bezierBoundingBox(lastX, lastY, ...outline.slice(i, i + 6), bbox);\n        Util.rectBoundingBox(...bbox, minMax);\n        if (lastPointY < bbox[3]) {\n          lastPointX = bbox[2];\n          lastPointY = bbox[3];\n        } else if (lastPointY === bbox[3]) {\n          lastPointX = ltrCallback(lastPointX, bbox[2]);\n        }\n      }\n      lastX = x;\n      lastY = y;\n    }\n    const bbox = this.#bbox;\n    bbox[0] = minMax[0] - this.#innerMargin;\n    bbox[1] = minMax[1] - this.#innerMargin;\n    bbox[2] = minMax[2] - minMax[0] + 2 * this.#innerMargin;\n    bbox[3] = minMax[3] - minMax[1] + 2 * this.#innerMargin;\n    this.lastPoint = [lastPointX, lastPointY];\n  }\n  get box() {\n    return this.#bbox;\n  }\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeDrawOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);\n  }\n  getNewOutline(thickness, innerMargin) {\n    const [x, y, width, height] = this.#bbox;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const sx = width * layerWidth;\n    const sy = height * layerHeight;\n    const tx = x * layerWidth + layerX;\n    const ty = y * layerHeight + layerY;\n    const outliner = this.newOutliner({\n      x: this.#points[0] * sx + tx,\n      y: this.#points[1] * sy + ty\n    }, this.#box, this.#scaleFactor, thickness, this.#isLTR, innerMargin ?? this.#innerMargin);\n    for (let i = 2; i < this.#points.length; i += 2) {\n      outliner.add({\n        x: this.#points[i] * sx + tx,\n        y: this.#points[i + 1] * sy + ty\n      });\n    }\n    return outliner.getOutlines();\n  }\n}\n\n;// ./src/display/editor/drawers/highlight.js\n\n\n\nclass HighlightOutliner {\n  #box;\n  #lastPoint;\n  #verticalEdges = [];\n  #intervals = [];\n  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {\n    const minMax = [Infinity, Infinity, -Infinity, -Infinity];\n    const NUMBER_OF_DIGITS = 4;\n    const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n      const left = [x1, y1, y2, true];\n      const right = [x2, y1, y2, false];\n      this.#verticalEdges.push(left, right);\n      Util.rectBoundingBox(x1, y1, x2, y2, minMax);\n    }\n    const bboxWidth = minMax[2] - minMax[0] + 2 * innerMargin;\n    const bboxHeight = minMax[3] - minMax[1] + 2 * innerMargin;\n    const shiftedMinX = minMax[0] - innerMargin;\n    const shiftedMinY = minMax[1] - innerMargin;\n    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);\n    const lastPoint = [lastEdge[0], lastEdge[2]];\n    for (const edge of this.#verticalEdges) {\n      const [x, y1, y2] = edge;\n      edge[0] = (x - shiftedMinX) / bboxWidth;\n      edge[1] = (y1 - shiftedMinY) / bboxHeight;\n      edge[2] = (y2 - shiftedMinY) / bboxHeight;\n    }\n    this.#box = new Float32Array([shiftedMinX, shiftedMinY, bboxWidth, bboxHeight]);\n    this.#lastPoint = lastPoint;\n  }\n  getOutlines() {\n    this.#verticalEdges.sort((a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]);\n    const outlineVerticalEdges = [];\n    for (const edge of this.#verticalEdges) {\n      if (edge[3]) {\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n        this.#insert(edge);\n      } else {\n        this.#remove(edge);\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n      }\n    }\n    return this.#getOutlines(outlineVerticalEdges);\n  }\n  #getOutlines(outlineVerticalEdges) {\n    const edges = [];\n    const allEdges = new Set();\n    for (const edge of outlineVerticalEdges) {\n      const [x, y1, y2] = edge;\n      edges.push([x, y1, edge], [x, y2, edge]);\n    }\n    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n    for (let i = 0, ii = edges.length; i < ii; i += 2) {\n      const edge1 = edges[i][2];\n      const edge2 = edges[i + 1][2];\n      edge1.push(edge2);\n      edge2.push(edge1);\n      allEdges.add(edge1);\n      allEdges.add(edge2);\n    }\n    const outlines = [];\n    let outline;\n    while (allEdges.size > 0) {\n      const edge = allEdges.values().next().value;\n      let [x, y1, y2, edge1, edge2] = edge;\n      allEdges.delete(edge);\n      let lastPointX = x;\n      let lastPointY = y1;\n      outline = [x, y2];\n      outlines.push(outline);\n      while (true) {\n        let e;\n        if (allEdges.has(edge1)) {\n          e = edge1;\n        } else if (allEdges.has(edge2)) {\n          e = edge2;\n        } else {\n          break;\n        }\n        allEdges.delete(e);\n        [x, y1, y2, edge1, edge2] = e;\n        if (lastPointX !== x) {\n          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n          lastPointX = x;\n        }\n        lastPointY = lastPointY === y1 ? y2 : y1;\n      }\n      outline.push(lastPointX, lastPointY);\n    }\n    return new HighlightOutline(outlines, this.#box, this.#lastPoint);\n  }\n  #binarySearch(y) {\n    const array = this.#intervals;\n    let start = 0;\n    let end = array.length - 1;\n    while (start <= end) {\n      const middle = start + end >> 1;\n      const y1 = array[middle][0];\n      if (y1 === y) {\n        return middle;\n      }\n      if (y1 < y) {\n        start = middle + 1;\n      } else {\n        end = middle - 1;\n      }\n    }\n    return end + 1;\n  }\n  #insert([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    this.#intervals.splice(index, 0, [y1, y2]);\n  }\n  #remove([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    for (let i = index; i < this.#intervals.length; i++) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n    for (let i = index - 1; i >= 0; i--) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n  }\n  #breakEdge(edge) {\n    const [x, y1, y2] = edge;\n    const results = [[x, y1, y2]];\n    const index = this.#binarySearch(y2);\n    for (let i = 0; i < index; i++) {\n      const [start, end] = this.#intervals[i];\n      for (let j = 0, jj = results.length; j < jj; j++) {\n        const [, y3, y4] = results[j];\n        if (end <= y3 || y4 <= start) {\n          continue;\n        }\n        if (y3 >= start) {\n          if (y4 > end) {\n            results[j][1] = end;\n          } else {\n            if (jj === 1) {\n              return [];\n            }\n            results.splice(j, 1);\n            j--;\n            jj--;\n          }\n          continue;\n        }\n        results[j][2] = start;\n        if (y4 > end) {\n          results.push([x, end, y4]);\n        }\n      }\n    }\n    return results;\n  }\n}\nclass HighlightOutline extends Outline {\n  #box;\n  #outlines;\n  constructor(outlines, box, lastPoint) {\n    super();\n    this.#outlines = outlines;\n    this.#box = box;\n    this.lastPoint = lastPoint;\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const polygon of this.#outlines) {\n      let [prevX, prevY] = polygon;\n      buffer.push(`M${prevX} ${prevY}`);\n      for (let i = 2; i < polygon.length; i += 2) {\n        const x = polygon[i];\n        const y = polygon[i + 1];\n        if (x === prevX) {\n          buffer.push(`V${y}`);\n          prevY = y;\n        } else if (y === prevY) {\n          buffer.push(`H${x}`);\n          prevX = x;\n        }\n      }\n      buffer.push(\"Z\");\n    }\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], _rotation) {\n    const outlines = [];\n    const width = trX - blX;\n    const height = trY - blY;\n    for (const outline of this.#outlines) {\n      const points = new Array(outline.length);\n      for (let i = 0; i < outline.length; i += 2) {\n        points[i] = blX + outline[i] * width;\n        points[i + 1] = trY - outline[i + 1] * height;\n      }\n      outlines.push(points);\n    }\n    return outlines;\n  }\n  get box() {\n    return this.#box;\n  }\n  get classNamesForOutlining() {\n    return [\"highlightOutline\"];\n  }\n}\nclass FreeHighlightOutliner extends FreeDrawOutliner {\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeHighlightOutline(outline, points, box, scaleFactor, innerMargin, isLTR);\n  }\n}\nclass FreeHighlightOutline extends FreeDrawOutline {\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeHighlightOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);\n  }\n}\n\n;// ./src/display/editor/color_picker.js\n\n\n\nclass ColorPicker {\n  #button = null;\n  #buttonSwatch = null;\n  #defaultColor;\n  #dropdown = null;\n  #dropdownWasFromKeyboard = false;\n  #isMainColorPicker = false;\n  #editor = null;\n  #eventBus;\n  #openDropdownAC = null;\n  #uiManager = null;\n  #type;\n  static #l10nColor = null;\n  static get _keyboardManager() {\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"Escape\", \"mac+Escape\"], ColorPicker.prototype._hideDropdownFromKeyboard], [[\" \", \"mac+ \"], ColorPicker.prototype._colorSelectFromKeyboard], [[\"ArrowDown\", \"ArrowRight\", \"mac+ArrowDown\", \"mac+ArrowRight\"], ColorPicker.prototype._moveToNext], [[\"ArrowUp\", \"ArrowLeft\", \"mac+ArrowUp\", \"mac+ArrowLeft\"], ColorPicker.prototype._moveToPrevious], [[\"Home\", \"mac+Home\"], ColorPicker.prototype._moveToBeginning], [[\"End\", \"mac+End\"], ColorPicker.prototype._moveToEnd]]));\n  }\n  constructor({\n    editor = null,\n    uiManager = null\n  }) {\n    if (editor) {\n      this.#isMainColorPicker = false;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_COLOR;\n      this.#editor = editor;\n    } else {\n      this.#isMainColorPicker = true;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR;\n    }\n    this.#uiManager = editor?._uiManager || uiManager;\n    this.#eventBus = this.#uiManager._eventBus;\n    this.#defaultColor = editor?.color || this.#uiManager?.highlightColors.values().next().value || \"#FFFF98\";\n    ColorPicker.#l10nColor ||= Object.freeze({\n      blue: \"pdfjs-editor-colorpicker-blue\",\n      green: \"pdfjs-editor-colorpicker-green\",\n      pink: \"pdfjs-editor-colorpicker-pink\",\n      red: \"pdfjs-editor-colorpicker-red\",\n      yellow: \"pdfjs-editor-colorpicker-yellow\"\n    });\n  }\n  renderButton() {\n    const button = this.#button = document.createElement(\"button\");\n    button.className = \"colorPicker\";\n    button.tabIndex = \"0\";\n    button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-button\");\n    button.setAttribute(\"aria-haspopup\", true);\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"click\", this.#openDropdown.bind(this), {\n      signal\n    });\n    button.addEventListener(\"keydown\", this.#keyDown.bind(this), {\n      signal\n    });\n    const swatch = this.#buttonSwatch = document.createElement(\"span\");\n    swatch.className = \"swatch\";\n    swatch.setAttribute(\"aria-hidden\", true);\n    swatch.style.backgroundColor = this.#defaultColor;\n    button.append(swatch);\n    return button;\n  }\n  renderMainDropdown() {\n    const dropdown = this.#dropdown = this.#getDropdownRoot();\n    dropdown.setAttribute(\"aria-orientation\", \"horizontal\");\n    dropdown.setAttribute(\"aria-labelledby\", \"highlightColorPickerLabel\");\n    return dropdown;\n  }\n  #getDropdownRoot() {\n    const div = document.createElement(\"div\");\n    const signal = this.#uiManager._signal;\n    div.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    div.className = \"dropdown\";\n    div.role = \"listbox\";\n    div.setAttribute(\"aria-multiselectable\", false);\n    div.setAttribute(\"aria-orientation\", \"vertical\");\n    div.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-dropdown\");\n    for (const [name, color] of this.#uiManager.highlightColors) {\n      const button = document.createElement(\"button\");\n      button.tabIndex = \"0\";\n      button.role = \"option\";\n      button.setAttribute(\"data-color\", color);\n      button.title = name;\n      button.setAttribute(\"data-l10n-id\", ColorPicker.#l10nColor[name]);\n      const swatch = document.createElement(\"span\");\n      button.append(swatch);\n      swatch.className = \"swatch\";\n      swatch.style.backgroundColor = color;\n      button.setAttribute(\"aria-selected\", color === this.#defaultColor);\n      button.addEventListener(\"click\", this.#colorSelect.bind(this, color), {\n        signal\n      });\n      div.append(button);\n    }\n    div.addEventListener(\"keydown\", this.#keyDown.bind(this), {\n      signal\n    });\n    return div;\n  }\n  #colorSelect(color, event) {\n    event.stopPropagation();\n    this.#eventBus.dispatch(\"switchannotationeditorparams\", {\n      source: this,\n      type: this.#type,\n      value: color\n    });\n  }\n  _colorSelectFromKeyboard(event) {\n    if (event.target === this.#button) {\n      this.#openDropdown(event);\n      return;\n    }\n    const color = event.target.getAttribute(\"data-color\");\n    if (!color) {\n      return;\n    }\n    this.#colorSelect(color, event);\n  }\n  _moveToNext(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    if (event.target === this.#button) {\n      this.#dropdown.firstChild?.focus();\n      return;\n    }\n    event.target.nextSibling?.focus();\n  }\n  _moveToPrevious(event) {\n    if (event.target === this.#dropdown?.firstChild || event.target === this.#button) {\n      if (this.#isDropdownVisible) {\n        this._hideDropdownFromKeyboard();\n      }\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n    }\n    event.target.previousSibling?.focus();\n  }\n  _moveToBeginning(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.firstChild?.focus();\n  }\n  _moveToEnd(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.lastChild?.focus();\n  }\n  #keyDown(event) {\n    ColorPicker._keyboardManager.exec(this, event);\n  }\n  #openDropdown(event) {\n    if (this.#isDropdownVisible) {\n      this.hideDropdown();\n      return;\n    }\n    this.#dropdownWasFromKeyboard = event.detail === 0;\n    if (!this.#openDropdownAC) {\n      this.#openDropdownAC = new AbortController();\n      window.addEventListener(\"pointerdown\", this.#pointerDown.bind(this), {\n        signal: this.#uiManager.combinedSignal(this.#openDropdownAC)\n      });\n    }\n    if (this.#dropdown) {\n      this.#dropdown.classList.remove(\"hidden\");\n      return;\n    }\n    const root = this.#dropdown = this.#getDropdownRoot();\n    this.#button.append(root);\n  }\n  #pointerDown(event) {\n    if (this.#dropdown?.contains(event.target)) {\n      return;\n    }\n    this.hideDropdown();\n  }\n  hideDropdown() {\n    this.#dropdown?.classList.add(\"hidden\");\n    this.#openDropdownAC?.abort();\n    this.#openDropdownAC = null;\n  }\n  get #isDropdownVisible() {\n    return this.#dropdown && !this.#dropdown.classList.contains(\"hidden\");\n  }\n  _hideDropdownFromKeyboard() {\n    if (this.#isMainColorPicker) {\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#editor?.unselect();\n      return;\n    }\n    this.hideDropdown();\n    this.#button.focus({\n      preventScroll: true,\n      focusVisible: this.#dropdownWasFromKeyboard\n    });\n  }\n  updateColor(color) {\n    if (this.#buttonSwatch) {\n      this.#buttonSwatch.style.backgroundColor = color;\n    }\n    if (!this.#dropdown) {\n      return;\n    }\n    const i = this.#uiManager.highlightColors.values();\n    for (const child of this.#dropdown.children) {\n      child.setAttribute(\"aria-selected\", i.next().value === color);\n    }\n  }\n  destroy() {\n    this.#button?.remove();\n    this.#button = null;\n    this.#buttonSwatch = null;\n    this.#dropdown?.remove();\n    this.#dropdown = null;\n  }\n}\n\n;// ./src/display/editor/highlight.js\n\n\n\n\n\n\n\nclass HighlightEditor extends AnnotationEditor {\n  #anchorNode = null;\n  #anchorOffset = 0;\n  #boxes;\n  #clipPathId = null;\n  #colorPicker = null;\n  #focusOutlines = null;\n  #focusNode = null;\n  #focusOffset = 0;\n  #highlightDiv = null;\n  #highlightOutlines = null;\n  #id = null;\n  #isFreeHighlight = false;\n  #lastPoint = null;\n  #opacity;\n  #outlineId = null;\n  #text = \"\";\n  #thickness;\n  #methodOfCreation = \"\";\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 12;\n  static _type = \"highlight\";\n  static _editorType = AnnotationEditorType.HIGHLIGHT;\n  static _freeHighlightId = -1;\n  static _freeHighlight = null;\n  static _freeHighlightClipId = \"\";\n  static get _keyboardManager() {\n    const proto = HighlightEditor.prototype;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._moveCaret, {\n      args: [0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._moveCaret, {\n      args: [1]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._moveCaret, {\n      args: [2]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._moveCaret, {\n      args: [3]\n    }]]));\n  }\n  constructor(params) {\n    super({\n      ...params,\n      name: \"highlightEditor\"\n    });\n    this.color = params.color || HighlightEditor._defaultColor;\n    this.#thickness = params.thickness || HighlightEditor._defaultThickness;\n    this.#opacity = params.opacity || HighlightEditor._defaultOpacity;\n    this.#boxes = params.boxes || null;\n    this.#methodOfCreation = params.methodOfCreation || \"\";\n    this.#text = params.text || \"\";\n    this._isDraggable = false;\n    this.defaultL10nId = \"pdfjs-editor-highlight-editor\";\n    if (params.highlightId > -1) {\n      this.#isFreeHighlight = true;\n      this.#createFreeOutlines(params);\n      this.#addToDrawLayer();\n    } else if (this.#boxes) {\n      this.#anchorNode = params.anchorNode;\n      this.#anchorOffset = params.anchorOffset;\n      this.#focusNode = params.focusNode;\n      this.#focusOffset = params.focusOffset;\n      this.#createOutlines();\n      this.#addToDrawLayer();\n      this.rotate(this.rotation);\n    }\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\",\n      type: this.#isFreeHighlight ? \"free_highlight\" : \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color),\n      thickness: this.#thickness,\n      methodOfCreation: this.#methodOfCreation\n    };\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color)\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    return {\n      numberOfColors: data.get(\"color\").size\n    };\n  }\n  #createOutlines() {\n    const outliner = new HighlightOutliner(this.#boxes, 0.001);\n    this.#highlightOutlines = outliner.getOutlines();\n    [this.x, this.y, this.width, this.height] = this.#highlightOutlines.box;\n    const outlinerForOutline = new HighlightOutliner(this.#boxes, 0.0025, 0.001, this._uiManager.direction === \"ltr\");\n    this.#focusOutlines = outlinerForOutline.getOutlines();\n    const {\n      lastPoint\n    } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - this.x) / this.width, (lastPoint[1] - this.y) / this.height];\n  }\n  #createFreeOutlines({\n    highlightOutlines,\n    highlightId,\n    clipPathId\n  }) {\n    this.#highlightOutlines = highlightOutlines;\n    const extraThickness = 1.5;\n    this.#focusOutlines = highlightOutlines.getNewOutline(this.#thickness / 2 + extraThickness, 0.0025);\n    if (highlightId >= 0) {\n      this.#id = highlightId;\n      this.#clipPathId = clipPathId;\n      this.parent.drawLayer.finalizeDraw(highlightId, {\n        bbox: highlightOutlines.box,\n        path: {\n          d: highlightOutlines.toSVGPath()\n        }\n      });\n      this.#outlineId = this.parent.drawLayer.drawOutline({\n        rootClass: {\n          highlightOutline: true,\n          free: true\n        },\n        bbox: this.#focusOutlines.box,\n        path: {\n          d: this.#focusOutlines.toSVGPath()\n        }\n      }, true);\n    } else if (this.parent) {\n      const angle = this.parent.viewport.rotation;\n      this.parent.drawLayer.updateProperties(this.#id, {\n        bbox: HighlightEditor.#rotateBbox(this.#highlightOutlines.box, (angle - this.rotation + 360) % 360),\n        path: {\n          d: highlightOutlines.toSVGPath()\n        }\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n        path: {\n          d: this.#focusOutlines.toSVGPath()\n        }\n      });\n    }\n    const [x, y, width, height] = highlightOutlines.box;\n    switch (this.rotation) {\n      case 0:\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = y;\n          this.y = 1 - x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n      case 180:\n        this.x = 1 - x;\n        this.y = 1 - y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = 1 - y;\n          this.y = x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n    }\n    const {\n      lastPoint\n    } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - x) / width, (lastPoint[1] - y) / height];\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    HighlightEditor._defaultColor ||= uiManager.highlightColors?.values().next().value || \"#fff066\";\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        HighlightEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        HighlightEditor._defaultThickness = value;\n        break;\n    }\n  }\n  translateInPage(x, y) {}\n  get toolbarPosition() {\n    return this.#lastPoint;\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        this.#updateThickness(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR, HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, HighlightEditor._defaultThickness]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_COLOR, this.color || HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, this.#thickness || HighlightEditor._defaultThickness], [AnnotationEditorParamsType.HIGHLIGHT_FREE, this.#isFreeHighlight]];\n  }\n  #updateColor(color) {\n    const setColorAndOpacity = (col, opa) => {\n      this.color = col;\n      this.#opacity = opa;\n      this.parent?.drawLayer.updateProperties(this.#id, {\n        root: {\n          fill: col,\n          \"fill-opacity\": opa\n        }\n      });\n      this.#colorPicker?.updateColor(col);\n    };\n    const savedColor = this.color;\n    const savedOpacity = this.#opacity;\n    this.addCommands({\n      cmd: setColorAndOpacity.bind(this, color, HighlightEditor._defaultOpacity),\n      undo: setColorAndOpacity.bind(this, savedColor, savedOpacity),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"color_changed\",\n      color: this._uiManager.highlightColorNames.get(color)\n    }, true);\n  }\n  #updateThickness(thickness) {\n    const savedThickness = this.#thickness;\n    const setThickness = th => {\n      this.#thickness = th;\n      this.#changeThickness(th);\n    };\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"thickness_changed\",\n      thickness\n    }, true);\n  }\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.highlightColors) {\n      this.#colorPicker = new ColorPicker({\n        editor: this\n      });\n      toolbar.addColorPicker(this.#colorPicker);\n    }\n    return toolbar;\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  fixAndSetPosition() {\n    return super.fixAndSetPosition(this.#getRotation());\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  getRect(tx, ty) {\n    return super.getRect(tx, ty, this.#getRotation());\n  }\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    if (focus) {\n      this.div.focus();\n    }\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    this._reportTelemetry({\n      action: \"deleted\"\n    });\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    this.show(this._isVisible);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #changeThickness(thickness) {\n    if (!this.#isFreeHighlight) {\n      return;\n    }\n    this.#createFreeOutlines({\n      highlightOutlines: this.#highlightOutlines.getNewOutline(thickness / 2)\n    });\n    this.fixAndSetPosition();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n  }\n  #cleanDrawLayer() {\n    if (this.#id === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this.#id);\n    this.#id = null;\n    this.parent.drawLayer.remove(this.#outlineId);\n    this.#outlineId = null;\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this.#id !== null) {\n      return;\n    }\n    ({\n      id: this.#id,\n      clipPathId: this.#clipPathId\n    } = parent.drawLayer.draw({\n      bbox: this.#highlightOutlines.box,\n      root: {\n        viewBox: \"0 0 1 1\",\n        fill: this.color,\n        \"fill-opacity\": this.#opacity\n      },\n      rootClass: {\n        highlight: true,\n        free: this.#isFreeHighlight\n      },\n      path: {\n        d: this.#highlightOutlines.toSVGPath()\n      }\n    }, false, true));\n    this.#outlineId = parent.drawLayer.drawOutline({\n      rootClass: {\n        highlightOutline: true,\n        free: this.#isFreeHighlight\n      },\n      bbox: this.#focusOutlines.box,\n      path: {\n        d: this.#focusOutlines.toSVGPath()\n      }\n    }, this.#isFreeHighlight);\n    if (this.#highlightDiv) {\n      this.#highlightDiv.style.clipPath = this.#clipPathId;\n    }\n  }\n  static #rotateBbox([x, y, width, height], angle) {\n    switch (angle) {\n      case 90:\n        return [1 - y - height, x, height, width];\n      case 180:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 270:\n        return [y, 1 - x - width, height, width];\n    }\n    return [x, y, width, height];\n  }\n  rotate(angle) {\n    const {\n      drawLayer\n    } = this.parent;\n    let box;\n    if (this.#isFreeHighlight) {\n      angle = (angle - this.rotation + 360) % 360;\n      box = HighlightEditor.#rotateBbox(this.#highlightOutlines.box, angle);\n    } else {\n      box = HighlightEditor.#rotateBbox([this.x, this.y, this.width, this.height], angle);\n    }\n    drawLayer.updateProperties(this.#id, {\n      bbox: box,\n      root: {\n        \"data-main-rotation\": angle\n      }\n    });\n    drawLayer.updateProperties(this.#outlineId, {\n      bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n      root: {\n        \"data-main-rotation\": angle\n      }\n    });\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    const div = super.render();\n    if (this.#text) {\n      div.setAttribute(\"aria-label\", this.#text);\n      div.setAttribute(\"role\", \"mark\");\n    }\n    if (this.#isFreeHighlight) {\n      div.classList.add(\"free\");\n    } else {\n      this.div.addEventListener(\"keydown\", this.#keydown.bind(this), {\n        signal: this._uiManager._signal\n      });\n    }\n    const highlightDiv = this.#highlightDiv = document.createElement(\"div\");\n    div.append(highlightDiv);\n    highlightDiv.setAttribute(\"aria-hidden\", \"true\");\n    highlightDiv.className = \"internal\";\n    highlightDiv.style.clipPath = this.#clipPathId;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    bindEvents(this, this.#highlightDiv, [\"pointerover\", \"pointerleave\"]);\n    this.enableEditing();\n    return div;\n  }\n  pointerover() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: true\n        }\n      });\n    }\n  }\n  pointerleave() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: false\n        }\n      });\n    }\n  }\n  #keydown(event) {\n    HighlightEditor._keyboardManager.exec(this, event);\n  }\n  _moveCaret(direction) {\n    this.parent.unselect(this);\n    switch (direction) {\n      case 0:\n      case 2:\n        this.#setCaret(true);\n        break;\n      case 1:\n      case 3:\n        this.#setCaret(false);\n        break;\n    }\n  }\n  #setCaret(start) {\n    if (!this.#anchorNode) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (start) {\n      selection.setPosition(this.#anchorNode, this.#anchorOffset);\n    } else {\n      selection.setPosition(this.#focusNode, this.#focusOffset);\n    }\n  }\n  select() {\n    super.select();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        hovered: false,\n        selected: true\n      }\n    });\n  }\n  unselect() {\n    super.unselect();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        selected: false\n      }\n    });\n    if (!this.#isFreeHighlight) {\n      this.#setCaret(false);\n    }\n  }\n  get _mustFixPosition() {\n    return !this.#isFreeHighlight;\n  }\n  show(visible = this._isVisible) {\n    super.show(visible);\n    if (this.parent) {\n      this.parent.drawLayer.updateProperties(this.#id, {\n        rootClass: {\n          hidden: !visible\n        }\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hidden: !visible\n        }\n      });\n    }\n  }\n  #getRotation() {\n    return this.#isFreeHighlight ? this.rotation : 0;\n  }\n  #serializeBoxes() {\n    if (this.#isFreeHighlight) {\n      return null;\n    }\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const boxes = this.#boxes;\n    const quadPoints = new Float32Array(boxes.length * 8);\n    let i = 0;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const sx = x * pageWidth + pageX;\n      const sy = (1 - y) * pageHeight + pageY;\n      quadPoints[i] = quadPoints[i + 4] = sx;\n      quadPoints[i + 1] = quadPoints[i + 3] = sy;\n      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n      quadPoints[i + 5] = quadPoints[i + 7] = sy - height * pageHeight;\n      i += 8;\n    }\n    return quadPoints;\n  }\n  #serializeOutlines(rect) {\n    return this.#highlightOutlines.serialize(rect, this.#getRotation());\n  }\n  static startHighlighting(parent, isLTR, {\n    target: textLayer,\n    x,\n    y\n  }) {\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    const ac = new AbortController();\n    const signal = parent.combinedSignal(ac);\n    const pointerUpCallback = e => {\n      ac.abort();\n      this.#endHighlight(parent, e);\n    };\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", stopEvent, {\n      capture: true,\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    textLayer.addEventListener(\"pointermove\", this.#highlightMove.bind(this, parent), {\n      signal\n    });\n    this._freeHighlight = new FreeHighlightOutliner({\n      x,\n      y\n    }, [layerX, layerY, parentWidth, parentHeight], parent.scale, this._defaultThickness / 2, isLTR, 0.001);\n    ({\n      id: this._freeHighlightId,\n      clipPathId: this._freeHighlightClipId\n    } = parent.drawLayer.draw({\n      bbox: [0, 0, 1, 1],\n      root: {\n        viewBox: \"0 0 1 1\",\n        fill: this._defaultColor,\n        \"fill-opacity\": this._defaultOpacity\n      },\n      rootClass: {\n        highlight: true,\n        free: true\n      },\n      path: {\n        d: this._freeHighlight.toSVGPath()\n      }\n    }, true, true));\n  }\n  static #highlightMove(parent, event) {\n    if (this._freeHighlight.add(event)) {\n      parent.drawLayer.updateProperties(this._freeHighlightId, {\n        path: {\n          d: this._freeHighlight.toSVGPath()\n        }\n      });\n    }\n  }\n  static #endHighlight(parent, event) {\n    if (!this._freeHighlight.isEmpty()) {\n      parent.createAndAddNewEditor(event, false, {\n        highlightId: this._freeHighlightId,\n        highlightOutlines: this._freeHighlight.getOutlines(),\n        clipPathId: this._freeHighlightClipId,\n        methodOfCreation: \"main_toolbar\"\n      });\n    } else {\n      parent.drawLayer.remove(this._freeHighlightId);\n    }\n    this._freeHighlightId = -1;\n    this._freeHighlight = null;\n    this._freeHighlightClipId = \"\";\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof HighlightAnnotationElement) {\n      const {\n        data: {\n          quadPoints,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        opacity,\n        quadPoints,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    } else if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          borderStyle: {\n            rawWidth: thickness\n          },\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        thickness,\n        inkLists,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const {\n      color,\n      quadPoints,\n      inkLists,\n      opacity\n    } = data;\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.color = Util.makeHexColor(...color);\n    editor.#opacity = opacity || 1;\n    if (inkLists) {\n      editor.#thickness = data.thickness;\n    }\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [pageX, pageY] = editor.pageTranslation;\n    if (quadPoints) {\n      const boxes = editor.#boxes = [];\n      for (let i = 0; i < quadPoints.length; i += 8) {\n        boxes.push({\n          x: (quadPoints[i] - pageX) / pageWidth,\n          y: 1 - (quadPoints[i + 1] - pageY) / pageHeight,\n          width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n          height: (quadPoints[i + 1] - quadPoints[i + 5]) / pageHeight\n        });\n      }\n      editor.#createOutlines();\n      editor.#addToDrawLayer();\n      editor.rotate(editor.rotation);\n    } else if (inkLists) {\n      editor.#isFreeHighlight = true;\n      const points = inkLists[0];\n      const point = {\n        x: points[0] - pageX,\n        y: pageHeight - (points[1] - pageY)\n      };\n      const outliner = new FreeHighlightOutliner(point, [0, 0, pageWidth, pageHeight], 1, editor.#thickness / 2, true, 0.001);\n      for (let i = 0, ii = points.length; i < ii; i += 2) {\n        point.x = points[i] - pageX;\n        point.y = pageHeight - (points[i + 1] - pageY);\n        outliner.add(point);\n      }\n      const {\n        id,\n        clipPathId\n      } = parent.drawLayer.draw({\n        bbox: [0, 0, 1, 1],\n        root: {\n          viewBox: \"0 0 1 1\",\n          fill: editor.color,\n          \"fill-opacity\": editor._defaultOpacity\n        },\n        rootClass: {\n          highlight: true,\n          free: true\n        },\n        path: {\n          d: outliner.toSVGPath()\n        }\n      }, true, true);\n      editor.#createFreeOutlines({\n        highlightOutlines: outliner.getOutlines(),\n        highlightId: id,\n        clipPathId\n      });\n      editor.#addToDrawLayer();\n      editor.rotate(editor.parentRotation);\n    }\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty() || isForCopying) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.color);\n    const serialized = {\n      annotationType: AnnotationEditorType.HIGHLIGHT,\n      color,\n      opacity: this.#opacity,\n      thickness: this.#thickness,\n      quadPoints: this.#serializeBoxes(),\n      outlines: this.#serializeOutlines(rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.#getRotation(),\n      structTreeParentId: this._structTreeParentId\n    };\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      color\n    } = this._initialData;\n    return serialized.color.some((c, i) => c !== color[i]);\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// ./src/display/editor/draw.js\n\n\n\nclass DrawingOptions {\n  #svgProperties = Object.create(null);\n  updateProperty(name, value) {\n    this[name] = value;\n    this.updateSVGProperty(name, value);\n  }\n  updateProperties(properties) {\n    if (!properties) {\n      return;\n    }\n    for (const [name, value] of Object.entries(properties)) {\n      if (!name.startsWith(\"_\")) {\n        this.updateProperty(name, value);\n      }\n    }\n  }\n  updateSVGProperty(name, value) {\n    this.#svgProperties[name] = value;\n  }\n  toSVGProperties() {\n    const root = this.#svgProperties;\n    this.#svgProperties = Object.create(null);\n    return {\n      root\n    };\n  }\n  reset() {\n    this.#svgProperties = Object.create(null);\n  }\n  updateAll(options = this) {\n    this.updateProperties(options);\n  }\n  clone() {\n    unreachable(\"Not implemented\");\n  }\n}\nclass DrawingEditor extends AnnotationEditor {\n  #drawOutlines = null;\n  #mustBeCommitted;\n  _drawId = null;\n  static _currentDrawId = -1;\n  static _currentParent = null;\n  static #currentDraw = null;\n  static #currentDrawingAC = null;\n  static #currentDrawingOptions = null;\n  static #currentPointerId = NaN;\n  static #currentPointerType = null;\n  static #currentPointerIds = null;\n  static #currentMoveTimestamp = NaN;\n  static _INNER_MARGIN = 3;\n  constructor(params) {\n    super(params);\n    this.#mustBeCommitted = params.mustBeCommitted || false;\n    this._addOutlines(params);\n  }\n  _addOutlines(params) {\n    if (params.drawOutlines) {\n      this.#createDrawOutlines(params);\n      this.#addToDrawLayer();\n    }\n  }\n  #createDrawOutlines({\n    drawOutlines,\n    drawId,\n    drawingOptions\n  }) {\n    this.#drawOutlines = drawOutlines;\n    this._drawingOptions ||= drawingOptions;\n    if (drawId >= 0) {\n      this._drawId = drawId;\n      this.parent.drawLayer.finalizeDraw(drawId, drawOutlines.defaultProperties);\n    } else {\n      this._drawId = this.#createDrawing(drawOutlines, this.parent);\n    }\n    this.#updateBbox(drawOutlines.box);\n  }\n  #createDrawing(drawOutlines, parent) {\n    const {\n      id\n    } = parent.drawLayer.draw(DrawingEditor._mergeSVGProperties(this._drawingOptions.toSVGProperties(), drawOutlines.defaultSVGProperties), false, false);\n    return id;\n  }\n  static _mergeSVGProperties(p1, p2) {\n    const p1Keys = new Set(Object.keys(p1));\n    for (const [key, value] of Object.entries(p2)) {\n      if (p1Keys.has(key)) {\n        Object.assign(p1[key], value);\n      } else {\n        p1[key] = value;\n      }\n    }\n    return p1;\n  }\n  static getDefaultDrawingOptions(_options) {\n    unreachable(\"Not implemented\");\n  }\n  static get typesMap() {\n    unreachable(\"Not implemented\");\n  }\n  static get isDrawer() {\n    return true;\n  }\n  static get supportMultipleDrawings() {\n    return false;\n  }\n  static updateDefaultParams(type, value) {\n    const propertyName = this.typesMap.get(type);\n    if (propertyName) {\n      this._defaultDrawingOptions.updateProperty(propertyName, value);\n    }\n    if (this._currentParent) {\n      DrawingEditor.#currentDraw.updateProperty(propertyName, value);\n      this._currentParent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());\n    }\n  }\n  updateParams(type, value) {\n    const propertyName = this.constructor.typesMap.get(type);\n    if (propertyName) {\n      this._updateProperty(type, propertyName, value);\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    const properties = [];\n    const options = this._defaultDrawingOptions;\n    for (const [type, name] of this.typesMap) {\n      properties.push([type, options[name]]);\n    }\n    return properties;\n  }\n  get propertiesToUpdate() {\n    const properties = [];\n    const {\n      _drawingOptions\n    } = this;\n    for (const [type, name] of this.constructor.typesMap) {\n      properties.push([type, _drawingOptions[name]]);\n    }\n    return properties;\n  }\n  _updateProperty(type, name, value) {\n    const options = this._drawingOptions;\n    const savedValue = options[name];\n    const setter = val => {\n      options.updateProperty(name, val);\n      const bbox = this.#drawOutlines.updateProperty(name, val);\n      if (bbox) {\n        this.#updateBbox(bbox);\n      }\n      this.parent?.drawLayer.updateProperties(this._drawId, options.toSVGProperties());\n    };\n    this.addCommands({\n      cmd: setter.bind(this, value),\n      undo: setter.bind(this, savedValue),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _onResizing() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizingSVGProperties(this.#convertToDrawSpace()), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onResized() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizedSVGProperties(this.#convertToDrawSpace()), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onTranslating(_x, _y) {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      bbox: this.#rotateBox()\n    });\n  }\n  _onTranslated() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathTranslatedSVGProperties(this.#convertToDrawSpace(), this.parentDimensions), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onStartDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: true\n      }\n    });\n  }\n  _onStopDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: false\n      }\n    });\n  }\n  commit() {\n    super.commit();\n    this.disableEditMode();\n    this.disableEditing();\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  get isResizable() {\n    return true;\n  }\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    this._isDraggable = true;\n    if (this.#mustBeCommitted) {\n      this.#mustBeCommitted = false;\n      this.commit();\n      this.parent.setSelected(this);\n      if (focus && this.isOnScreen) {\n        this.div.focus();\n      }\n    }\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    this.#updateBbox(this.#drawOutlines.box);\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this._uiManager.removeShouldRescale(this);\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this._uiManager.addShouldRescale(this);\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #cleanDrawLayer() {\n    if (this._drawId === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this._drawId);\n    this._drawId = null;\n    this._drawingOptions.reset();\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this._drawId !== null && this.parent === parent) {\n      return;\n    }\n    if (this._drawId !== null) {\n      this.parent.drawLayer.updateParent(this._drawId, parent.drawLayer);\n      return;\n    }\n    this._drawingOptions.updateAll();\n    this._drawId = this.#createDrawing(this.#drawOutlines, parent);\n  }\n  #convertToParentSpace([x, y, width, height]) {\n    const {\n      parentDimensions: [pW, pH],\n      rotation\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [y, 1 - x, width * (pH / pW), height * (pW / pH)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [1 - y, x, width * (pH / pW), height * (pW / pH)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  #convertToDrawSpace() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      parentDimensions: [pW, pH],\n      rotation\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  #updateBbox(bbox) {\n    [this.x, this.y, this.width, this.height] = this.#convertToParentSpace(bbox);\n    if (this.div) {\n      this.fixAndSetPosition();\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n    }\n    this._onResized();\n  }\n  #rotateBox() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      rotation,\n      parentRotation,\n      parentDimensions: [pW, pH]\n    } = this;\n    switch ((rotation * 4 + parentRotation) / 90) {\n      case 1:\n        return [1 - y - height, x, height, width];\n      case 2:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 3:\n        return [y, 1 - x - width, height, width];\n      case 4:\n        return [x, y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];\n      case 5:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 6:\n        return [1 - x - height * (pH / pW), 1 - y, height * (pH / pW), width * (pW / pH)];\n      case 7:\n        return [y - width * (pW / pH), 1 - x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];\n      case 8:\n        return [x - width, y - height, width, height];\n      case 9:\n        return [1 - y, x - width, height, width];\n      case 10:\n        return [1 - x, 1 - y, width, height];\n      case 11:\n        return [y - height, 1 - x, height, width];\n      case 12:\n        return [x - height * (pH / pW), y, height * (pH / pW), width * (pW / pH)];\n      case 13:\n        return [1 - y - width * (pW / pH), x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];\n      case 14:\n        return [1 - x, 1 - y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];\n      case 15:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  rotate() {\n    if (!this.parent) {\n      return;\n    }\n    this.parent.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties({\n      bbox: this.#rotateBox()\n    }, this.#drawOutlines.updateRotation((this.parentRotation - this.rotation + 360) % 360)));\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    this.#updateBbox(this.#drawOutlines.updateParentDimensions(this.parentDimensions, this.parent.scale));\n  }\n  static onScaleChangingWhenDrawing() {}\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    const div = super.render();\n    div.classList.add(\"draw\");\n    const drawDiv = document.createElement(\"div\");\n    div.append(drawDiv);\n    drawDiv.setAttribute(\"aria-hidden\", \"true\");\n    drawDiv.className = \"internal\";\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    this._uiManager.addShouldRescale(this);\n    this.disableEditing();\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n    return div;\n  }\n  static createDrawerInstance(_x, _y, _parentWidth, _parentHeight, _rotation) {\n    unreachable(\"Not implemented\");\n  }\n  static startDrawing(parent, uiManager, _isLTR, event) {\n    const {\n      target,\n      offsetX: x,\n      offsetY: y,\n      pointerId,\n      pointerType\n    } = event;\n    if (DrawingEditor.#currentPointerType && DrawingEditor.#currentPointerType !== pointerType) {\n      return;\n    }\n    const {\n      viewport: {\n        rotation\n      }\n    } = parent;\n    const {\n      width: parentWidth,\n      height: parentHeight\n    } = target.getBoundingClientRect();\n    const ac = DrawingEditor.#currentDrawingAC = new AbortController();\n    const signal = parent.combinedSignal(ac);\n    DrawingEditor.#currentPointerId ||= pointerId;\n    DrawingEditor.#currentPointerType ??= pointerType;\n    window.addEventListener(\"pointerup\", e => {\n      if (DrawingEditor.#currentPointerId === e.pointerId) {\n        this._endDraw(e);\n      } else {\n        DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n      }\n    }, {\n      signal\n    });\n    window.addEventListener(\"pointercancel\", e => {\n      if (DrawingEditor.#currentPointerId === e.pointerId) {\n        this._currentParent.endDrawingSession();\n      } else {\n        DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n      }\n    }, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", e => {\n      if (DrawingEditor.#currentPointerType !== e.pointerType) {\n        return;\n      }\n      (DrawingEditor.#currentPointerIds ||= new Set()).add(e.pointerId);\n      if (DrawingEditor.#currentDraw.isCancellable()) {\n        DrawingEditor.#currentDraw.removeLastElement();\n        if (DrawingEditor.#currentDraw.isEmpty()) {\n          this._currentParent.endDrawingSession(true);\n        } else {\n          this._endDraw(null);\n        }\n      }\n    }, {\n      capture: true,\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    target.addEventListener(\"pointermove\", this._drawMove.bind(this), {\n      signal\n    });\n    target.addEventListener(\"touchmove\", e => {\n      if (e.timeStamp === DrawingEditor.#currentMoveTimestamp) {\n        stopEvent(e);\n      }\n    }, {\n      signal\n    });\n    parent.toggleDrawing();\n    uiManager._editorUndoBar?.hide();\n    if (DrawingEditor.#currentDraw) {\n      parent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.startNew(x, y, parentWidth, parentHeight, rotation));\n      return;\n    }\n    uiManager.updateUIForDefaultProperties(this);\n    DrawingEditor.#currentDraw = this.createDrawerInstance(x, y, parentWidth, parentHeight, rotation);\n    DrawingEditor.#currentDrawingOptions = this.getDefaultDrawingOptions();\n    this._currentParent = parent;\n    ({\n      id: this._currentDrawId\n    } = parent.drawLayer.draw(this._mergeSVGProperties(DrawingEditor.#currentDrawingOptions.toSVGProperties(), DrawingEditor.#currentDraw.defaultSVGProperties), true, false));\n  }\n  static _drawMove(event) {\n    DrawingEditor.#currentMoveTimestamp = -1;\n    if (!DrawingEditor.#currentDraw) {\n      return;\n    }\n    const {\n      offsetX,\n      offsetY,\n      pointerId\n    } = event;\n    if (DrawingEditor.#currentPointerId !== pointerId) {\n      return;\n    }\n    if (DrawingEditor.#currentPointerIds?.size >= 1) {\n      this._endDraw(event);\n      return;\n    }\n    this._currentParent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.add(offsetX, offsetY));\n    DrawingEditor.#currentMoveTimestamp = event.timeStamp;\n    stopEvent(event);\n  }\n  static _cleanup(all) {\n    if (all) {\n      this._currentDrawId = -1;\n      this._currentParent = null;\n      DrawingEditor.#currentDraw = null;\n      DrawingEditor.#currentDrawingOptions = null;\n      DrawingEditor.#currentPointerType = null;\n      DrawingEditor.#currentMoveTimestamp = NaN;\n    }\n    if (DrawingEditor.#currentDrawingAC) {\n      DrawingEditor.#currentDrawingAC.abort();\n      DrawingEditor.#currentDrawingAC = null;\n      DrawingEditor.#currentPointerId = NaN;\n      DrawingEditor.#currentPointerIds = null;\n    }\n  }\n  static _endDraw(event) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    parent.toggleDrawing(true);\n    this._cleanup(false);\n    if (event?.target === parent.div) {\n      parent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.end(event.offsetX, event.offsetY));\n    }\n    if (this.supportMultipleDrawings) {\n      const draw = DrawingEditor.#currentDraw;\n      const drawId = this._currentDrawId;\n      const lastElement = draw.getLastElement();\n      parent.addCommands({\n        cmd: () => {\n          parent.drawLayer.updateProperties(drawId, draw.setLastElement(lastElement));\n        },\n        undo: () => {\n          parent.drawLayer.updateProperties(drawId, draw.removeLastElement());\n        },\n        mustExec: false,\n        type: AnnotationEditorParamsType.DRAW_STEP\n      });\n      return;\n    }\n    this.endDrawing(false);\n  }\n  static endDrawing(isAborted) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return null;\n    }\n    parent.toggleDrawing(true);\n    parent.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP);\n    if (!DrawingEditor.#currentDraw.isEmpty()) {\n      const {\n        pageDimensions: [pageWidth, pageHeight],\n        scale\n      } = parent;\n      const editor = parent.createAndAddNewEditor({\n        offsetX: 0,\n        offsetY: 0\n      }, false, {\n        drawId: this._currentDrawId,\n        drawOutlines: DrawingEditor.#currentDraw.getOutlines(pageWidth * scale, pageHeight * scale, scale, this._INNER_MARGIN),\n        drawingOptions: DrawingEditor.#currentDrawingOptions,\n        mustBeCommitted: !isAborted\n      });\n      this._cleanup(true);\n      return editor;\n    }\n    parent.drawLayer.remove(this._currentDrawId);\n    this._cleanup(true);\n    return null;\n  }\n  createDrawingOptions(_data) {}\n  static deserializeDraw(_pageX, _pageY, _pageWidth, _pageHeight, _innerWidth, _data) {\n    unreachable(\"Not implemented\");\n  }\n  static async deserialize(data, parent, uiManager) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = parent.viewport;\n    const drawOutlines = this.deserializeDraw(pageX, pageY, pageWidth, pageHeight, this._INNER_MARGIN, data);\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.createDrawingOptions(data);\n    editor.#createDrawOutlines({\n      drawOutlines\n    });\n    editor.#addToDrawLayer();\n    editor.onScaleChanging();\n    editor.rotate();\n    return editor;\n  }\n  serializeDraw(isForCopying) {\n    const [pageX, pageY] = this.pageTranslation;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    return this.#drawOutlines.serialize([pageX, pageY, pageWidth, pageHeight], isForCopying);\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// ./src/display/editor/drawers/inkdraw.js\n\n\nclass InkDrawOutliner {\n  #last = new Float64Array(6);\n  #line;\n  #lines;\n  #rotation;\n  #thickness;\n  #points;\n  #lastSVGPath = \"\";\n  #lastIndex = 0;\n  #outlines = new InkDrawOutline();\n  #parentWidth;\n  #parentHeight;\n  constructor(x, y, parentWidth, parentHeight, rotation, thickness) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    [x, y] = this.#normalizePoint(x, y);\n    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];\n    this.#points = [x, y];\n    this.#lines = [{\n      line,\n      points: this.#points\n    }];\n    this.#last.set(line, 0);\n  }\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      this.#thickness = value;\n    }\n  }\n  #normalizePoint(x, y) {\n    return Outline._normalizePoint(x, y, this.#parentWidth, this.#parentHeight, this.#rotation);\n  }\n  isEmpty() {\n    return !this.#lines || this.#lines.length === 0;\n  }\n  isCancellable() {\n    return this.#points.length <= 10;\n  }\n  add(x, y) {\n    [x, y] = this.#normalizePoint(x, y);\n    const [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(this.#parentWidth * diffX, this.#parentHeight * diffY);\n    if (d <= 2) {\n      return null;\n    }\n    this.#points.push(x, y);\n    if (isNaN(x1)) {\n      this.#last.set([x2, y2, x, y], 2);\n      this.#line.push(NaN, NaN, NaN, NaN, x, y);\n      return {\n        path: {\n          d: this.toSVGPath()\n        }\n      };\n    }\n    if (isNaN(this.#last[0])) {\n      this.#line.splice(6, 6);\n    }\n    this.#last.set([x1, y1, x2, y2, x, y], 0);\n    this.#line.push(...Outline.createBezierPoints(x1, y1, x2, y2, x, y));\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  end(x, y) {\n    const change = this.add(x, y);\n    if (change) {\n      return change;\n    }\n    if (this.#points.length === 2) {\n      return {\n        path: {\n          d: this.toSVGPath()\n        }\n      };\n    }\n    return null;\n  }\n  startNew(x, y, parentWidth, parentHeight, rotation) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    [x, y] = this.#normalizePoint(x, y);\n    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];\n    this.#points = [x, y];\n    const last = this.#lines.at(-1);\n    if (last) {\n      last.line = new Float32Array(last.line);\n      last.points = new Float32Array(last.points);\n    }\n    this.#lines.push({\n      line,\n      points: this.#points\n    });\n    this.#last.set(line, 0);\n    this.#lastIndex = 0;\n    this.toSVGPath();\n    return null;\n  }\n  getLastElement() {\n    return this.#lines.at(-1);\n  }\n  setLastElement(element) {\n    if (!this.#lines) {\n      return this.#outlines.setLastElement(element);\n    }\n    this.#lines.push(element);\n    this.#line = element.line;\n    this.#points = element.points;\n    this.#lastIndex = 0;\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  removeLastElement() {\n    if (!this.#lines) {\n      return this.#outlines.removeLastElement();\n    }\n    this.#lines.pop();\n    this.#lastSVGPath = \"\";\n    for (let i = 0, ii = this.#lines.length; i < ii; i++) {\n      const {\n        line,\n        points\n      } = this.#lines[i];\n      this.#line = line;\n      this.#points = points;\n      this.#lastIndex = 0;\n      this.toSVGPath();\n    }\n    return {\n      path: {\n        d: this.#lastSVGPath\n      }\n    };\n  }\n  toSVGPath() {\n    const firstX = Outline.svgRound(this.#line[4]);\n    const firstY = Outline.svgRound(this.#line[5]);\n    if (this.#points.length === 2) {\n      this.#lastSVGPath = `${this.#lastSVGPath} M ${firstX} ${firstY} Z`;\n      return this.#lastSVGPath;\n    }\n    if (this.#points.length <= 6) {\n      const i = this.#lastSVGPath.lastIndexOf(\"M\");\n      this.#lastSVGPath = `${this.#lastSVGPath.slice(0, i)} M ${firstX} ${firstY}`;\n      this.#lastIndex = 6;\n    }\n    if (this.#points.length === 4) {\n      const secondX = Outline.svgRound(this.#line[10]);\n      const secondY = Outline.svgRound(this.#line[11]);\n      this.#lastSVGPath = `${this.#lastSVGPath} L ${secondX} ${secondY}`;\n      this.#lastIndex = 12;\n      return this.#lastSVGPath;\n    }\n    const buffer = [];\n    if (this.#lastIndex === 0) {\n      buffer.push(`M ${firstX} ${firstY}`);\n      this.#lastIndex = 6;\n    }\n    for (let i = this.#lastIndex, ii = this.#line.length; i < ii; i += 6) {\n      const [c1x, c1y, c2x, c2y, x, y] = this.#line.slice(i, i + 6).map(Outline.svgRound);\n      buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n    }\n    this.#lastSVGPath += buffer.join(\" \");\n    this.#lastIndex = this.#line.length;\n    return this.#lastSVGPath;\n  }\n  getOutlines(parentWidth, parentHeight, scale, innerMargin) {\n    const last = this.#lines.at(-1);\n    last.line = new Float32Array(last.line);\n    last.points = new Float32Array(last.points);\n    this.#outlines.build(this.#lines, parentWidth, parentHeight, scale, this.#rotation, this.#thickness, innerMargin);\n    this.#last = null;\n    this.#line = null;\n    this.#lines = null;\n    this.#lastSVGPath = null;\n    return this.#outlines;\n  }\n  get defaultSVGProperties() {\n    return {\n      root: {\n        viewBox: \"0 0 10000 10000\"\n      },\n      rootClass: {\n        draw: true\n      },\n      bbox: [0, 0, 1, 1]\n    };\n  }\n}\nclass InkDrawOutline extends Outline {\n  #bbox;\n  #currentRotation = 0;\n  #innerMargin;\n  #lines;\n  #parentWidth;\n  #parentHeight;\n  #parentScale;\n  #rotation;\n  #thickness;\n  build(lines, parentWidth, parentHeight, parentScale, rotation, thickness, innerMargin) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#parentScale = parentScale;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    this.#innerMargin = innerMargin ?? 0;\n    this.#lines = lines;\n    this.#computeBbox();\n  }\n  get thickness() {\n    return this.#thickness;\n  }\n  setLastElement(element) {\n    this.#lines.push(element);\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  removeLastElement() {\n    this.#lines.pop();\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const {\n      line\n    } of this.#lines) {\n      buffer.push(`M${Outline.svgRound(line[4])} ${Outline.svgRound(line[5])}`);\n      if (line.length === 6) {\n        buffer.push(\"Z\");\n        continue;\n      }\n      if (line.length === 12 && isNaN(line[6])) {\n        buffer.push(`L${Outline.svgRound(line[10])} ${Outline.svgRound(line[11])}`);\n        continue;\n      }\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6).map(Outline.svgRound);\n        buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n      }\n    }\n    return buffer.join(\"\");\n  }\n  serialize([pageX, pageY, pageWidth, pageHeight], isForCopying) {\n    const serializedLines = [];\n    const serializedPoints = [];\n    const [x, y, width, height] = this.#getBBoxWithNoMargin();\n    let tx, ty, sx, sy, x1, y1, x2, y2, rescaleFn;\n    switch (this.#rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = pageX;\n        ty = pageY + pageHeight;\n        sx = pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + x * pageWidth;\n        y1 = pageY + (1 - y - height) * pageHeight;\n        x2 = pageX + (x + width) * pageWidth;\n        y2 = pageY + (1 - y) * pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX;\n        ty = pageY;\n        sx = pageWidth;\n        sy = pageHeight;\n        x1 = pageX + y * pageWidth;\n        y1 = pageY + x * pageHeight;\n        x2 = pageX + (y + height) * pageWidth;\n        y2 = pageY + (x + width) * pageHeight;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX + pageWidth;\n        ty = pageY;\n        sx = -pageWidth;\n        sy = pageHeight;\n        x1 = pageX + (1 - x - width) * pageWidth;\n        y1 = pageY + y * pageHeight;\n        x2 = pageX + (1 - x) * pageWidth;\n        y2 = pageY + (y + height) * pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX + pageWidth;\n        ty = pageY + pageHeight;\n        sx = -pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + (1 - y - height) * pageWidth;\n        y1 = pageY + (1 - x - width) * pageHeight;\n        x2 = pageX + (1 - y) * pageWidth;\n        y2 = pageY + (1 - x) * pageHeight;\n        break;\n    }\n    for (const {\n      line,\n      points\n    } of this.#lines) {\n      serializedLines.push(rescaleFn(line, tx, ty, sx, sy, isForCopying ? new Array(line.length) : null));\n      serializedPoints.push(rescaleFn(points, tx, ty, sx, sy, isForCopying ? new Array(points.length) : null));\n    }\n    return {\n      lines: serializedLines,\n      points: serializedPoints,\n      rect: [x1, y1, x2, y2]\n    };\n  }\n  static deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, {\n    paths: {\n      lines,\n      points\n    },\n    rotation,\n    thickness\n  }) {\n    const newLines = [];\n    let tx, ty, sx, sy, rescaleFn;\n    switch (rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = -pageX / pageWidth;\n        ty = pageY / pageHeight + 1;\n        sx = 1 / pageWidth;\n        sy = -1 / pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = -pageY / pageHeight;\n        ty = -pageX / pageWidth;\n        sx = 1 / pageHeight;\n        sy = 1 / pageWidth;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX / pageWidth + 1;\n        ty = -pageY / pageHeight;\n        sx = -1 / pageWidth;\n        sy = 1 / pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageY / pageHeight + 1;\n        ty = pageX / pageWidth + 1;\n        sx = -1 / pageHeight;\n        sy = -1 / pageWidth;\n        break;\n    }\n    if (!lines) {\n      lines = [];\n      for (const point of points) {\n        const len = point.length;\n        if (len === 2) {\n          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1]]));\n          continue;\n        }\n        if (len === 4) {\n          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1], NaN, NaN, NaN, NaN, point[2], point[3]]));\n          continue;\n        }\n        const line = new Float32Array(3 * (len - 2));\n        lines.push(line);\n        let [x1, y1, x2, y2] = point.subarray(0, 4);\n        line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n        for (let i = 4; i < len; i += 2) {\n          const x = point[i];\n          const y = point[i + 1];\n          line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n          [x1, y1, x2, y2] = [x2, y2, x, y];\n        }\n      }\n    }\n    for (let i = 0, ii = lines.length; i < ii; i++) {\n      newLines.push({\n        line: rescaleFn(lines[i].map(x => x ?? NaN), tx, ty, sx, sy),\n        points: rescaleFn(points[i].map(x => x ?? NaN), tx, ty, sx, sy)\n      });\n    }\n    const outlines = new this.prototype.constructor();\n    outlines.build(newLines, pageWidth, pageHeight, 1, rotation, thickness, innerMargin);\n    return outlines;\n  }\n  #getMarginComponents(thickness = this.#thickness) {\n    const margin = this.#innerMargin + thickness / 2 * this.#parentScale;\n    return this.#rotation % 180 === 0 ? [margin / this.#parentWidth, margin / this.#parentHeight] : [margin / this.#parentHeight, margin / this.#parentWidth];\n  }\n  #getBBoxWithNoMargin() {\n    const [x, y, width, height] = this.#bbox;\n    const [marginX, marginY] = this.#getMarginComponents(0);\n    return [x + marginX, y + marginY, width - 2 * marginX, height - 2 * marginY];\n  }\n  #computeBbox() {\n    const bbox = this.#bbox = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\n    for (const {\n      line\n    } of this.#lines) {\n      if (line.length <= 12) {\n        for (let i = 4, ii = line.length; i < ii; i += 6) {\n          Util.pointBoundingBox(line[i], line[i + 1], bbox);\n        }\n        continue;\n      }\n      let lastX = line[4],\n        lastY = line[5];\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6);\n        Util.bezierBoundingBox(lastX, lastY, c1x, c1y, c2x, c2y, x, y, bbox);\n        lastX = x;\n        lastY = y;\n      }\n    }\n    const [marginX, marginY] = this.#getMarginComponents();\n    bbox[0] = MathClamp(bbox[0] - marginX, 0, 1);\n    bbox[1] = MathClamp(bbox[1] - marginY, 0, 1);\n    bbox[2] = MathClamp(bbox[2] + marginX, 0, 1);\n    bbox[3] = MathClamp(bbox[3] + marginY, 0, 1);\n    bbox[2] -= bbox[0];\n    bbox[3] -= bbox[1];\n  }\n  get box() {\n    return this.#bbox;\n  }\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      return this.#updateThickness(value);\n    }\n    return null;\n  }\n  #updateThickness(thickness) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#thickness = thickness;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const [diffMarginX, diffMarginY] = [newMarginX - oldMarginX, newMarginY - oldMarginY];\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n    return bbox;\n  }\n  updateParentDimensions([width, height], scale) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#parentWidth = width;\n    this.#parentHeight = height;\n    this.#parentScale = scale;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const diffMarginX = newMarginX - oldMarginX;\n    const diffMarginY = newMarginY - oldMarginY;\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n    return bbox;\n  }\n  updateRotation(rotation) {\n    this.#currentRotation = rotation;\n    return {\n      path: {\n        transform: this.rotationTransform\n      }\n    };\n  }\n  get viewBox() {\n    return this.#bbox.map(Outline.svgRound).join(\" \");\n  }\n  get defaultProperties() {\n    const [x, y] = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`\n      }\n    };\n  }\n  get rotationTransform() {\n    const [,, width, height] = this.#bbox;\n    let a = 0,\n      b = 0,\n      c = 0,\n      d = 0,\n      e = 0,\n      f = 0;\n    switch (this.#currentRotation) {\n      case 90:\n        b = height / width;\n        c = -width / height;\n        e = width;\n        break;\n      case 180:\n        a = -1;\n        d = -1;\n        e = width;\n        f = height;\n        break;\n      case 270:\n        b = -height / width;\n        c = width / height;\n        f = height;\n        break;\n      default:\n        return \"\";\n    }\n    return `matrix(${a} ${b} ${c} ${d} ${Outline.svgRound(e)} ${Outline.svgRound(f)})`;\n  }\n  getPathResizingSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const [x, y, width, height] = this.#bbox;\n    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      return {\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: `${this.rotationTransform} translate(${tx} ${ty})`\n        }\n      };\n    }\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const s2x = width / newWidth;\n    const s2y = height / newHeight;\n    return {\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`,\n        transform: `${this.rotationTransform} scale(${s2x} ${s2y}) ` + `translate(${Outline.svgRound(marginX)} ${Outline.svgRound(marginY)}) scale(${s1x} ${s1y}) ` + `translate(${Outline.svgRound(-marginX)} ${Outline.svgRound(-marginY)})`\n      }\n    };\n  }\n  getPathResizedSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const bbox = this.#bbox;\n    const [x, y, width, height] = bbox;\n    bbox[0] = newX;\n    bbox[1] = newY;\n    bbox[2] = newWidth;\n    bbox[3] = newHeight;\n    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n      return {\n        root: {\n          viewBox: this.viewBox\n        },\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: this.rotationTransform || null,\n          d: this.toSVGPath()\n        }\n      };\n    }\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const tx = -s1x * (x + marginX) + newX + marginX;\n    const ty = -s1y * (y + marginY) + newY + marginY;\n    if (s1x !== 1 || s1y !== 1 || tx !== 0 || ty !== 0) {\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._rescale(line, tx, ty, s1x, s1y, line);\n        Outline._rescale(points, tx, ty, s1x, s1y, points);\n      }\n    }\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n        transform: this.rotationTransform || null,\n        d: this.toSVGPath()\n      }\n    };\n  }\n  getPathTranslatedSVGProperties([newX, newY], parentDimensions) {\n    const [newParentWidth, newParentHeight] = parentDimensions;\n    const bbox = this.#bbox;\n    const tx = newX - bbox[0];\n    const ty = newY - bbox[1];\n    if (this.#parentWidth === newParentWidth && this.#parentHeight === newParentHeight) {\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n    } else {\n      const sx = this.#parentWidth / newParentWidth;\n      const sy = this.#parentHeight / newParentHeight;\n      this.#parentWidth = newParentWidth;\n      this.#parentHeight = newParentHeight;\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._rescale(line, tx, ty, sx, sy, line);\n        Outline._rescale(points, tx, ty, sx, sy, points);\n      }\n      bbox[2] *= sx;\n      bbox[3] *= sy;\n    }\n    bbox[0] = newX;\n    bbox[1] = newY;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`\n      }\n    };\n  }\n  get defaultSVGProperties() {\n    const bbox = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      rootClass: {\n        draw: true\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(bbox[0])} ${Outline.svgRound(bbox[1])}`,\n        transform: this.rotationTransform || null\n      },\n      bbox\n    };\n  }\n}\n\n;// ./src/display/editor/ink.js\n\n\n\n\n\nclass InkDrawingOptions extends DrawingOptions {\n  constructor(viewerParameters) {\n    super();\n    this._viewParameters = viewerParameters;\n    super.updateProperties({\n      fill: \"none\",\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-opacity\": 1,\n      \"stroke-width\": 1,\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      \"stroke-miterlimit\": 10\n    });\n  }\n  updateSVGProperty(name, value) {\n    if (name === \"stroke-width\") {\n      value ??= this[\"stroke-width\"];\n      value *= this._viewParameters.realScale;\n    }\n    super.updateSVGProperty(name, value);\n  }\n  clone() {\n    const clone = new InkDrawingOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass InkEditor extends DrawingEditor {\n  static _type = \"ink\";\n  static _editorType = AnnotationEditorType.INK;\n  static _defaultDrawingOptions = null;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"inkEditor\"\n    });\n    this._willKeepAspectRatio = true;\n    this.defaultL10nId = \"pdfjs-editor-ink-editor\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new InkDrawingOptions(uiManager.viewParameters);\n  }\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n  static get supportMultipleDrawings() {\n    return true;\n  }\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map([[AnnotationEditorParamsType.INK_THICKNESS, \"stroke-width\"], [AnnotationEditorParamsType.INK_COLOR, \"stroke\"], [AnnotationEditorParamsType.INK_OPACITY, \"stroke-opacity\"]]));\n  }\n  static createDrawerInstance(x, y, parentWidth, parentHeight, rotation) {\n    return new InkDrawOutliner(x, y, parentWidth, parentHeight, rotation, this._defaultDrawingOptions[\"stroke-width\"]);\n  }\n  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {\n    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          borderStyle: {\n            rawWidth: thickness\n          },\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.INK,\n        color: Array.from(color),\n        thickness,\n        opacity,\n        paths: {\n          points: inkLists\n        },\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    return editor;\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    super.onScaleChanging();\n    const {\n      _drawId,\n      _drawingOptions,\n      parent\n    } = this;\n    _drawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(_drawId, _drawingOptions.toSVGProperties());\n  }\n  static onScaleChangingWhenDrawing() {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    super.onScaleChangingWhenDrawing();\n    this._defaultDrawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());\n  }\n  createDrawingOptions({\n    color,\n    thickness,\n    opacity\n  }) {\n    this._drawingOptions = InkEditor.getDefaultDrawingOptions({\n      stroke: Util.makeHexColor(...color),\n      \"stroke-width\": thickness,\n      \"stroke-opacity\": opacity\n    });\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const {\n      lines,\n      points,\n      rect\n    } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        stroke,\n        \"stroke-opacity\": opacity,\n        \"stroke-width\": thickness\n      }\n    } = this;\n    const serialized = {\n      annotationType: AnnotationEditorType.INK,\n      color: AnnotationEditor._colorManager.convert(stroke),\n      opacity,\n      thickness,\n      paths: {\n        lines,\n        points\n      },\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      color,\n      thickness,\n      opacity,\n      pageIndex\n    } = this._initialData;\n    return this._hasBeenMoved || this._hasBeenResized || serialized.color.some((c, i) => c !== color[i]) || serialized.thickness !== thickness || serialized.opacity !== opacity || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const {\n      points,\n      rect\n    } = this.serializeDraw(false);\n    annotation.updateEdited({\n      rect,\n      thickness: this._drawingOptions[\"stroke-width\"],\n      points\n    });\n    return null;\n  }\n}\n\n;// ./src/display/editor/drawers/contour.js\n\nclass ContourDrawOutline extends InkDrawOutline {\n  toSVGPath() {\n    let path = super.toSVGPath();\n    if (!path.endsWith(\"Z\")) {\n      path += \"Z\";\n    }\n    return path;\n  }\n}\n\n;// ./src/display/editor/drawers/signaturedraw.js\n\n\n\n\nconst BASE_HEADER_LENGTH = 8;\nconst POINTS_PROPERTIES_NUMBER = 3;\nclass SignatureExtractor {\n  static #PARAMETERS = {\n    maxDim: 512,\n    sigmaSFactor: 0.02,\n    sigmaR: 25,\n    kernelSize: 16\n  };\n  static #neighborIndexToId(i0, j0, i, j) {\n    i -= i0;\n    j -= j0;\n    if (i === 0) {\n      return j > 0 ? 0 : 4;\n    }\n    if (i === 1) {\n      return j + 6;\n    }\n    return 2 - j;\n  }\n  static #neighborIdToIndex = new Int32Array([0, 1, -1, 1, -1, 0, -1, -1, 0, -1, 1, -1, 1, 0, 1, 1]);\n  static #clockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (-k + id - offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n  static #counterClockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (k + id + offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n  static #findContours(buf, width, height, threshold) {\n    const N = buf.length;\n    const types = new Int32Array(N);\n    for (let i = 0; i < N; i++) {\n      types[i] = buf[i] <= threshold ? 1 : 0;\n    }\n    for (let i = 1; i < height - 1; i++) {\n      types[i * width] = types[i * width + width - 1] = 0;\n    }\n    for (let i = 0; i < width; i++) {\n      types[i] = types[width * height - 1 - i] = 0;\n    }\n    let nbd = 1;\n    let lnbd;\n    const contours = [];\n    for (let i = 1; i < height - 1; i++) {\n      lnbd = 1;\n      for (let j = 1; j < width - 1; j++) {\n        const ij = i * width + j;\n        const pix = types[ij];\n        if (pix === 0) {\n          continue;\n        }\n        let i2 = i;\n        let j2 = j;\n        if (pix === 1 && types[ij - 1] === 0) {\n          nbd += 1;\n          j2 -= 1;\n        } else if (pix >= 1 && types[ij + 1] === 0) {\n          nbd += 1;\n          j2 += 1;\n          if (pix > 1) {\n            lnbd = pix;\n          }\n        } else {\n          if (pix !== 1) {\n            lnbd = Math.abs(pix);\n          }\n          continue;\n        }\n        const points = [j, i];\n        const isHole = j2 === j + 1;\n        const contour = {\n          isHole,\n          points,\n          id: nbd,\n          parent: 0\n        };\n        contours.push(contour);\n        let contour0;\n        for (const c of contours) {\n          if (c.id === lnbd) {\n            contour0 = c;\n            break;\n          }\n        }\n        if (!contour0) {\n          contour.parent = isHole ? lnbd : 0;\n        } else if (contour0.isHole) {\n          contour.parent = isHole ? contour0.parent : lnbd;\n        } else {\n          contour.parent = isHole ? lnbd : contour0.parent;\n        }\n        const k = this.#clockwiseNonZero(types, width, i, j, i2, j2, 0);\n        if (k === -1) {\n          types[ij] = -nbd;\n          if (types[ij] !== 1) {\n            lnbd = Math.abs(types[ij]);\n          }\n          continue;\n        }\n        let shiftI = this.#neighborIdToIndex[2 * k];\n        let shiftJ = this.#neighborIdToIndex[2 * k + 1];\n        const i1 = i + shiftI;\n        const j1 = j + shiftJ;\n        i2 = i1;\n        j2 = j1;\n        let i3 = i;\n        let j3 = j;\n        while (true) {\n          const kk = this.#counterClockwiseNonZero(types, width, i3, j3, i2, j2, 1);\n          shiftI = this.#neighborIdToIndex[2 * kk];\n          shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n          const i4 = i3 + shiftI;\n          const j4 = j3 + shiftJ;\n          points.push(j4, i4);\n          const ij3 = i3 * width + j3;\n          if (types[ij3 + 1] === 0) {\n            types[ij3] = -nbd;\n          } else if (types[ij3] === 1) {\n            types[ij3] = nbd;\n          }\n          if (i4 === i && j4 === j && i3 === i1 && j3 === j1) {\n            if (types[ij] !== 1) {\n              lnbd = Math.abs(types[ij]);\n            }\n            break;\n          } else {\n            i2 = i3;\n            j2 = j3;\n            i3 = i4;\n            j3 = j4;\n          }\n        }\n      }\n    }\n    return contours;\n  }\n  static #douglasPeuckerHelper(points, start, end, output) {\n    if (end - start <= 4) {\n      for (let i = start; i < end - 2; i += 2) {\n        output.push(points[i], points[i + 1]);\n      }\n      return;\n    }\n    const ax = points[start];\n    const ay = points[start + 1];\n    const abx = points[end - 4] - ax;\n    const aby = points[end - 3] - ay;\n    const dist = Math.hypot(abx, aby);\n    const nabx = abx / dist;\n    const naby = aby / dist;\n    const aa = nabx * ay - naby * ax;\n    const m = aby / abx;\n    const invS = 1 / dist;\n    const phi = Math.atan(m);\n    const cosPhi = Math.cos(phi);\n    const sinPhi = Math.sin(phi);\n    const tmax = invS * (Math.abs(cosPhi) + Math.abs(sinPhi));\n    const poly = invS * (1 - tmax + tmax ** 2);\n    const partialPhi = Math.max(Math.atan(Math.abs(sinPhi + cosPhi) * poly), Math.atan(Math.abs(sinPhi - cosPhi) * poly));\n    let dmax = 0;\n    let index = start;\n    for (let i = start + 2; i < end - 2; i += 2) {\n      const d = Math.abs(aa - nabx * points[i + 1] + naby * points[i]);\n      if (d > dmax) {\n        index = i;\n        dmax = d;\n      }\n    }\n    if (dmax > (dist * partialPhi) ** 2) {\n      this.#douglasPeuckerHelper(points, start, index + 2, output);\n      this.#douglasPeuckerHelper(points, index, end, output);\n    } else {\n      output.push(ax, ay);\n    }\n  }\n  static #douglasPeucker(points) {\n    const output = [];\n    const len = points.length;\n    this.#douglasPeuckerHelper(points, 0, len, output);\n    output.push(points[len - 2], points[len - 1]);\n    return output.length <= 4 ? null : output;\n  }\n  static #bilateralFilter(buf, width, height, sigmaS, sigmaR, kernelSize) {\n    const kernel = new Float32Array(kernelSize ** 2);\n    const sigmaS2 = -2 * sigmaS ** 2;\n    const halfSize = kernelSize >> 1;\n    for (let i = 0; i < kernelSize; i++) {\n      const x = (i - halfSize) ** 2;\n      for (let j = 0; j < kernelSize; j++) {\n        kernel[i * kernelSize + j] = Math.exp((x + (j - halfSize) ** 2) / sigmaS2);\n      }\n    }\n    const rangeValues = new Float32Array(256);\n    const sigmaR2 = -2 * sigmaR ** 2;\n    for (let i = 0; i < 256; i++) {\n      rangeValues[i] = Math.exp(i ** 2 / sigmaR2);\n    }\n    const N = buf.length;\n    const out = new Uint8Array(N);\n    const histogram = new Uint32Array(256);\n    for (let i = 0; i < height; i++) {\n      for (let j = 0; j < width; j++) {\n        const ij = i * width + j;\n        const center = buf[ij];\n        let sum = 0;\n        let norm = 0;\n        for (let k = 0; k < kernelSize; k++) {\n          const y = i + k - halfSize;\n          if (y < 0 || y >= height) {\n            continue;\n          }\n          for (let l = 0; l < kernelSize; l++) {\n            const x = j + l - halfSize;\n            if (x < 0 || x >= width) {\n              continue;\n            }\n            const neighbour = buf[y * width + x];\n            const w = kernel[k * kernelSize + l] * rangeValues[Math.abs(neighbour - center)];\n            sum += neighbour * w;\n            norm += w;\n          }\n        }\n        const pix = out[ij] = Math.round(sum / norm);\n        histogram[pix]++;\n      }\n    }\n    return [out, histogram];\n  }\n  static #getHistogram(buf) {\n    const histogram = new Uint32Array(256);\n    for (const g of buf) {\n      histogram[g]++;\n    }\n    return histogram;\n  }\n  static #toUint8(buf) {\n    const N = buf.length;\n    const out = new Uint8ClampedArray(N >> 2);\n    let max = -Infinity;\n    let min = Infinity;\n    for (let i = 0, ii = out.length; i < ii; i++) {\n      const A = buf[(i << 2) + 3];\n      if (A === 0) {\n        max = out[i] = 0xff;\n        continue;\n      }\n      const pix = out[i] = buf[i << 2];\n      if (pix > max) {\n        max = pix;\n      }\n      if (pix < min) {\n        min = pix;\n      }\n    }\n    const ratio = 255 / (max - min);\n    for (let i = 0; i < N; i++) {\n      out[i] = (out[i] - min) * ratio;\n    }\n    return out;\n  }\n  static #guessThreshold(histogram) {\n    let i;\n    let M = -Infinity;\n    let L = -Infinity;\n    const min = histogram.findIndex(v => v !== 0);\n    let pos = min;\n    let spos = min;\n    for (i = min; i < 256; i++) {\n      const v = histogram[i];\n      if (v > M) {\n        if (i - pos > L) {\n          L = i - pos;\n          spos = i - 1;\n        }\n        M = v;\n        pos = i;\n      }\n    }\n    for (i = spos - 1; i >= 0; i--) {\n      if (histogram[i] > histogram[i + 1]) {\n        break;\n      }\n    }\n    return i;\n  }\n  static #getGrayPixels(bitmap) {\n    const originalBitmap = bitmap;\n    const {\n      width,\n      height\n    } = bitmap;\n    const {\n      maxDim\n    } = this.#PARAMETERS;\n    let newWidth = width;\n    let newHeight = height;\n    if (width > maxDim || height > maxDim) {\n      let prevWidth = width;\n      let prevHeight = height;\n      let steps = Math.log2(Math.max(width, height) / maxDim);\n      const isteps = Math.floor(steps);\n      steps = steps === isteps ? isteps - 1 : isteps;\n      for (let i = 0; i < steps; i++) {\n        newWidth = prevWidth;\n        newHeight = prevHeight;\n        if (newWidth > maxDim) {\n          newWidth = Math.ceil(newWidth / 2);\n        }\n        if (newHeight > maxDim) {\n          newHeight = Math.ceil(newHeight / 2);\n        }\n        const offscreen = new OffscreenCanvas(newWidth, newHeight);\n        const ctx = offscreen.getContext(\"2d\");\n        ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n        prevWidth = newWidth;\n        prevHeight = newHeight;\n        if (bitmap !== originalBitmap) {\n          bitmap.close();\n        }\n        bitmap = offscreen.transferToImageBitmap();\n      }\n      const ratio = Math.min(maxDim / newWidth, maxDim / newHeight);\n      newWidth = Math.round(newWidth * ratio);\n      newHeight = Math.round(newHeight * ratio);\n    }\n    const offscreen = new OffscreenCanvas(newWidth, newHeight);\n    const ctx = offscreen.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    ctx.filter = \"grayscale(1)\";\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, newWidth, newHeight);\n    const grayImage = ctx.getImageData(0, 0, newWidth, newHeight).data;\n    const uint8Buf = this.#toUint8(grayImage);\n    return [uint8Buf, newWidth, newHeight];\n  }\n  static extractContoursFromText(text, {\n    fontFamily,\n    fontStyle,\n    fontWeight\n  }, pageWidth, pageHeight, rotation, innerMargin) {\n    let canvas = new OffscreenCanvas(1, 1);\n    let ctx = canvas.getContext(\"2d\", {\n      alpha: false\n    });\n    const fontSize = 200;\n    const font = ctx.font = `${fontStyle} ${fontWeight} ${fontSize}px ${fontFamily}`;\n    const {\n      actualBoundingBoxLeft,\n      actualBoundingBoxRight,\n      actualBoundingBoxAscent,\n      actualBoundingBoxDescent,\n      fontBoundingBoxAscent,\n      fontBoundingBoxDescent,\n      width\n    } = ctx.measureText(text);\n    const SCALE = 1.5;\n    const canvasWidth = Math.ceil(Math.max(Math.abs(actualBoundingBoxLeft) + Math.abs(actualBoundingBoxRight) || 0, width) * SCALE);\n    const canvasHeight = Math.ceil(Math.max(Math.abs(actualBoundingBoxAscent) + Math.abs(actualBoundingBoxDescent) || fontSize, Math.abs(fontBoundingBoxAscent) + Math.abs(fontBoundingBoxDescent) || fontSize) * SCALE);\n    canvas = new OffscreenCanvas(canvasWidth, canvasHeight);\n    ctx = canvas.getContext(\"2d\", {\n      alpha: true,\n      willReadFrequently: true\n    });\n    ctx.font = font;\n    ctx.filter = \"grayscale(1)\";\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n    ctx.fillStyle = \"black\";\n    ctx.fillText(text, canvasWidth * (SCALE - 1) / 2, canvasHeight * (3 - SCALE) / 2);\n    const uint8Buf = this.#toUint8(ctx.getImageData(0, 0, canvasWidth, canvasHeight).data);\n    const histogram = this.#getHistogram(uint8Buf);\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(uint8Buf, canvasWidth, canvasHeight, threshold);\n    return this.processDrawnLines({\n      lines: {\n        curves: contourList,\n        width: canvasWidth,\n        height: canvasHeight\n      },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true\n    });\n  }\n  static process(bitmap, pageWidth, pageHeight, rotation, innerMargin) {\n    const [uint8Buf, width, height] = this.#getGrayPixels(bitmap);\n    const [buffer, histogram] = this.#bilateralFilter(uint8Buf, width, height, Math.hypot(width, height) * this.#PARAMETERS.sigmaSFactor, this.#PARAMETERS.sigmaR, this.#PARAMETERS.kernelSize);\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(buffer, width, height, threshold);\n    return this.processDrawnLines({\n      lines: {\n        curves: contourList,\n        width,\n        height\n      },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true\n    });\n  }\n  static processDrawnLines({\n    lines,\n    pageWidth,\n    pageHeight,\n    rotation,\n    innerMargin,\n    mustSmooth,\n    areContours\n  }) {\n    if (rotation % 180 !== 0) {\n      [pageWidth, pageHeight] = [pageHeight, pageWidth];\n    }\n    const {\n      curves,\n      width,\n      height\n    } = lines;\n    const thickness = lines.thickness ?? 0;\n    const linesAndPoints = [];\n    const ratio = Math.min(pageWidth / width, pageHeight / height);\n    const xScale = ratio / pageWidth;\n    const yScale = ratio / pageHeight;\n    const newCurves = [];\n    for (const {\n      points\n    } of curves) {\n      const reducedPoints = mustSmooth ? this.#douglasPeucker(points) : points;\n      if (!reducedPoints) {\n        continue;\n      }\n      newCurves.push(reducedPoints);\n      const len = reducedPoints.length;\n      const newPoints = new Float32Array(len);\n      const line = new Float32Array(3 * (len === 2 ? 2 : len - 2));\n      linesAndPoints.push({\n        line,\n        points: newPoints\n      });\n      if (len === 2) {\n        newPoints[0] = reducedPoints[0] * xScale;\n        newPoints[1] = reducedPoints[1] * yScale;\n        line.set([NaN, NaN, NaN, NaN, newPoints[0], newPoints[1]], 0);\n        continue;\n      }\n      let [x1, y1, x2, y2] = reducedPoints;\n      x1 *= xScale;\n      y1 *= yScale;\n      x2 *= xScale;\n      y2 *= yScale;\n      newPoints.set([x1, y1, x2, y2], 0);\n      line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n      for (let i = 4; i < len; i += 2) {\n        const x = newPoints[i] = reducedPoints[i] * xScale;\n        const y = newPoints[i + 1] = reducedPoints[i + 1] * yScale;\n        line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n        [x1, y1, x2, y2] = [x2, y2, x, y];\n      }\n    }\n    if (linesAndPoints.length === 0) {\n      return null;\n    }\n    const outline = areContours ? new ContourDrawOutline() : new InkDrawOutline();\n    outline.build(linesAndPoints, pageWidth, pageHeight, 1, rotation, areContours ? 0 : thickness, innerMargin);\n    return {\n      outline,\n      newCurves,\n      areContours,\n      thickness,\n      width,\n      height\n    };\n  }\n  static async compressSignature({\n    outlines,\n    areContours,\n    thickness,\n    width,\n    height\n  }) {\n    let minDiff = Infinity;\n    let maxDiff = -Infinity;\n    let outlinesLength = 0;\n    for (const points of outlines) {\n      outlinesLength += points.length;\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        const dx = points[i] - points[i - 2];\n        minDiff = Math.min(minDiff, dx);\n        maxDiff = Math.max(maxDiff, dx);\n      }\n    }\n    let bufferType;\n    if (minDiff >= -128 && maxDiff <= 127) {\n      bufferType = Int8Array;\n    } else if (minDiff >= -32768 && maxDiff <= 32767) {\n      bufferType = Int16Array;\n    } else {\n      bufferType = Int32Array;\n    }\n    const len = outlines.length;\n    const headerLength = BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * len;\n    const header = new Uint32Array(headerLength);\n    let offset = 0;\n    header[offset++] = headerLength * Uint32Array.BYTES_PER_ELEMENT + (outlinesLength - 2 * len) * bufferType.BYTES_PER_ELEMENT;\n    header[offset++] = 0;\n    header[offset++] = width;\n    header[offset++] = height;\n    header[offset++] = areContours ? 0 : 1;\n    header[offset++] = Math.max(0, Math.floor(thickness ?? 0));\n    header[offset++] = len;\n    header[offset++] = bufferType.BYTES_PER_ELEMENT;\n    for (const points of outlines) {\n      header[offset++] = points.length - 2;\n      header[offset++] = points[0];\n      header[offset++] = points[1];\n    }\n    const cs = new CompressionStream(\"deflate-raw\");\n    const writer = cs.writable.getWriter();\n    await writer.ready;\n    writer.write(header);\n    const BufferCtor = bufferType.prototype.constructor;\n    for (const points of outlines) {\n      const diffs = new BufferCtor(points.length - 2);\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        diffs[i - 2] = points[i] - points[i - 2];\n      }\n      writer.write(diffs);\n    }\n    writer.close();\n    const buf = await new Response(cs.readable).arrayBuffer();\n    const bytes = new Uint8Array(buf);\n    return toBase64Util(bytes);\n  }\n  static async decompressSignature(signatureData) {\n    try {\n      const bytes = fromBase64Util(signatureData);\n      const {\n        readable,\n        writable\n      } = new DecompressionStream(\"deflate-raw\");\n      const writer = writable.getWriter();\n      await writer.ready;\n      writer.write(bytes).then(async () => {\n        await writer.ready;\n        await writer.close();\n      }).catch(() => {});\n      let data = null;\n      let offset = 0;\n      for await (const chunk of readable) {\n        data ||= new Uint8Array(new Uint32Array(chunk.buffer, 0, 4)[0]);\n        data.set(chunk, offset);\n        offset += chunk.length;\n      }\n      const header = new Uint32Array(data.buffer, 0, data.length >> 2);\n      const version = header[1];\n      if (version !== 0) {\n        throw new Error(`Invalid version: ${version}`);\n      }\n      const width = header[2];\n      const height = header[3];\n      const areContours = header[4] === 0;\n      const thickness = header[5];\n      const numberOfDrawings = header[6];\n      const bufferType = header[7];\n      const outlines = [];\n      const diffsOffset = (BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * numberOfDrawings) * Uint32Array.BYTES_PER_ELEMENT;\n      let diffs;\n      switch (bufferType) {\n        case Int8Array.BYTES_PER_ELEMENT:\n          diffs = new Int8Array(data.buffer, diffsOffset);\n          break;\n        case Int16Array.BYTES_PER_ELEMENT:\n          diffs = new Int16Array(data.buffer, diffsOffset);\n          break;\n        case Int32Array.BYTES_PER_ELEMENT:\n          diffs = new Int32Array(data.buffer, diffsOffset);\n          break;\n      }\n      offset = 0;\n      for (let i = 0; i < numberOfDrawings; i++) {\n        const len = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH];\n        const points = new Float32Array(len + 2);\n        outlines.push(points);\n        for (let j = 0; j < POINTS_PROPERTIES_NUMBER - 1; j++) {\n          points[j] = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH + j + 1];\n        }\n        for (let j = 0; j < len; j++) {\n          points[j + 2] = points[j] + diffs[offset++];\n        }\n      }\n      return {\n        areContours,\n        thickness,\n        outlines,\n        width,\n        height\n      };\n    } catch (e) {\n      warn(`decompressSignature: ${e}`);\n      return null;\n    }\n  }\n}\n\n;// ./src/display/editor/signature.js\n\n\n\n\n\n\n\nclass SignatureOptions extends DrawingOptions {\n  constructor() {\n    super();\n    super.updateProperties({\n      fill: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 0\n    });\n  }\n  clone() {\n    const clone = new SignatureOptions();\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass DrawnSignatureOptions extends InkDrawingOptions {\n  constructor(viewerParameters) {\n    super(viewerParameters);\n    super.updateProperties({\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 1\n    });\n  }\n  clone() {\n    const clone = new DrawnSignatureOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass SignatureEditor extends DrawingEditor {\n  #isExtracted = false;\n  #description = null;\n  #signatureData = null;\n  #signatureUUID = null;\n  static _type = \"signature\";\n  static _editorType = AnnotationEditorType.SIGNATURE;\n  static _defaultDrawingOptions = null;\n  constructor(params) {\n    super({\n      ...params,\n      mustBeCommitted: true,\n      name: \"signatureEditor\"\n    });\n    this._willKeepAspectRatio = true;\n    this.#signatureData = params.signatureData || null;\n    this.#description = null;\n    this.defaultL10nId = \"pdfjs-editor-signature-editor1\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new SignatureOptions();\n    this._defaultDrawnSignatureOptions = new DrawnSignatureOptions(uiManager.viewParameters);\n  }\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n  static get supportMultipleDrawings() {\n    return false;\n  }\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map());\n  }\n  static get isDrawer() {\n    return false;\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"signature\",\n      hasDescription: !!this.#description\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    const hasDescriptionStats = data.get(\"hasDescription\");\n    return {\n      hasAltText: hasDescriptionStats.get(true) ?? 0,\n      hasNoAltText: hasDescriptionStats.get(false) ?? 0\n    };\n  }\n  get isResizable() {\n    return true;\n  }\n  onScaleChanging() {\n    if (this._drawId === null) {\n      return;\n    }\n    super.onScaleChanging();\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    const {\n      _isCopy\n    } = this;\n    if (_isCopy) {\n      this._isCopy = false;\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    if (this._drawId === null) {\n      if (this.#signatureData) {\n        const {\n          lines,\n          mustSmooth,\n          areContours,\n          description,\n          uuid,\n          heightInPage\n        } = this.#signatureData;\n        const {\n          rawDims: {\n            pageWidth,\n            pageHeight\n          },\n          rotation\n        } = this.parent.viewport;\n        const outline = SignatureExtractor.processDrawnLines({\n          lines,\n          pageWidth,\n          pageHeight,\n          rotation,\n          innerMargin: SignatureEditor._INNER_MARGIN,\n          mustSmooth,\n          areContours\n        });\n        this.addSignature(outline, heightInPage, description, uuid);\n      } else {\n        this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n          description: \"\"\n        }));\n        this.div.hidden = true;\n        this._uiManager.getSignature(this);\n      }\n    }\n    if (_isCopy) {\n      this._isCopy = true;\n      this._moveAfterPaste(baseX, baseY);\n    }\n    return this.div;\n  }\n  setUuid(uuid) {\n    this.#signatureUUID = uuid;\n    this.addEditToolbar();\n  }\n  getUuid() {\n    return this.#signatureUUID;\n  }\n  get description() {\n    return this.#description;\n  }\n  set description(description) {\n    this.#description = description;\n    super.addEditToolbar().then(toolbar => {\n      toolbar?.updateEditSignatureButton(description);\n    });\n  }\n  getSignaturePreview() {\n    const {\n      newCurves,\n      areContours,\n      thickness,\n      width,\n      height\n    } = this.#signatureData;\n    const maxDim = Math.max(width, height);\n    const outlineData = SignatureExtractor.processDrawnLines({\n      lines: {\n        curves: newCurves.map(points => ({\n          points\n        })),\n        thickness,\n        width,\n        height\n      },\n      pageWidth: maxDim,\n      pageHeight: maxDim,\n      rotation: 0,\n      innerMargin: 0,\n      mustSmooth: false,\n      areContours\n    });\n    return {\n      areContours,\n      outline: outlineData.outline\n    };\n  }\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.signatureManager && this.#description !== null) {\n      await toolbar.addEditSignatureButton(this._uiManager.signatureManager, this.#signatureUUID, this.#description);\n      toolbar.show();\n    }\n    return toolbar;\n  }\n  addSignature(data, heightInPage, description, uuid) {\n    const {\n      x: savedX,\n      y: savedY\n    } = this;\n    const {\n      outline\n    } = this.#signatureData = data;\n    this.#isExtracted = outline instanceof ContourDrawOutline;\n    this.#description = description;\n    this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n      description\n    }));\n    let drawingOptions;\n    if (this.#isExtracted) {\n      drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      drawingOptions.updateProperties({\n        \"stroke-width\": outline.thickness\n      });\n    }\n    this._addOutlines({\n      drawOutlines: outline,\n      drawingOptions\n    });\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const [, pageHeight] = this.pageDimensions;\n    let newHeight = heightInPage / pageHeight;\n    newHeight = newHeight >= 1 ? 0.5 : newHeight;\n    this.width *= newHeight / this.height;\n    if (this.width >= 1) {\n      newHeight *= 0.9 / this.width;\n      this.width = 0.9;\n    }\n    this.height = newHeight;\n    this.setDims(parentWidth * this.width, parentHeight * this.height);\n    this.x = savedX;\n    this.y = savedY;\n    this.center();\n    this._onResized();\n    this.onScaleChanging();\n    this.rotate();\n    this._uiManager.addToAnnotationStorage(this);\n    this.setUuid(uuid);\n    this._reportTelemetry({\n      action: \"pdfjs.signature.inserted\",\n      data: {\n        hasBeenSaved: !!uuid,\n        hasDescription: !!description\n      }\n    });\n    this.div.hidden = false;\n  }\n  getFromImage(bitmap) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.process(bitmap, pageWidth, pageHeight, rotation, SignatureEditor._INNER_MARGIN);\n  }\n  getFromText(text, fontInfo) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.extractContoursFromText(text, fontInfo, pageWidth, pageHeight, rotation, SignatureEditor._INNER_MARGIN);\n  }\n  getDrawnSignature(curves) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.processDrawnLines({\n      lines: curves,\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin: SignatureEditor._INNER_MARGIN,\n      mustSmooth: false,\n      areContours: false\n    });\n  }\n  createDrawingOptions({\n    areContours,\n    thickness\n  }) {\n    if (areContours) {\n      this._drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      this._drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      this._drawingOptions.updateProperties({\n        \"stroke-width\": thickness\n      });\n    }\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const {\n      lines,\n      points,\n      rect\n    } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        \"stroke-width\": thickness\n      }\n    } = this;\n    const serialized = {\n      annotationType: AnnotationEditorType.SIGNATURE,\n      isSignature: true,\n      areContours: this.#isExtracted,\n      color: [0, 0, 0],\n      thickness: this.#isExtracted ? 0 : thickness,\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.paths = {\n        lines,\n        points\n      };\n      serialized.uuid = this.#signatureUUID;\n      serialized.isCopy = true;\n    } else {\n      serialized.lines = lines;\n    }\n    if (this.#description) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: this.#description\n      };\n    }\n    return serialized;\n  }\n  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {\n    if (data.areContours) {\n      return ContourDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n    }\n    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n  }\n  static async deserialize(data, parent, uiManager) {\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#isExtracted = data.areContours;\n    editor.#description = data.accessibilityData?.alt || \"\";\n    editor.#signatureUUID = data.uuid;\n    return editor;\n  }\n}\n\n;// ./src/display/editor/stamp.js\n\n\n\n\nclass StampEditor extends AnnotationEditor {\n  #bitmap = null;\n  #bitmapId = null;\n  #bitmapPromise = null;\n  #bitmapUrl = null;\n  #bitmapFile = null;\n  #bitmapFileName = \"\";\n  #canvas = null;\n  #missingCanvas = false;\n  #resizeTimeoutId = null;\n  #isSvg = false;\n  #hasBeenAddedInUndoStack = false;\n  static _type = \"stamp\";\n  static _editorType = AnnotationEditorType.STAMP;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"stampEditor\"\n    });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n    this.defaultL10nId = \"pdfjs-editor-stamp-editor\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n  static isHandlingMimeForPasting(mime) {\n    return SupportedImageMimeTypes.includes(mime);\n  }\n  static paste(item, parent) {\n    parent.pasteEditor(AnnotationEditorType.STAMP, {\n      bitmapFile: item.getAsFile()\n    });\n  }\n  altTextFinish() {\n    if (this._uiManager.useNewAltTextFlow) {\n      this.div.hidden = false;\n    }\n    super.altTextFinish();\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"stamp\",\n      hasAltText: !!this.altTextData?.altText\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    const hasAltTextStats = data.get(\"hasAltText\");\n    return {\n      hasAltText: hasAltTextStats.get(true) ?? 0,\n      hasNoAltText: hasAltTextStats.get(false) ?? 0\n    };\n  }\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    if (data.file) {\n      this.#bitmapFileName = data.file.name;\n    }\n    this.#createCanvas();\n  }\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (!this.#canvas) {\n      return;\n    }\n    if (this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {\n      this._editToolbar.hide();\n      this._uiManager.editAltText(this, true);\n      return;\n    }\n    if (!this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {\n      this._reportTelemetry({\n        action: \"pdfjs.image.image_added\",\n        data: {\n          alt_text_modal: false,\n          alt_text_type: \"empty\"\n        }\n      });\n      try {\n        this.mlGuessAltText();\n      } catch {}\n    }\n    this.div.focus();\n  }\n  async mlGuessAltText(imageData = null, updateAltTextData = true) {\n    if (this.hasAltTextData()) {\n      return null;\n    }\n    const {\n      mlManager\n    } = this._uiManager;\n    if (!mlManager) {\n      throw new Error(\"No ML.\");\n    }\n    if (!(await mlManager.isEnabledFor(\"altText\"))) {\n      throw new Error(\"ML isn't enabled for alt text.\");\n    }\n    const {\n      data,\n      width,\n      height\n    } = imageData || this.copyCanvas(null, null, true).imageData;\n    const response = await mlManager.guess({\n      name: \"altText\",\n      request: {\n        data,\n        width,\n        height,\n        channels: data.length / (width * height)\n      }\n    });\n    if (!response) {\n      throw new Error(\"No response from the AI service.\");\n    }\n    if (response.error) {\n      throw new Error(\"Error from the AI service.\");\n    }\n    if (response.cancel) {\n      return null;\n    }\n    if (!response.output) {\n      throw new Error(\"No valid response from the AI service.\");\n    }\n    const altText = response.output;\n    await this.setGuessedAltText(altText);\n    if (updateAltTextData && !this.hasAltTextData()) {\n      this.altTextData = {\n        alt: altText,\n        decorative: false\n      };\n    }\n    return altText;\n  }\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager.getFromId(this.#bitmapId).then(data => this.#getBitmapFetched(data, true)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromUrl(url).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromFile(file).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = SupportedImageMimeTypes.join(\",\");\n    const signal = this._uiManager._signal;\n    this.#bitmapPromise = new Promise(resolve => {\n      input.addEventListener(\"change\", async () => {\n        if (!input.files || input.files.length === 0) {\n          this.remove();\n        } else {\n          this._uiManager.enableWaiting(true);\n          const data = await this._uiManager.imageManager.getFromFile(input.files[0]);\n          this._reportTelemetry({\n            action: \"pdfjs.image.image_selected\",\n            data: {\n              alt_text_modal: this._uiManager.useNewAltTextFlow\n            }\n          });\n          this.#getBitmapFetched(data);\n        }\n        resolve();\n      }, {\n        signal\n      });\n      input.addEventListener(\"cancel\", () => {\n        this.remove();\n        resolve();\n      }, {\n        signal\n      });\n    }).finally(() => this.#getBitmapDone());\n    input.click();\n  }\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      if (this.#resizeTimeoutId) {\n        clearTimeout(this.#resizeTimeoutId);\n        this.#resizeTimeoutId = null;\n      }\n    }\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (this.#bitmapId && this.#canvas === null) {\n      this.#getBitmap();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  onceAdded(focus) {\n    this._isDraggable = true;\n    if (focus) {\n      this.div.focus();\n    }\n  }\n  isEmpty() {\n    return !(this.#bitmapPromise || this.#bitmap || this.#bitmapUrl || this.#bitmapFile || this.#bitmapId || this.#missingCanvas);\n  }\n  get isResizable() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.hidden = true;\n    this.addAltTextButton();\n    if (!this.#missingCanvas) {\n      if (this.#bitmap) {\n        this.#createCanvas();\n      } else {\n        this.#getBitmap();\n      }\n    }\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n    this._uiManager.addShouldRescale(this);\n    return this.div;\n  }\n  setCanvas(annotationElementId, canvas) {\n    const {\n      id: bitmapId,\n      bitmap\n    } = this._uiManager.imageManager.getFromCanvas(annotationElementId, canvas);\n    canvas.remove();\n    if (bitmapId && this._uiManager.imageManager.isValidId(bitmapId)) {\n      this.#bitmapId = bitmapId;\n      if (bitmap) {\n        this.#bitmap = bitmap;\n      }\n      this.#missingCanvas = false;\n      this.#createCanvas();\n    }\n  }\n  _onResized() {\n    this.onScaleChanging();\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap();\n    }, TIME_TO_WAIT);\n  }\n  #createCanvas() {\n    const {\n      div\n    } = this;\n    let {\n      width,\n      height\n    } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (width > MAX_RATIO * pageWidth || height > MAX_RATIO * pageHeight) {\n      const factor = Math.min(MAX_RATIO * pageWidth / width, MAX_RATIO * pageHeight / height);\n      width *= factor;\n      height *= factor;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(width * parentWidth / pageWidth, height * parentHeight / pageHeight);\n    this._uiManager.enableWaiting(false);\n    const canvas = this.#canvas = document.createElement(\"canvas\");\n    canvas.setAttribute(\"role\", \"img\");\n    this.addContainer(canvas);\n    this.width = width / pageWidth;\n    this.height = height / pageHeight;\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n    if (!this._uiManager.useNewAltTextWhenAddingImage || !this._uiManager.useNewAltTextFlow || this.annotationElementId) {\n      div.hidden = false;\n    }\n    this.#drawBitmap();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n    this._reportTelemetry({\n      action: \"inserted_image\"\n    });\n    if (this.#bitmapFileName) {\n      this.div.setAttribute(\"aria-description\", this.#bitmapFileName);\n    }\n  }\n  copyCanvas(maxDataDimension, maxPreviewDimension, createImageData = false) {\n    if (!maxDataDimension) {\n      maxDataDimension = 224;\n    }\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    const outputScale = new OutputScale();\n    let bitmap = this.#bitmap;\n    let width = bitmapWidth,\n      height = bitmapHeight;\n    let canvas = null;\n    if (maxPreviewDimension) {\n      if (bitmapWidth > maxPreviewDimension || bitmapHeight > maxPreviewDimension) {\n        const ratio = Math.min(maxPreviewDimension / bitmapWidth, maxPreviewDimension / bitmapHeight);\n        width = Math.floor(bitmapWidth * ratio);\n        height = Math.floor(bitmapHeight * ratio);\n      }\n      canvas = document.createElement(\"canvas\");\n      const scaledWidth = canvas.width = Math.ceil(width * outputScale.sx);\n      const scaledHeight = canvas.height = Math.ceil(height * outputScale.sy);\n      if (!this.#isSvg) {\n        bitmap = this.#scaleBitmap(scaledWidth, scaledHeight);\n      }\n      const ctx = canvas.getContext(\"2d\");\n      ctx.filter = this._uiManager.hcmFilter;\n      let white = \"white\",\n        black = \"#cfcfd8\";\n      if (this._uiManager.hcmFilter !== \"none\") {\n        black = \"black\";\n      } else if (window.matchMedia?.(\"(prefers-color-scheme: dark)\").matches) {\n        white = \"#8f8f9d\";\n        black = \"#42414d\";\n      }\n      const boxDim = 15;\n      const boxDimWidth = boxDim * outputScale.sx;\n      const boxDimHeight = boxDim * outputScale.sy;\n      const pattern = new OffscreenCanvas(boxDimWidth * 2, boxDimHeight * 2);\n      const patternCtx = pattern.getContext(\"2d\");\n      patternCtx.fillStyle = white;\n      patternCtx.fillRect(0, 0, boxDimWidth * 2, boxDimHeight * 2);\n      patternCtx.fillStyle = black;\n      patternCtx.fillRect(0, 0, boxDimWidth, boxDimHeight);\n      patternCtx.fillRect(boxDimWidth, boxDimHeight, boxDimWidth, boxDimHeight);\n      ctx.fillStyle = ctx.createPattern(pattern, \"repeat\");\n      ctx.fillRect(0, 0, scaledWidth, scaledHeight);\n      ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);\n    }\n    let imageData = null;\n    if (createImageData) {\n      let dataWidth, dataHeight;\n      if (outputScale.symmetric && bitmap.width < maxDataDimension && bitmap.height < maxDataDimension) {\n        dataWidth = bitmap.width;\n        dataHeight = bitmap.height;\n      } else {\n        bitmap = this.#bitmap;\n        if (bitmapWidth > maxDataDimension || bitmapHeight > maxDataDimension) {\n          const ratio = Math.min(maxDataDimension / bitmapWidth, maxDataDimension / bitmapHeight);\n          dataWidth = Math.floor(bitmapWidth * ratio);\n          dataHeight = Math.floor(bitmapHeight * ratio);\n          if (!this.#isSvg) {\n            bitmap = this.#scaleBitmap(dataWidth, dataHeight);\n          }\n        }\n      }\n      const offscreen = new OffscreenCanvas(dataWidth, dataHeight);\n      const offscreenCtx = offscreen.getContext(\"2d\", {\n        willReadFrequently: true\n      });\n      offscreenCtx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, dataWidth, dataHeight);\n      imageData = {\n        width: dataWidth,\n        height: dataHeight,\n        data: offscreenCtx.getImageData(0, 0, dataWidth, dataHeight).data\n      };\n    }\n    return {\n      canvas,\n      width,\n      height,\n      imageData\n    };\n  }\n  #scaleBitmap(width, height) {\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n      if (newWidth > 2 * width) {\n        newWidth = newWidth >= 16384 ? Math.floor(newWidth / 2) - 1 : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight = newHeight >= 16384 ? Math.floor(newHeight / 2) - 1 : Math.ceil(newHeight / 2);\n      }\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n      bitmap = offscreen.transferToImageBitmap();\n    }\n    return bitmap;\n  }\n  #drawBitmap() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      width,\n      height\n    } = this;\n    const outputScale = new OutputScale();\n    const scaledWidth = Math.ceil(width * parentWidth * outputScale.sx);\n    const scaledHeight = Math.ceil(height * parentHeight * outputScale.sy);\n    const canvas = this.#canvas;\n    if (!canvas || canvas.width === scaledWidth && canvas.height === scaledHeight) {\n      return;\n    }\n    canvas.width = scaledWidth;\n    canvas.height = scaledHeight;\n    const bitmap = this.#isSvg ? this.#bitmap : this.#scaleBitmap(scaledWidth, scaledHeight);\n    const ctx = canvas.getContext(\"2d\");\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);\n  }\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      const canvas = document.createElement(\"canvas\");\n      ({\n        width: canvas.width,\n        height: canvas.height\n      } = this.#bitmap);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0);\n      return canvas.toDataURL();\n    }\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      const width = Math.round(this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const height = Math.round(this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0, this.#bitmap.width, this.#bitmap.height, 0, 0, width, height);\n      return offscreen.transferToImageBitmap();\n    }\n    return structuredClone(this.#bitmap);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    let missingCanvas = false;\n    if (data instanceof StampAnnotationElement) {\n      const {\n        data: {\n          rect,\n          rotation,\n          id,\n          structParent,\n          popupRef\n        },\n        container,\n        parent: {\n          page: {\n            pageNumber\n          }\n        },\n        canvas\n      } = data;\n      let bitmapId, bitmap;\n      if (canvas) {\n        delete data.canvas;\n        ({\n          id: bitmapId,\n          bitmap\n        } = uiManager.imageManager.getFromCanvas(container.id, canvas));\n        canvas.remove();\n      } else {\n        missingCanvas = true;\n        data._hasNoCanvas = true;\n      }\n      const altText = (await parent._structTree.getAriaAttributes(`${AnnotationPrefix}${id}`))?.get(\"aria-label\") || \"\";\n      initialData = data = {\n        annotationType: AnnotationEditorType.STAMP,\n        bitmapId,\n        bitmap,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        accessibilityData: {\n          decorative: false,\n          altText\n        },\n        isSvg: false,\n        structParent,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    const {\n      rect,\n      bitmap,\n      bitmapUrl,\n      bitmapId,\n      isSvg,\n      accessibilityData\n    } = data;\n    if (missingCanvas) {\n      uiManager.addMissingCanvas(data.id, editor);\n      editor.#missingCanvas = true;\n    } else if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n      if (bitmap) {\n        editor.#bitmap = bitmap;\n      }\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n    editor.annotationElementId = data.id || null;\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n    editor._initialData = initialData;\n    editor.#hasBeenAddedInUndoStack = !!initialData;\n    return editor;\n  }\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const serialized = {\n      annotationType: AnnotationEditorType.STAMP,\n      bitmapId: this.#bitmapId,\n      pageIndex: this.pageIndex,\n      rect: this.getRect(0, 0),\n      rotation: this.rotation,\n      isSvg: this.#isSvg,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.bitmapUrl = this.#serializeBitmap(true);\n      serialized.accessibilityData = this.serializeAltText(true);\n      serialized.isCopy = true;\n      return serialized;\n    }\n    const {\n      decorative,\n      altText\n    } = this.serializeAltText(false);\n    if (!decorative && altText) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: altText\n      };\n    }\n    if (this.annotationElementId) {\n      const changes = this.#hasElementChanged(serialized);\n      if (changes.isSame) {\n        return null;\n      }\n      if (changes.isSameAltText) {\n        delete serialized.accessibilityData;\n      } else {\n        serialized.accessibilityData.structParent = this._initialData.structParent ?? -1;\n      }\n    }\n    serialized.id = this.annotationElementId;\n    if (context === null) {\n      return serialized;\n    }\n    context.stamps ||= new Map();\n    const area = this.#isSvg ? (serialized.rect[2] - serialized.rect[0]) * (serialized.rect[3] - serialized.rect[1]) : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      context.stamps.set(this.#bitmapId, {\n        area,\n        serialized\n      });\n      serialized.bitmap = this.#serializeBitmap(false);\n    } else if (this.#isSvg) {\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(false);\n      }\n    }\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      pageIndex,\n      accessibilityData: {\n        altText\n      }\n    } = this._initialData;\n    const isSamePageIndex = serialized.pageIndex === pageIndex;\n    const isSameAltText = (serialized.accessibilityData?.alt || \"\") === altText;\n    return {\n      isSame: !this._hasBeenMoved && !this._hasBeenResized && isSamePageIndex && isSameAltText,\n      isSameAltText\n    };\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n}\n\n;// ./src/display/editor/annotation_editor_layer.js\n\n\n\n\n\n\n\n\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n  #allowClick = false;\n  #annotationLayer = null;\n  #clickAC = null;\n  #editorFocusTimeoutId = null;\n  #editors = new Map();\n  #hadPointerDown = false;\n  #isDisabling = false;\n  #isEnabling = false;\n  #drawingAC = null;\n  #focusedElement = null;\n  #textLayer = null;\n  #textSelectionAC = null;\n  #uiManager;\n  static _initialized = false;\n  static #editorTypes = new Map([FreeTextEditor, InkEditor, StampEditor, HighlightEditor, SignatureEditor].map(type => [type._editorType, type]));\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    structTreeLayer,\n    accessibilityManager,\n    annotationLayer,\n    drawLayer,\n    textLayer,\n    viewport,\n    l10n\n  }) {\n    const editorTypes = [...AnnotationEditorLayer.#editorTypes.values()];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n, uiManager);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#textLayer = textLayer;\n    this.drawLayer = drawLayer;\n    this._structTree = structTreeLayer;\n    this.#uiManager.addLayer(this);\n  }\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n  get isInvisible() {\n    return this.isEmpty && this.#uiManager.getMode() === AnnotationEditorType.NONE;\n  }\n  updateToolbar(mode) {\n    this.#uiManager.updateToolbar(mode);\n  }\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    switch (mode) {\n      case AnnotationEditorType.NONE:\n        this.disableTextSelection();\n        this.togglePointerEvents(false);\n        this.toggleAnnotationLayerPointerEvents(true);\n        this.disableClick();\n        return;\n      case AnnotationEditorType.INK:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n        break;\n      case AnnotationEditorType.HIGHLIGHT:\n        this.enableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      default:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n    }\n    this.toggleAnnotationLayerPointerEvents(false);\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.toggle(`${editorType._type}Editing`, mode === editorType._editorType);\n    }\n    this.div.hidden = false;\n  }\n  hasTextLayer(textLayer) {\n    return textLayer === this.#textLayer?.div;\n  }\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n  cleanUndoStack(type) {\n    this.#uiManager.cleanUndoStack(type);\n  }\n  toggleDrawing(enabled = false) {\n    this.div.classList.toggle(\"drawing\", !enabled);\n  }\n  togglePointerEvents(enabled = false) {\n    this.div.classList.toggle(\"disabled\", !enabled);\n  }\n  toggleAnnotationLayerPointerEvents(enabled = false) {\n    this.#annotationLayer?.div.classList.toggle(\"disabled\", !enabled);\n  }\n  async enable() {\n    this.#isEnabling = true;\n    this.div.tabIndex = 0;\n    this.togglePointerEvents(true);\n    const annotationElementIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n      editor.show(true);\n      if (editor.annotationElementId) {\n        this.#uiManager.removeChangedExistingAnnotation(editor);\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n    if (!this.#annotationLayer) {\n      this.#isEnabling = false;\n      return;\n    }\n    const editables = this.#annotationLayer.getEditableAnnotations();\n    for (const editable of editables) {\n      editable.hide();\n      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n        continue;\n      }\n      if (annotationElementIds.has(editable.data.id)) {\n        continue;\n      }\n      const editor = await this.deserialize(editable);\n      if (!editor) {\n        continue;\n      }\n      this.addOrRebuild(editor);\n      editor.enableEditing();\n    }\n    this.#isEnabling = false;\n  }\n  disable() {\n    this.#isDisabling = true;\n    this.div.tabIndex = -1;\n    this.togglePointerEvents(false);\n    const changedAnnotations = new Map();\n    const resetAnnotations = new Map();\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n      if (!editor.annotationElementId) {\n        continue;\n      }\n      if (editor.serialize() !== null) {\n        changedAnnotations.set(editor.annotationElementId, editor);\n        continue;\n      } else {\n        resetAnnotations.set(editor.annotationElementId, editor);\n      }\n      this.getEditableAnnotation(editor.annotationElementId)?.show();\n      editor.remove();\n    }\n    if (this.#annotationLayer) {\n      const editables = this.#annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const {\n          id\n        } = editable.data;\n        if (this.#uiManager.isDeletedAnnotationElement(id)) {\n          continue;\n        }\n        let editor = resetAnnotations.get(id);\n        if (editor) {\n          editor.resetAnnotationElement(editable);\n          editor.show(false);\n          editable.show();\n          continue;\n        }\n        editor = changedAnnotations.get(id);\n        if (editor) {\n          this.#uiManager.addChangedExistingAnnotation(editor);\n          if (editor.renderAnnotationElement(editable)) {\n            editor.show(false);\n          }\n        }\n        editable.show();\n      }\n    }\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.remove(`${editorType._type}Editing`);\n    }\n    this.disableTextSelection();\n    this.toggleAnnotationLayerPointerEvents(true);\n    this.#isDisabling = false;\n  }\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n    this.#uiManager.setActiveEditor(editor);\n  }\n  enableTextSelection() {\n    this.div.tabIndex = -1;\n    if (this.#textLayer?.div && !this.#textSelectionAC) {\n      this.#textSelectionAC = new AbortController();\n      const signal = this.#uiManager.combinedSignal(this.#textSelectionAC);\n      this.#textLayer.div.addEventListener(\"pointerdown\", this.#textLayerPointerDown.bind(this), {\n        signal\n      });\n      this.#textLayer.div.classList.add(\"highlighting\");\n    }\n  }\n  disableTextSelection() {\n    this.div.tabIndex = 0;\n    if (this.#textLayer?.div && this.#textSelectionAC) {\n      this.#textSelectionAC.abort();\n      this.#textSelectionAC = null;\n      this.#textLayer.div.classList.remove(\"highlighting\");\n    }\n  }\n  #textLayerPointerDown(event) {\n    this.#uiManager.unselectAll();\n    const {\n      target\n    } = event;\n    if (target === this.#textLayer.div || (target.getAttribute(\"role\") === \"img\" || target.classList.contains(\"endOfContent\")) && this.#textLayer.div.contains(target)) {\n      const {\n        isMac\n      } = util_FeatureTest.platform;\n      if (event.button !== 0 || event.ctrlKey && isMac) {\n        return;\n      }\n      this.#uiManager.showAllEditors(\"highlight\", true, true);\n      this.#textLayer.div.classList.add(\"free\");\n      this.toggleDrawing();\n      HighlightEditor.startHighlighting(this, this.#uiManager.direction === \"ltr\", {\n        target: this.#textLayer.div,\n        x: event.x,\n        y: event.y\n      });\n      this.#textLayer.div.addEventListener(\"pointerup\", () => {\n        this.#textLayer.div.classList.remove(\"free\");\n        this.toggleDrawing(true);\n      }, {\n        once: true,\n        signal: this.#uiManager._signal\n      });\n      event.preventDefault();\n    }\n  }\n  enableClick() {\n    if (this.#clickAC) {\n      return;\n    }\n    this.#clickAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#clickAC);\n    this.div.addEventListener(\"pointerdown\", this.pointerdown.bind(this), {\n      signal\n    });\n    const pointerup = this.pointerup.bind(this);\n    this.div.addEventListener(\"pointerup\", pointerup, {\n      signal\n    });\n    this.div.addEventListener(\"pointercancel\", pointerup, {\n      signal\n    });\n  }\n  disableClick() {\n    this.#clickAC?.abort();\n    this.#clickAC = null;\n  }\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const {\n      annotationElementId\n    } = editor;\n    if (annotationElementId && this.#uiManager.isDeletedAnnotationElement(annotationElementId)) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n  remove(editor) {\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n  }\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n    if (editor.parent && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n  add(editor) {\n    if (editor.parent === this && editor.isAttachedToDOM) {\n      return;\n    }\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n    editor.fixAndSetPosition();\n    editor.onceAdded(!this.#isEnabling);\n    this.#uiManager.addToAnnotationStorage(editor);\n    editor._reportTelemetry(editor.telemetryInitialData);\n  }\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {\n      editor._focusEventsAllowed = false;\n      this.#editorFocusTimeoutId = setTimeout(() => {\n        this.#editorFocusTimeoutId = null;\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\"focusin\", () => {\n            editor._focusEventsAllowed = true;\n          }, {\n            once: true,\n            signal: this.#uiManager._signal\n          });\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(this.div, editor.div, editor.contentDiv, true);\n  }\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.parent ||= this;\n      editor.rebuild();\n      editor.show();\n    } else {\n      this.add(editor);\n    }\n  }\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: false\n    });\n  }\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n  get #currentEditorType() {\n    return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());\n  }\n  combinedSignal(ac) {\n    return this.#uiManager.combinedSignal(ac);\n  }\n  #createNewEditor(params) {\n    const editorType = this.#currentEditorType;\n    return editorType ? new editorType.prototype.constructor(params) : null;\n  }\n  canCreateNewEmptyEditor() {\n    return this.#currentEditorType?.canCreateNewEmptyEditor();\n  }\n  async pasteEditor(mode, params) {\n    this.#uiManager.updateToolbar(mode);\n    await this.#uiManager.updateMode(mode);\n    const {\n      offsetX,\n      offsetY\n    } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n  async deserialize(data) {\n    return (await AnnotationEditorLayer.#editorTypes.get(data.annotationType ?? data.annotationEditorType)?.deserialize(data, this, this.#uiManager)) || null;\n  }\n  createAndAddNewEditor(event, isCentered, data = {}) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered,\n      ...data\n    });\n    if (editor) {\n      this.add(editor);\n    }\n    return editor;\n  }\n  #getCenterPoint() {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.div.getBoundingClientRect();\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] = this.viewport.rotation % 180 === 0 ? [centerX, centerY] : [centerY, centerX];\n    return {\n      offsetX,\n      offsetY\n    };\n  }\n  addNewEditor(data = {}) {\n    this.createAndAddNewEditor(this.#getCenterPoint(), true, data);\n  }\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n  pointerup(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    if (!this.#hadPointerDown) {\n      return;\n    }\n    this.#hadPointerDown = false;\n    if (this.#currentEditorType?.isDrawer && this.#currentEditorType.supportMultipleDrawings) {\n      return;\n    }\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n    const currentMode = this.#uiManager.getMode();\n    if (currentMode === AnnotationEditorType.STAMP || currentMode === AnnotationEditorType.SIGNATURE) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n    this.createAndAddNewEditor(event, false);\n  }\n  pointerdown(event) {\n    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {\n      this.enableTextSelection();\n    }\n    if (this.#hadPointerDown) {\n      this.#hadPointerDown = false;\n      return;\n    }\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    this.#hadPointerDown = true;\n    if (this.#currentEditorType?.isDrawer) {\n      this.startDrawingSession(event);\n      return;\n    }\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n  startDrawingSession(event) {\n    this.div.focus({\n      preventScroll: true\n    });\n    if (this.#drawingAC) {\n      this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n      return;\n    }\n    this.#uiManager.setCurrentDrawingSession(this);\n    this.#drawingAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#drawingAC);\n    this.div.addEventListener(\"blur\", ({\n      relatedTarget\n    }) => {\n      if (relatedTarget && !this.div.contains(relatedTarget)) {\n        this.#focusedElement = null;\n        this.commitOrRemove();\n      }\n    }, {\n      signal\n    });\n    this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n  }\n  pause(on) {\n    if (on) {\n      const {\n        activeElement\n      } = document;\n      if (this.div.contains(activeElement)) {\n        this.#focusedElement = activeElement;\n      }\n      return;\n    }\n    if (this.#focusedElement) {\n      setTimeout(() => {\n        this.#focusedElement?.focus();\n        this.#focusedElement = null;\n      }, 0);\n    }\n  }\n  endDrawingSession(isAborted = false) {\n    if (!this.#drawingAC) {\n      return null;\n    }\n    this.#uiManager.setCurrentDrawingSession(null);\n    this.#drawingAC.abort();\n    this.#drawingAC = null;\n    this.#focusedElement = null;\n    return this.#currentEditorType.endDrawing(isAborted);\n  }\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n  commitOrRemove() {\n    if (this.#drawingAC) {\n      this.endDrawingSession();\n      return true;\n    }\n    return false;\n  }\n  onScaleChanging() {\n    if (!this.#drawingAC) {\n      return;\n    }\n    this.#currentEditorType.onScaleChangingWhenDrawing(this);\n  }\n  destroy() {\n    this.commitOrRemove();\n    if (this.#uiManager.getActive()?.parent === this) {\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n    if (this.#editorFocusTimeoutId) {\n      clearTimeout(this.#editorFocusTimeoutId);\n      this.#editorFocusTimeoutId = null;\n    }\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n  #cleanup() {\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n  }\n  render({\n    viewport\n  }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n      editor.rebuild();\n    }\n    this.updateMode();\n  }\n  update({\n    viewport\n  }) {\n    this.#uiManager.commitOrRemove();\n    this.#cleanup();\n    const oldRotation = this.viewport.rotation;\n    const rotation = viewport.rotation;\n    this.viewport = viewport;\n    setLayerDimensions(this.div, {\n      rotation\n    });\n    if (oldRotation !== rotation) {\n      for (const editor of this.#editors.values()) {\n        editor.rotate(rotation);\n      }\n    }\n  }\n  get pageDimensions() {\n    const {\n      pageWidth,\n      pageHeight\n    } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n  get scale() {\n    return this.#uiManager.viewParameters.realScale;\n  }\n}\n\n;// ./src/display/draw_layer.js\n\n\nclass DrawLayer {\n  #parent = null;\n  #mapping = new Map();\n  #toUpdate = new Map();\n  static #id = 0;\n  constructor({\n    pageIndex\n  }) {\n    this.pageIndex = pageIndex;\n  }\n  setParent(parent) {\n    if (!this.#parent) {\n      this.#parent = parent;\n      return;\n    }\n    if (this.#parent !== parent) {\n      if (this.#mapping.size > 0) {\n        for (const root of this.#mapping.values()) {\n          root.remove();\n          parent.append(root);\n        }\n      }\n      this.#parent = parent;\n    }\n  }\n  static get _svgFactory() {\n    return shadow(this, \"_svgFactory\", new DOMSVGFactory());\n  }\n  static #setBox(element, [x, y, width, height]) {\n    const {\n      style\n    } = element;\n    style.top = `${100 * y}%`;\n    style.left = `${100 * x}%`;\n    style.width = `${100 * width}%`;\n    style.height = `${100 * height}%`;\n  }\n  #createSVG() {\n    const svg = DrawLayer._svgFactory.create(1, 1, true);\n    this.#parent.append(svg);\n    svg.setAttribute(\"aria-hidden\", true);\n    return svg;\n  }\n  #createClipPath(defs, pathId) {\n    const clipPath = DrawLayer._svgFactory.createElement(\"clipPath\");\n    defs.append(clipPath);\n    const clipPathId = `clip_${pathId}`;\n    clipPath.setAttribute(\"id\", clipPathId);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    const clipPathUse = DrawLayer._svgFactory.createElement(\"use\");\n    clipPath.append(clipPathUse);\n    clipPathUse.setAttribute(\"href\", `#${pathId}`);\n    clipPathUse.classList.add(\"clip\");\n    return clipPathId;\n  }\n  #updateProperties(element, properties) {\n    for (const [key, value] of Object.entries(properties)) {\n      if (value === null) {\n        element.removeAttribute(key);\n      } else {\n        element.setAttribute(key, value);\n      }\n    }\n  }\n  draw(properties, isPathUpdatable = false, hasClip = false) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    if (isPathUpdatable) {\n      this.#toUpdate.set(id, path);\n    }\n    const clipPathId = hasClip ? this.#createClipPath(defs, pathId) : null;\n    const use = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use);\n    use.setAttribute(\"href\", `#${pathId}`);\n    this.updateProperties(root, properties);\n    this.#mapping.set(id, root);\n    return {\n      id,\n      clipPathId: `url(#${clipPathId})`\n    };\n  }\n  drawOutline(properties, mustRemoveSelfIntersections) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    let maskId;\n    if (mustRemoveSelfIntersections) {\n      const mask = DrawLayer._svgFactory.createElement(\"mask\");\n      defs.append(mask);\n      maskId = `mask_p${this.pageIndex}_${id}`;\n      mask.setAttribute(\"id\", maskId);\n      mask.setAttribute(\"maskUnits\", \"objectBoundingBox\");\n      const rect = DrawLayer._svgFactory.createElement(\"rect\");\n      mask.append(rect);\n      rect.setAttribute(\"width\", \"1\");\n      rect.setAttribute(\"height\", \"1\");\n      rect.setAttribute(\"fill\", \"white\");\n      const use = DrawLayer._svgFactory.createElement(\"use\");\n      mask.append(use);\n      use.setAttribute(\"href\", `#${pathId}`);\n      use.setAttribute(\"stroke\", \"none\");\n      use.setAttribute(\"fill\", \"black\");\n      use.setAttribute(\"fill-rule\", \"nonzero\");\n      use.classList.add(\"mask\");\n    }\n    const use1 = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use1);\n    use1.setAttribute(\"href\", `#${pathId}`);\n    if (maskId) {\n      use1.setAttribute(\"mask\", `url(#${maskId})`);\n    }\n    const use2 = use1.cloneNode();\n    root.append(use2);\n    use1.classList.add(\"mainOutline\");\n    use2.classList.add(\"secondaryOutline\");\n    this.updateProperties(root, properties);\n    this.#mapping.set(id, root);\n    return id;\n  }\n  finalizeDraw(id, properties) {\n    this.#toUpdate.delete(id);\n    this.updateProperties(id, properties);\n  }\n  updateProperties(elementOrId, properties) {\n    if (!properties) {\n      return;\n    }\n    const {\n      root,\n      bbox,\n      rootClass,\n      path\n    } = properties;\n    const element = typeof elementOrId === \"number\" ? this.#mapping.get(elementOrId) : elementOrId;\n    if (!element) {\n      return;\n    }\n    if (root) {\n      this.#updateProperties(element, root);\n    }\n    if (bbox) {\n      DrawLayer.#setBox(element, bbox);\n    }\n    if (rootClass) {\n      const {\n        classList\n      } = element;\n      for (const [className, value] of Object.entries(rootClass)) {\n        classList.toggle(className, value);\n      }\n    }\n    if (path) {\n      const defs = element.firstChild;\n      const pathElement = defs.firstChild;\n      this.#updateProperties(pathElement, path);\n    }\n  }\n  updateParent(id, layer) {\n    if (layer === this) {\n      return;\n    }\n    const root = this.#mapping.get(id);\n    if (!root) {\n      return;\n    }\n    layer.#parent.append(root);\n    this.#mapping.delete(id);\n    layer.#mapping.set(id, root);\n  }\n  remove(id) {\n    this.#toUpdate.delete(id);\n    if (this.#parent === null) {\n      return;\n    }\n    this.#mapping.get(id).remove();\n    this.#mapping.delete(id);\n  }\n  destroy() {\n    this.#parent = null;\n    for (const root of this.#mapping.values()) {\n      root.remove();\n    }\n    this.#mapping.clear();\n    this.#toUpdate.clear();\n  }\n}\n\n;// ./src/pdf.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst pdfjsVersion = \"5.2.133\";\nconst pdfjsBuild = \"4f7761353\";\n{\n  globalThis.pdfjsTestingUtils = {\n    HighlightOutliner: HighlightOutliner\n  };\n}\nglobalThis.pdfjsLib = {\n  AbortException: AbortException,\n  AnnotationEditorLayer: AnnotationEditorLayer,\n  AnnotationEditorParamsType: AnnotationEditorParamsType,\n  AnnotationEditorType: AnnotationEditorType,\n  AnnotationEditorUIManager: AnnotationEditorUIManager,\n  AnnotationLayer: AnnotationLayer,\n  AnnotationMode: AnnotationMode,\n  AnnotationType: AnnotationType,\n  build: build,\n  ColorPicker: ColorPicker,\n  createValidAbsoluteUrl: createValidAbsoluteUrl,\n  DOMSVGFactory: DOMSVGFactory,\n  DrawLayer: DrawLayer,\n  FeatureTest: util_FeatureTest,\n  fetchData: fetchData,\n  getDocument: getDocument,\n  getFilenameFromUrl: getFilenameFromUrl,\n  getPdfFilenameFromUrl: getPdfFilenameFromUrl,\n  getUuid: getUuid,\n  getXfaPageViewport: getXfaPageViewport,\n  GlobalWorkerOptions: GlobalWorkerOptions,\n  ImageKind: util_ImageKind,\n  InvalidPDFException: InvalidPDFException,\n  isDataScheme: isDataScheme,\n  isPdfFile: isPdfFile,\n  isValidExplicitDest: isValidExplicitDest,\n  MathClamp: MathClamp,\n  noContextMenu: noContextMenu,\n  normalizeUnicode: normalizeUnicode,\n  OPS: OPS,\n  OutputScale: OutputScale,\n  PasswordResponses: PasswordResponses,\n  PDFDataRangeTransport: PDFDataRangeTransport,\n  PDFDateString: PDFDateString,\n  PDFWorker: PDFWorker,\n  PermissionFlag: PermissionFlag,\n  PixelsPerInch: PixelsPerInch,\n  RenderingCancelledException: RenderingCancelledException,\n  ResponseException: ResponseException,\n  setLayerDimensions: setLayerDimensions,\n  shadow: shadow,\n  SignatureExtractor: SignatureExtractor,\n  stopEvent: stopEvent,\n  SupportedImageMimeTypes: SupportedImageMimeTypes,\n  TextLayer: TextLayer,\n  TouchManager: TouchManager,\n  updateUrlHash: updateUrlHash,\n  Util: Util,\n  VerbosityLevel: VerbosityLevel,\n  version: version,\n  XfaLayer: XfaLayer\n};\n\nexport { AbortException, AnnotationEditorLayer, AnnotationEditorParamsType, AnnotationEditorType, AnnotationEditorUIManager, AnnotationLayer, AnnotationMode, AnnotationType, ColorPicker, DOMSVGFactory, DrawLayer, util_FeatureTest as FeatureTest, GlobalWorkerOptions, util_ImageKind as ImageKind, InvalidPDFException, MathClamp, OPS, OutputScale, PDFDataRangeTransport, PDFDateString, PDFWorker, PasswordResponses, PermissionFlag, PixelsPerInch, RenderingCancelledException, ResponseException, SignatureExtractor, SupportedImageMimeTypes, TextLayer, TouchManager, Util, VerbosityLevel, XfaLayer, build, createValidAbsoluteUrl, fetchData, getDocument, getFilenameFromUrl, getPdfFilenameFromUrl, getUuid, getXfaPageViewport, isDataScheme, isPdfFile, isValidExplicitDest, noContextMenu, normalizeUnicode, setLayerDimensions, shadow, stopEvent, updateUrlHash, version };\n\n//# sourceMappingURL=pdf.mjs.map",":host {\n  display: block;\n  font-family: sans-serif;\n}\n\n.toolbar {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 12px;\n  justify-content: center;\n}\n\n.toolbar button {\n  padding: 6px 14px;\n  border: 1px solid #ccc;\n  border-radius: 20px;\n  background: #f9f9f9;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.toolbar button.active {\n  background: #007bff;\n  color: #fff;\n  border-color: #007bff;\n}\n\n.pdf-container {\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n}\n\n.page {\n  position: relative;\n  margin: auto;\n  border: 1px solid #ddd;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);\n  cursor: crosshair;\n}\n\ncanvas {\n  width: 100%;\n  height: auto;\n  display: block;\n}\n\n.field {\n  position: absolute;\n  background: rgba(255, 255, 0, 0.4);\n  border: 1px solid #333;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 2px 6px;\n  font-size: 12px;\n  cursor: move;\n}\n\n.field button {\n  background: red;\n  color: white;\n  border: none;\n  border-radius: 50%;\n  width: 18px;\n  height: 18px;\n  font-size: 12px;\n  margin-left: 4px;\n  cursor: pointer;\n}\n","import { Component, Host, h, Prop, State, Element, Watch, Event, EventEmitter } from '@stencil/core';\nimport * as pdfjsLib from 'pdfjs-dist';\n\ninterface Field {\n  id: string;\n  type: string;\n  page: number;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\n@Component({\n  tag: 'signiture-builder',\n  styleUrl: 'signiture-builder.css',\n  shadow: true,\n})\nexport class SignitureBuilder {\n  @Element() el: HTMLElement;\n\n  @Prop() fileUrl: string;\n  @State() pdfDoc: any;\n  @State() totalPages: number = 0;\n  @State() scale: number = 1.2;\n  @State() fields: Field[] = [];\n  @State() selectedFieldType: string = null;\n  @State() pageDims: Record<number, { width: number; height: number }> = {};\n\n  @Event() fieldsChanged: EventEmitter<Field[]>;\n\n  private draggingField: Field = null;\n  private dragOffsetX = 0;\n  private dragOffsetY = 0;\n\n  private fieldTypes = [\n    { type: 'signature', label: '✍ Signature', width: 150, height: 50 },\n    { type: 'text', label: '📝 Text', width: 120, height: 40 },\n    { type: 'date', label: '📅 Date', width: 100, height: 40 },\n  ];\n\n  componentWillLoad() {\n    pdfjsLib.GlobalWorkerOptions.workerSrc = '/signiturebuilderwebcomponents/assets/pdf.worker.min.mjs';\n    if (this.fileUrl) this.loadPdf();\n  }\n\n  @Watch('fileUrl')\n  fileUrlChanged() {\n    this.loadPdf();\n  }\n\n  async loadPdf() {\n    const loadingTask = pdfjsLib.getDocument(this.fileUrl);\n    this.pdfDoc = await loadingTask.promise;\n    this.totalPages = this.pdfDoc.numPages;\n    this.pageDims = {};\n    await this.renderPages();\n  }\n\n  async renderPages() {\n    for (let i = 1; i <= this.totalPages; i++) {\n      const page = await this.pdfDoc.getPage(i);\n      const viewport = page.getViewport({ scale: this.scale });\n      this.pageDims[i] = { width: viewport.width, height: viewport.height };\n      const canvas = this.el.shadowRoot.querySelector(`#canvas-${i}`) as HTMLCanvasElement;\n      const context = canvas.getContext('2d');\n      canvas.height = viewport.height;\n      canvas.width = viewport.width;\n      await page.render({ canvasContext: context, viewport }).promise;\n    }\n  }\n\n  handleAddField(e: MouseEvent, pageNum: number) {\n    if (!this.selectedFieldType) return;\n    const pageContainer = e.currentTarget as HTMLElement;\n    const rect = pageContainer.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    const def = this.fieldTypes.find(f => f.type === this.selectedFieldType);\n    const newField: Field = {\n      id: `${Date.now()}`,\n      type: this.selectedFieldType,\n      page: pageNum,\n      x,\n      y,\n      width: def.width,\n      height: def.height,\n    };\n\n    this.fields = [...this.fields, newField];\n    this.fieldsChanged.emit(this.fields);\n    this.selectedFieldType = null;\n  }\n\n  startDrag(e: MouseEvent, field: Field) {\n    e.stopPropagation();\n    this.draggingField = field;\n    const rect = (e.currentTarget as HTMLElement).getBoundingClientRect();\n    this.dragOffsetX = e.clientX - rect.left;\n    this.dragOffsetY = e.clientY - rect.top;\n    document.addEventListener('mousemove', this.handleDrag);\n    document.addEventListener('mouseup', this.stopDrag);\n  }\n\n  handleDrag = (e: MouseEvent) => {\n    if (!this.draggingField) return;\n    const pageContainer = this.el.shadowRoot.querySelector(`.page[data-page=\"${this.draggingField.page}\"]`) as HTMLElement;\n    const rect = pageContainer.getBoundingClientRect();\n    const newX = Math.min(Math.max(0, e.clientX - rect.left - this.dragOffsetX), rect.width - this.draggingField.width);\n    const newY = Math.min(Math.max(0, e.clientY - rect.top - this.dragOffsetY), rect.height - this.draggingField.height);\n\n    this.fields = this.fields.map(f =>\n      f.id === this.draggingField.id ? { ...f, x: newX, y: newY } : f\n    );\n    this.fieldsChanged.emit(this.fields);\n  };\n\n  stopDrag = () => {\n    this.draggingField = null;\n    document.removeEventListener('mousemove', this.handleDrag);\n    document.removeEventListener('mouseup', this.stopDrag);\n  };\n\n  deleteField(id: string) {\n    this.fields = this.fields.filter(f => f.id !== id);\n    this.fieldsChanged.emit(this.fields);\n  }\n\n  render() {\n    return (\n      <Host>\n        <div class=\"toolbar\">\n          {this.fieldTypes.map(ft => (\n            <button\n              class={{ active: this.selectedFieldType === ft.type }}\n              onClick={() => (this.selectedFieldType = ft.type)}\n            >\n              {ft.label}\n            </button>\n          ))}\n        </div>\n\n        <div class=\"pdf-container\">\n          {Array.from({ length: this.totalPages }, (_, i) => i + 1).map(pageNum => (\n            <div\n              class=\"page\"\n              data-page={pageNum}\n              onClick={e => this.handleAddField(e, pageNum)}\n              style={{\n                width: `${this.pageDims[pageNum]?.width || 600}px`,\n                height: `${this.pageDims[pageNum]?.height || 800}px`,\n              }}\n            >\n              <canvas id={`canvas-${pageNum}`}></canvas>\n              {this.fields\n                .filter(f => f.page === pageNum)\n                .map(f => (\n                  <div\n                    class={`field ${f.type}`}\n                    style={{\n                      left: `${f.x}px`,\n                      top: `${f.y}px`,\n                      width: `${f.width}px`,\n                      height: `${f.height}px`,\n                    }}\n                    onMouseDown={e => this.startDrag(e, f)}\n                  >\n                    <span>{f.type}</span>\n                    <button onClick={() => this.deleteField(f.id)}>×</button>\n                  </div>\n                ))}\n            </div>\n          ))}\n        </div>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}